(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function R_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sm={exports:{}},Pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function XS(){if(Lb)return Pl;Lb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:n,type:r,key:c,ref:o!==void 0?o:null,props:u}}return Pl.Fragment=t,Pl.jsx=s,Pl.jsxs=s,Pl}var Ub;function $S(){return Ub||(Ub=1,Sm.exports=XS()),Sm.exports}var f=$S(),Am={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function ZS(){if(Bb)return Ct;Bb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function V(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,L={};function z(O,rt,dt){this.props=O,this.context=rt,this.refs=L,this.updater=dt||k}z.prototype.isReactComponent={},z.prototype.setState=function(O,rt){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,rt,"setState")},z.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function W(){}W.prototype=z.prototype;function K(O,rt,dt){this.props=O,this.context=rt,this.refs=L,this.updater=dt||k}var tt=K.prototype=new W;tt.constructor=K,U(tt,z.prototype),tt.isPureReactComponent=!0;var et=Array.isArray;function J(){}var j={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function A(O,rt,dt){var mt=dt.ref;return{$$typeof:n,type:O,key:rt,ref:mt!==void 0?mt:null,props:dt}}function N(O,rt){return A(O.type,rt,O.props)}function M(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function E(O){var rt={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(dt){return rt[dt]})}var D=/\/+/g;function st(O,rt){return typeof O=="object"&&O!==null&&O.key!=null?E(""+O.key):rt.toString(36)}function ut(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(J,J):(O.status="pending",O.then(function(rt){O.status==="pending"&&(O.status="fulfilled",O.value=rt)},function(rt){O.status==="pending"&&(O.status="rejected",O.reason=rt)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,rt,dt,mt,vt){var At=typeof O;(At==="undefined"||At==="boolean")&&(O=null);var zt=!1;if(O===null)zt=!0;else switch(At){case"bigint":case"string":case"number":zt=!0;break;case"object":switch(O.$$typeof){case n:case t:zt=!0;break;case b:return zt=O._init,B(zt(O._payload),rt,dt,mt,vt)}}if(zt)return vt=vt(O),zt=mt===""?"."+st(O,0):mt,et(vt)?(dt="",zt!=null&&(dt=zt.replace(D,"$&/")+"/"),B(vt,rt,dt,"",function(_r){return _r})):vt!=null&&(M(vt)&&(vt=N(vt,dt+(vt.key==null||O&&O.key===vt.key?"":(""+vt.key).replace(D,"$&/")+"/")+zt)),rt.push(vt)),1;zt=0;var Pe=mt===""?".":mt+":";if(et(O))for(var ue=0;ue<O.length;ue++)mt=O[ue],At=Pe+st(mt,ue),zt+=B(mt,rt,dt,At,vt);else if(ue=V(O),typeof ue=="function")for(O=ue.call(O),ue=0;!(mt=O.next()).done;)mt=mt.value,At=Pe+st(mt,ue++),zt+=B(mt,rt,dt,At,vt);else if(At==="object"){if(typeof O.then=="function")return B(ut(O),rt,dt,mt,vt);throw rt=String(O),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.")}return zt}function X(O,rt,dt){if(O==null)return O;var mt=[],vt=0;return B(O,mt,"","",function(At){return rt.call(dt,At,vt++)}),mt}function ct(O){if(O._status===-1){var rt=O._result;rt=rt(),rt.then(function(dt){(O._status===0||O._status===-1)&&(O._status=1,O._result=dt)},function(dt){(O._status===0||O._status===-1)&&(O._status=2,O._result=dt)}),O._status===-1&&(O._status=0,O._result=rt)}if(O._status===1)return O._result.default;throw O._result}var Tt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var rt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(rt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Et={map:X,forEach:function(O,rt,dt){X(O,function(){rt.apply(this,arguments)},dt)},count:function(O){var rt=0;return X(O,function(){rt++}),rt},toArray:function(O){return X(O,function(rt){return rt})||[]},only:function(O){if(!M(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ct.Activity=x,Ct.Children=Et,Ct.Component=z,Ct.Fragment=s,Ct.Profiler=o,Ct.PureComponent=K,Ct.StrictMode=r,Ct.Suspense=g,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(O){return j.H.useMemoCache(O)}},Ct.cache=function(O){return function(){return O.apply(null,arguments)}},Ct.cacheSignal=function(){return null},Ct.cloneElement=function(O,rt,dt){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var mt=U({},O.props),vt=O.key;if(rt!=null)for(At in rt.key!==void 0&&(vt=""+rt.key),rt)!C.call(rt,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&rt.ref===void 0||(mt[At]=rt[At]);var At=arguments.length-2;if(At===1)mt.children=dt;else if(1<At){for(var zt=Array(At),Pe=0;Pe<At;Pe++)zt[Pe]=arguments[Pe+2];mt.children=zt}return A(O.type,vt,mt)},Ct.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ct.createElement=function(O,rt,dt){var mt,vt={},At=null;if(rt!=null)for(mt in rt.key!==void 0&&(At=""+rt.key),rt)C.call(rt,mt)&&mt!=="key"&&mt!=="__self"&&mt!=="__source"&&(vt[mt]=rt[mt]);var zt=arguments.length-2;if(zt===1)vt.children=dt;else if(1<zt){for(var Pe=Array(zt),ue=0;ue<zt;ue++)Pe[ue]=arguments[ue+2];vt.children=Pe}if(O&&O.defaultProps)for(mt in zt=O.defaultProps,zt)vt[mt]===void 0&&(vt[mt]=zt[mt]);return A(O,At,vt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(O){return{$$typeof:m,render:O}},Ct.isValidElement=M,Ct.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:ct}},Ct.memo=function(O,rt){return{$$typeof:y,type:O,compare:rt===void 0?null:rt}},Ct.startTransition=function(O){var rt=j.T,dt={};j.T=dt;try{var mt=O(),vt=j.S;vt!==null&&vt(dt,mt),typeof mt=="object"&&mt!==null&&typeof mt.then=="function"&&mt.then(J,Tt)}catch(At){Tt(At)}finally{rt!==null&&dt.types!==null&&(rt.types=dt.types),j.T=rt}},Ct.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ct.use=function(O){return j.H.use(O)},Ct.useActionState=function(O,rt,dt){return j.H.useActionState(O,rt,dt)},Ct.useCallback=function(O,rt){return j.H.useCallback(O,rt)},Ct.useContext=function(O){return j.H.useContext(O)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(O,rt){return j.H.useDeferredValue(O,rt)},Ct.useEffect=function(O,rt){return j.H.useEffect(O,rt)},Ct.useEffectEvent=function(O){return j.H.useEffectEvent(O)},Ct.useId=function(){return j.H.useId()},Ct.useImperativeHandle=function(O,rt,dt){return j.H.useImperativeHandle(O,rt,dt)},Ct.useInsertionEffect=function(O,rt){return j.H.useInsertionEffect(O,rt)},Ct.useLayoutEffect=function(O,rt){return j.H.useLayoutEffect(O,rt)},Ct.useMemo=function(O,rt){return j.H.useMemo(O,rt)},Ct.useOptimistic=function(O,rt){return j.H.useOptimistic(O,rt)},Ct.useReducer=function(O,rt,dt){return j.H.useReducer(O,rt,dt)},Ct.useRef=function(O){return j.H.useRef(O)},Ct.useState=function(O){return j.H.useState(O)},Ct.useSyncExternalStore=function(O,rt,dt){return j.H.useSyncExternalStore(O,rt,dt)},Ct.useTransition=function(){return j.H.useTransition()},Ct.version="19.2.3",Ct}var zb;function Wp(){return zb||(zb=1,Am.exports=ZS()),Am.exports}var q=Wp();const Ch=R_(q);var Nm={exports:{}},Ll={},Cm={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function WS(){return Fb||(Fb=1,(function(n){function t(B,X){var ct=B.length;B.push(X);t:for(;0<ct;){var Tt=ct-1>>>1,Et=B[Tt];if(0<o(Et,X))B[Tt]=X,B[ct]=Et,ct=Tt;else break t}}function s(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],ct=B.pop();if(ct!==X){B[0]=ct;t:for(var Tt=0,Et=B.length,O=Et>>>1;Tt<O;){var rt=2*(Tt+1)-1,dt=B[rt],mt=rt+1,vt=B[mt];if(0>o(dt,ct))mt<Et&&0>o(vt,dt)?(B[Tt]=vt,B[mt]=ct,Tt=mt):(B[Tt]=dt,B[rt]=ct,Tt=rt);else if(mt<Et&&0>o(vt,ct))B[Tt]=vt,B[mt]=ct,Tt=mt;else break t}}return X}function o(B,X){var ct=B.sortIndex-X.sortIndex;return ct!==0?ct:B.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();n.unstable_now=function(){return c.now()-m}}var g=[],y=[],b=1,x=null,w=3,V=!1,k=!1,U=!1,L=!1,z=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function tt(B){for(var X=s(y);X!==null;){if(X.callback===null)r(y);else if(X.startTime<=B)r(y),X.sortIndex=X.expirationTime,t(g,X);else break;X=s(y)}}function et(B){if(U=!1,tt(B),!k)if(s(g)!==null)k=!0,J||(J=!0,E());else{var X=s(y);X!==null&&ut(et,X.startTime-B)}}var J=!1,j=-1,C=5,A=-1;function N(){return L?!0:!(n.unstable_now()-A<C)}function M(){if(L=!1,J){var B=n.unstable_now();A=B;var X=!0;try{t:{k=!1,U&&(U=!1,W(j),j=-1),V=!0;var ct=w;try{e:{for(tt(B),x=s(g);x!==null&&!(x.expirationTime>B&&N());){var Tt=x.callback;if(typeof Tt=="function"){x.callback=null,w=x.priorityLevel;var Et=Tt(x.expirationTime<=B);if(B=n.unstable_now(),typeof Et=="function"){x.callback=Et,tt(B),X=!0;break e}x===s(g)&&r(g),tt(B)}else r(g);x=s(g)}if(x!==null)X=!0;else{var O=s(y);O!==null&&ut(et,O.startTime-B),X=!1}}break t}finally{x=null,w=ct,V=!1}X=void 0}}finally{X?E():J=!1}}}var E;if(typeof K=="function")E=function(){K(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,st=D.port2;D.port1.onmessage=M,E=function(){st.postMessage(null)}}else E=function(){z(M,0)};function ut(B,X){j=z(function(){B(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(B){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var ct=w;w=X;try{return B()}finally{w=ct}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ct=w;w=B;try{return X()}finally{w=ct}},n.unstable_scheduleCallback=function(B,X,ct){var Tt=n.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Tt+ct:Tt):ct=Tt,B){case 1:var Et=-1;break;case 2:Et=250;break;case 5:Et=1073741823;break;case 4:Et=1e4;break;default:Et=5e3}return Et=ct+Et,B={id:b++,callback:X,priorityLevel:B,startTime:ct,expirationTime:Et,sortIndex:-1},ct>Tt?(B.sortIndex=ct,t(y,B),s(g)===null&&B===s(y)&&(U?(W(j),j=-1):U=!0,ut(et,ct-Tt))):(B.sortIndex=Et,t(g,B),k||V||(k=!0,J||(J=!0,E()))),B},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(B){var X=w;return function(){var ct=w;w=X;try{return B.apply(this,arguments)}finally{w=ct}}}})(Rm)),Rm}var qb;function JS(){return qb||(qb=1,Cm.exports=WS()),Cm.exports}var jm={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function tA(){if(Hb)return sn;Hb=1;var n=Wp();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:y,implementation:b}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,b)},sn.flushSync=function(g){var y=c.T,b=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=y,r.p=b,r.d.f()}},sn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},sn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},sn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,x=m(b,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,V=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:V}):b==="script"&&r.d.X(g,{crossOrigin:x,integrity:w,fetchPriority:V,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},sn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},sn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,x=m(b,y.crossOrigin);r.d.L(g,b,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},sn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},sn.requestFormReset=function(g){r.d.r(g)},sn.unstable_batchedUpdates=function(g,y){return g(y)},sn.useFormState=function(g,y,b){return c.H.useFormState(g,y,b)},sn.useFormStatus=function(){return c.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var Gb;function eA(){if(Gb)return jm.exports;Gb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),jm.exports=tA(),jm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function nA(){if(Yb)return Ll;Yb=1;var n=JS(),t=Wp(),s=eA();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function y(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,l=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return g(d),e;if(p===l)return g(d),i;p=p.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=p;else{for(var _=!1,S=d.child;S;){if(S===a){_=!0,a=d,l=p;break}if(S===l){_=!0,l=d,a=p;break}S=S.sibling}if(!_){for(S=p.child;S;){if(S===a){_=!0,a=p,l=d;break}if(S===l){_=!0,l=p,a=d;break}S=S.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function b(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=b(e),i!==null)return i;e=e.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),K=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function E(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var D=Symbol.for("react.client.reference");function st(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===D?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case z:return"Profiler";case L:return"StrictMode";case et:return"Suspense";case J:return"SuspenseList";case A:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case K:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case tt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case j:return i=e.displayName||null,i!==null?i:st(e.type)||"Memo";case C:i=e._payload,e=e._init;try{return st(e(i))}catch{}}return null}var ut=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Tt=[],Et=-1;function O(e){return{current:e}}function rt(e){0>Et||(e.current=Tt[Et],Tt[Et]=null,Et--)}function dt(e,i){Et++,Tt[Et]=e.current,e.current=i}var mt=O(null),vt=O(null),At=O(null),zt=O(null);function Pe(e,i){switch(dt(At,i),dt(vt,e),dt(mt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?ob(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=ob(i),e=lb(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}rt(mt),dt(mt,e)}function ue(){rt(mt),rt(vt),rt(At)}function _r(e){e.memoizedState!==null&&dt(zt,e);var i=mt.current,a=lb(i,e.type);i!==a&&(dt(vt,e),dt(mt,a))}function ma(e){vt.current===e&&(rt(mt),rt(vt)),zt.current===e&&(rt(zt),Ml._currentValue=ct)}var pa,ga;function gs(e){if(pa===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);pa=i&&i[1]||"",ga=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pa+e+ga}var Mo=!1;function Tr(e,i){if(!e||Mo)return"";Mo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(Z){var Q=Z}Reflect.construct(e,[],at)}else{try{at.call()}catch(Z){Q=Z}e.call(at.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(at=e())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),_=p[0],S=p[1];if(_&&S){var I=_.split(`
`),Y=S.split(`
`);for(d=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(l===I.length||d===Y.length)for(l=I.length-1,d=Y.length-1;1<=l&&0<=d&&I[l]!==Y[d];)d--;for(;1<=l&&0<=d;l--,d--)if(I[l]!==Y[d]){if(l!==1||d!==1)do if(l--,d--,0>d||I[l]!==Y[d]){var nt=`
`+I[l].replace(" at new "," at ");return e.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",e.displayName)),nt}while(1<=l&&0<=d);break}}}finally{Mo=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?gs(a):""}function Io(e,i){switch(e.tag){case 26:case 27:case 5:return gs(e.type);case 16:return gs("Lazy");case 13:return e.child!==i&&i!==null?gs("Suspense Fallback"):gs("Suspense");case 19:return gs("SuspenseList");case 0:case 15:return Tr(e.type,!1);case 11:return Tr(e.type.render,!1);case 1:return Tr(e.type,!0);case 31:return gs("Activity");default:return""}}function ko(e){try{var i="",a=null;do i+=Io(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ee=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,Ei=n.unstable_cancelCallback,Ad=n.unstable_shouldYield,Du=n.unstable_requestPaint,un=n.unstable_now,wr=n.unstable_getCurrentPriorityLevel,Oo=n.unstable_ImmediatePriority,Po=n.unstable_UserBlockingPriority,Si=n.unstable_NormalPriority,Nd=n.unstable_LowPriority,Vu=n.unstable_IdlePriority,Mu=n.log,Iu=n.unstable_setDisableYieldValue,Jn=null,Ke=null;function On(e){if(typeof Mu=="function"&&Iu(e),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Jn,e)}catch{}}var be=Math.clz32?Math.clz32:Ou,ku=Math.log,ya=Math.LN2;function Ou(e){return e>>>=0,e===0?32:31-(ku(e)/ya|0)|0}var ys=256,Er=262144,Se=4194304;function vs(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bs(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,p=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~p,l!==0?d=vs(l):(_&=S,_!==0?d=vs(_):a||(a=S&~e,a!==0&&(d=vs(a))))):(S=l&~p,S!==0?d=vs(S):_!==0?d=vs(_):a||(a=l&~e,a!==0&&(d=vs(a)))),d===0?0:i!==0&&i!==d&&(i&p)===0&&(p=d&-d,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:d}function ts(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Cd(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pu(){var e=Se;return Se<<=1,(Se&62914560)===0&&(Se=4194304),e}function xs(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Sr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Rd(e,i,a,l,d,p){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,I=e.expirationTimes,Y=e.hiddenUpdates;for(a=_&~a;0<a;){var nt=31-be(a),at=1<<nt;S[nt]=0,I[nt]=-1;var Q=Y[nt];if(Q!==null)for(Y[nt]=null,nt=0;nt<Q.length;nt++){var Z=Q[nt];Z!==null&&(Z.lane&=-536870913)}a&=~at}l!==0&&Ar(e,l,0),p!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=p&~(_&~i))}function Ar(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-be(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Lo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-be(a),d=1<<l;d&i|e[l]&i&&(e[l]|=i),a&=~d}}function Uo(e,i){var a=i&-i;return a=(a&42)!==0?1:Nr(a),(a&(e.suspendedLanes|i))!==0?0:a}function Nr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Js(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Lu(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:Db(e.type))}function es(e,i){var a=X.p;try{return X.p=e,i()}finally{X.p=a}}var ns=Math.random().toString(36).slice(2),Ae="__reactFiber$"+ns,Fe="__reactProps$"+ns,_s="__reactContainer$"+ns,va="__reactEvents$"+ns,jd="__reactListeners$"+ns,Uu="__reactHandles$"+ns,Bu="__reactResources$"+ns,Ts="__reactMarker$"+ns;function ba(e){delete e[Ae],delete e[Fe],delete e[va],delete e[jd],delete e[Uu]}function ws(e){var i=e[Ae];if(i)return i;for(var a=e.parentNode;a;){if(i=a[_s]||a[Ae]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=pb(e);e!==null;){if(a=e[Ae])return a;e=pb(e)}return i}e=a,a=e.parentNode}return null}function Pn(e){if(e=e[Ae]||e[_s]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function An(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Es(e){var i=e[Bu];return i||(i=e[Bu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ne(e){e[Ts]=!0}var Bo=new Set,zo={};function Ss(e,i){As(e,i),As(e+"Capture",i)}function As(e,i){for(zo[e]=i,e=0;e<i.length;e++)Bo.add(i[e])}var Fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},Ho={};function zu(e){return Ee.call(Ho,e)?!0:Ee.call(qo,e)?!1:Fo.test(e)?Ho[e]=!0:(qo[e]=!0,!1)}function xa(e,i,a){if(zu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Nn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Ce(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function qe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ai(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Go(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,p=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,p.call(this,_)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Xt(e){if(!e._valueTracker){var i=Ai(e)?"checked":"value";e._valueTracker=Go(e,i,""+e[i])}}function Cr(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=Ai(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function Ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Rr=/[\n"\\]/g;function fn(e){return e.replace(Rr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function _a(e,i,a,l,d,p,_,S){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+qe(i)):e.value!==""+qe(i)&&(e.value=""+qe(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?Yo(e,_,qe(i)):a!=null?Yo(e,_,qe(a)):l!=null&&e.removeAttribute("value"),d==null&&p!=null&&(e.defaultChecked=!!p),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+qe(S):e.removeAttribute("name")}function Fu(e,i,a,l,d,p,_,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Xt(e);return}a=a!=null?""+qe(a):"",i=i!=null?""+qe(i):a,S||i===e.value||(e.value=i),e.defaultValue=i}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Xt(e)}function Yo(e,i,a){i==="number"&&Ns(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ni(e,i,a,l){if(e=e.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=i.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+qe(a),i=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}i!==null||e[d].disabled||(i=e[d])}i!==null&&(i.selected=!0)}}function qu(e,i,a){if(i!=null&&(i=""+qe(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+qe(a):""}function Ci(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ut(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=qe(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Xt(e)}function mn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Hu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ko(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||Hu.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Qo(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in i)l=i[d],i.hasOwnProperty(d)&&a[d]!==l&&Ko(e,d,l)}else for(var p in i)i.hasOwnProperty(p)&&Ko(e,p,i[p])}function Ta(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ri=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wa(e){return Ri.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ss(){}var Xo=null;function Ln(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ji=null,Cs=null;function jr(e){var i=Pn(e);if(i&&(e=i.stateNode)){var a=e[Fe]||null;t:switch(e=i.stateNode,i.type){case"input":if(_a(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var d=l[Fe]||null;if(!d)throw Error(r(90));_a(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Cr(l)}break t;case"textarea":qu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ni(e,!!a.multiple,i,!1)}}}var Ea=!1;function Di(e,i,a){if(Ea)return e(i,a);Ea=!0;try{var l=e(i);return l}finally{if(Ea=!1,(ji!==null||Cs!==null)&&(Lc(),ji&&(i=ji,e=Cs,Cs=ji=null,jr(i),e)))for(i=0;i<e.length;i++)jr(e[i])}}function is(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Fe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dr=!1;if(Un)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Dr=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Dr=!1}var Rs=null,$o=null,Vr=null;function Zo(){if(Vr)return Vr;var e,i=$o,a=i.length,l,d="value"in Rs?Rs.value:Rs.textContent,p=d.length;for(e=0;e<a&&i[e]===d[e];e++);var _=a-e;for(l=1;l<=_&&i[a-l]===d[p-l];l++);return Vr=d.slice(e,1<l?1-l:void 0)}function Mr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function rs(){return!1}function Qe(e){function i(a,l,d,p,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ti:rs,this.isPropagationStopped=rs,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=Qe(ei),Vi=x({},ei,{view:0,detail:0}),Wo=Qe(Vi),Mi,Sa,Ds,Aa=x({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ii,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(Mi=e.screenX-Ds.screenX,Sa=e.screenY-Ds.screenY):Sa=Mi=0,Ds=e),Mi)},movementY:function(e){return"movementY"in e?e.movementY:Sa}}),Jo=Qe(Aa),Ir=x({},Aa,{dataTransfer:0}),Yu=Qe(Ir),Ku=x({},Vi,{relatedTarget:0}),kr=Qe(Ku),tl=x({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=Qe(tl),Na=x({},ei,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xu=Qe(Na),$u=x({},ei,{data:0}),Vs=Qe($u),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Ju[e])?!!i[e]:!1}function Ii(){return tc}var cn=x({},Vi,{key:function(e){if(e.key){var i=Zu[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Mr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ii,charCode:function(e){return e.type==="keypress"?Mr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ec=Qe(cn),nc=x({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ni=Qe(nc),h=x({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ii}),v=Qe(h),T=x({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Qe(T),H=x({},Aa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Qe(H),ht=x({},ei,{newState:0,oldState:0}),jt=Qe(ht),xe=[9,13,27,32],Yt=Un&&"CompositionEvent"in window,ce=null;Un&&"documentMode"in document&&(ce=document.documentMode);var Bn=Un&&"TextEvent"in window&&!ce,Ms=Un&&(!Yt||ce&&8<ce&&11>=ce),as=" ",os=!1;function Or(e,i){switch(e){case"keyup":return xe.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ra=!1;function bE(e,i){switch(e){case"compositionend":return Ca(i);case"keypress":return i.which!==32?null:(os=!0,as);case"textInput":return e=i.data,e===as&&os?null:e;default:return null}}function xE(e,i){if(Ra)return e==="compositionend"||!Yt&&Or(e,i)?(e=Zo(),Vr=$o=Rs=null,Ra=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ms&&i.locale!=="ko"?null:i.data;default:return null}}var _E={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vy(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!_E[e.type]:i==="textarea"}function by(e,i,a,l){ji?Cs?Cs.push(l):Cs=[l]:ji=l,i=Gc(i,"onChange"),0<i.length&&(a=new js("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var el=null,nl=null;function TE(e){eb(e,0)}function sc(e){var i=An(e);if(Cr(i))return e}function xy(e,i){if(e==="change")return i}var _y=!1;if(Un){var Dd;if(Un){var Vd="oninput"in document;if(!Vd){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),Vd=typeof Ty.oninput=="function"}Dd=Vd}else Dd=!1;_y=Dd&&(!document.documentMode||9<document.documentMode)}function wy(){el&&(el.detachEvent("onpropertychange",Ey),nl=el=null)}function Ey(e){if(e.propertyName==="value"&&sc(nl)){var i=[];by(i,nl,e,Ln(e)),Di(TE,i)}}function wE(e,i,a){e==="focusin"?(wy(),el=i,nl=a,el.attachEvent("onpropertychange",Ey)):e==="focusout"&&wy()}function EE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sc(nl)}function SE(e,i){if(e==="click")return sc(i)}function AE(e,i){if(e==="input"||e==="change")return sc(i)}function NE(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Cn=typeof Object.is=="function"?Object.is:NE;function sl(e,i){if(Cn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Ee.call(i,d)||!Cn(e[d],i[d]))return!1}return!0}function Sy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ay(e,i){var a=Sy(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Sy(a)}}function Ny(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Ny(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Cy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ns(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Ns(e.document)}return i}function Md(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var CE=Un&&"documentMode"in document&&11>=document.documentMode,ja=null,Id=null,il=null,kd=!1;function Ry(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kd||ja==null||ja!==Ns(l)||(l=ja,"selectionStart"in l&&Md(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),il&&sl(il,l)||(il=l,l=Gc(Id,"onSelect"),0<l.length&&(i=new js("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=ja)))}function Pr(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Da={animationend:Pr("Animation","AnimationEnd"),animationiteration:Pr("Animation","AnimationIteration"),animationstart:Pr("Animation","AnimationStart"),transitionrun:Pr("Transition","TransitionRun"),transitionstart:Pr("Transition","TransitionStart"),transitioncancel:Pr("Transition","TransitionCancel"),transitionend:Pr("Transition","TransitionEnd")},Od={},jy={};Un&&(jy=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Lr(e){if(Od[e])return Od[e];if(!Da[e])return e;var i=Da[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in jy)return Od[e]=i[a];return e}var Dy=Lr("animationend"),Vy=Lr("animationiteration"),My=Lr("animationstart"),RE=Lr("transitionrun"),jE=Lr("transitionstart"),DE=Lr("transitioncancel"),Iy=Lr("transitionend"),ky=new Map,Pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pd.push("scrollEnd");function ls(e,i){ky.set(e,i),Ss(i,[e])}var ic=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},zn=[],Va=0,Ld=0;function rc(){for(var e=Va,i=Ld=Va=0;i<e;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var d=zn[i];zn[i++]=null;var p=zn[i];if(zn[i++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}p!==0&&Oy(a,d,p)}}function ac(e,i,a,l){zn[Va++]=e,zn[Va++]=i,zn[Va++]=a,zn[Va++]=l,Ld|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ud(e,i,a,l){return ac(e,i,a,l),oc(e)}function Ur(e,i){return ac(e,null,null,i),oc(e)}function Oy(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,p=e.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(d=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,d&&i!==null&&(d=31-be(a),e=p.hiddenUpdates,l=e[d],l===null?e[d]=[i]:l.push(i),i.lane=a|536870912),p):null}function oc(e){if(50<Al)throw Al=0,Xf=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ma={};function VE(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,i,a,l){return new VE(e,i,a,l)}function Bd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function si(e,i){var a=e.alternate;return a===null?(a=Rn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Py(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function lc(e,i,a,l,d,p){var _=0;if(l=e,typeof e=="function")Bd(e)&&(_=1);else if(typeof e=="string")_=PS(e,a,mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case A:return e=Rn(31,a,i,d),e.elementType=A,e.lanes=p,e;case U:return Br(a.children,d,p,i);case L:_=8,d|=24;break;case z:return e=Rn(12,a,i,d|2),e.elementType=z,e.lanes=p,e;case et:return e=Rn(13,a,i,d),e.elementType=et,e.lanes=p,e;case J:return e=Rn(19,a,i,d),e.elementType=J,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:_=10;break t;case W:_=9;break t;case tt:_=11;break t;case j:_=14;break t;case C:_=16,l=null;break t}_=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return i=Rn(_,a,i,d),i.elementType=e,i.type=l,i.lanes=p,i}function Br(e,i,a,l){return e=Rn(7,e,l,i),e.lanes=a,e}function zd(e,i,a){return e=Rn(6,e,null,i),e.lanes=a,e}function Ly(e){var i=Rn(18,null,null,0);return i.stateNode=e,i}function Fd(e,i,a){return i=Rn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Uy=new WeakMap;function Fn(e,i){if(typeof e=="object"&&e!==null){var a=Uy.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ko(i)},Uy.set(e,i),i)}return{value:e,source:i,stack:ko(i)}}var Ia=[],ka=0,uc=null,rl=0,qn=[],Hn=0,ki=null,Is=1,ks="";function ii(e,i){Ia[ka++]=rl,Ia[ka++]=uc,uc=e,rl=i}function By(e,i,a){qn[Hn++]=Is,qn[Hn++]=ks,qn[Hn++]=ki,ki=e;var l=Is;e=ks;var d=32-be(l)-1;l&=~(1<<d),a+=1;var p=32-be(i)+d;if(30<p){var _=d-d%5;p=(l&(1<<_)-1).toString(32),l>>=_,d-=_,Is=1<<32-be(i)+d|a<<d|l,ks=p+e}else Is=1<<p|a<<d|l,ks=e}function qd(e){e.return!==null&&(ii(e,1),By(e,1,0))}function Hd(e){for(;e===uc;)uc=Ia[--ka],Ia[ka]=null,rl=Ia[--ka],Ia[ka]=null;for(;e===ki;)ki=qn[--Hn],qn[Hn]=null,ks=qn[--Hn],qn[Hn]=null,Is=qn[--Hn],qn[Hn]=null}function zy(e,i){qn[Hn++]=Is,qn[Hn++]=ks,qn[Hn++]=ki,Is=i.id,ks=i.overflow,ki=e}var Xe=null,re=null,Bt=!1,Oi=null,Gn=!1,Gd=Error(r(519));function Pi(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(Fn(i,e)),Gd}function Fy(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Ae]=e,i[Fe]=l,a){case"dialog":It("cancel",i),It("close",i);break;case"iframe":case"object":case"embed":It("load",i);break;case"video":case"audio":for(a=0;a<Cl.length;a++)It(Cl[a],i);break;case"source":It("error",i);break;case"img":case"image":case"link":It("error",i),It("load",i);break;case"details":It("toggle",i);break;case"input":It("invalid",i),Fu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":It("invalid",i);break;case"textarea":It("invalid",i),Ci(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||rb(i.textContent,a)?(l.popover!=null&&(It("beforetoggle",i),It("toggle",i)),l.onScroll!=null&&It("scroll",i),l.onScrollEnd!=null&&It("scrollend",i),l.onClick!=null&&(i.onclick=ss),i=!0):i=!1,i||Pi(e,!0)}function qy(e){for(Xe=e.return;Xe;)switch(Xe.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Xe=Xe.return}}function Oa(e){if(e!==Xe)return!1;if(!Bt)return qy(e),Bt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||cm(e.type,e.memoizedProps)),a=!a),a&&re&&Pi(e),qy(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));re=mb(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));re=mb(e)}else i===27?(i=re,Zi(e.type)?(e=pm,pm=null,re=e):re=i):re=Xe?Kn(e.stateNode.nextSibling):null;return!0}function zr(){re=Xe=null,Bt=!1}function Yd(){var e=Oi;return e!==null&&(vn===null?vn=e:vn.push.apply(vn,e),Oi=null),e}function al(e){Oi===null?Oi=[e]:Oi.push(e)}var Kd=O(null),Fr=null,ri=null;function Li(e,i,a){dt(Kd,i._currentValue),i._currentValue=a}function ai(e){e._currentValue=Kd.current,rt(Kd)}function Qd(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Xd(e,i,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var p=d.dependencies;if(p!==null){var _=d.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=d;for(var I=0;I<i.length;I++)if(S.context===i[I]){p.lanes|=a,S=p.alternate,S!==null&&(S.lanes|=a),Qd(p.return,a,e),l||(_=null);break t}p=S.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,p=_.alternate,p!==null&&(p.lanes|=a),Qd(_,a,e),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===e){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Pa(e,i,a,l){e=null;for(var d=i,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var S=d.type;Cn(d.pendingProps.value,_.value)||(e!==null?e.push(S):e=[S])}}else if(d===zt.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Ml):e=[Ml])}d=d.return}e!==null&&Xd(i,e,a,l),i.flags|=262144}function cc(e){for(e=e.firstContext;e!==null;){if(!Cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function qr(e){Fr=e,ri=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return Hy(Fr,e)}function hc(e,i){return Fr===null&&qr(e),Hy(e,i)}function Hy(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ri===null){if(e===null)throw Error(r(308));ri=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else ri=ri.next=i;return a}var ME=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},IE=n.unstable_scheduleCallback,kE=n.unstable_NormalPriority,Re={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $d(){return{controller:new ME,data:new Map,refCount:0}}function ol(e){e.refCount--,e.refCount===0&&IE(kE,function(){e.controller.abort()})}var ll=null,Zd=0,La=0,Ua=null;function OE(e,i){if(ll===null){var a=ll=[];Zd=0,La=em(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Zd++,i.then(Gy,Gy),i}function Gy(){if(--Zd===0&&ll!==null){Ua!==null&&(Ua.status="fulfilled");var e=ll;ll=null,La=0,Ua=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function PE(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Yy=B.S;B.S=function(e,i){Rv=un(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&OE(e,i),Yy!==null&&Yy(e,i)};var Hr=O(null);function Wd(){var e=Hr.current;return e!==null?e:se.pooledCache}function dc(e,i){i===null?dt(Hr,Hr.current):dt(Hr,i.pool)}function Ky(){var e=Wd();return e===null?null:{parent:Re._currentValue,pool:e}}var Ba=Error(r(460)),Jd=Error(r(474)),fc=Error(r(542)),mc={then:function(){}};function Qy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xy(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(ss,ss),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Zy(e),e;default:if(typeof i.status=="string")i.then(ss,ss);else{if(e=se,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=l}},function(l){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Zy(e),e}throw Yr=i,Ba}}function Gr(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Yr=a,Ba):a}}var Yr=null;function $y(){if(Yr===null)throw Error(r(459));var e=Yr;return Yr=null,e}function Zy(e){if(e===Ba||e===fc)throw Error(r(483))}var za=null,ul=0;function pc(e){var i=ul;return ul+=1,za===null&&(za=[]),Xy(za,e,i)}function cl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function gc(e,i){throw i.$$typeof===w?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Wy(e){function i(F,P){if(e){var G=F.deletions;G===null?(F.deletions=[P],F.flags|=16):G.push(P)}}function a(F,P){if(!e)return null;for(;P!==null;)i(F,P),P=P.sibling;return null}function l(F){for(var P=new Map;F!==null;)F.key!==null?P.set(F.key,F):P.set(F.index,F),F=F.sibling;return P}function d(F,P){return F=si(F,P),F.index=0,F.sibling=null,F}function p(F,P,G){return F.index=G,e?(G=F.alternate,G!==null?(G=G.index,G<P?(F.flags|=67108866,P):G):(F.flags|=67108866,P)):(F.flags|=1048576,P)}function _(F){return e&&F.alternate===null&&(F.flags|=67108866),F}function S(F,P,G,it){return P===null||P.tag!==6?(P=zd(G,F.mode,it),P.return=F,P):(P=d(P,G),P.return=F,P)}function I(F,P,G,it){var xt=G.type;return xt===U?nt(F,P,G.props.children,it,G.key):P!==null&&(P.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===C&&Gr(xt)===P.type)?(P=d(P,G.props),cl(P,G),P.return=F,P):(P=lc(G.type,G.key,G.props,null,F.mode,it),cl(P,G),P.return=F,P)}function Y(F,P,G,it){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=Fd(G,F.mode,it),P.return=F,P):(P=d(P,G.children||[]),P.return=F,P)}function nt(F,P,G,it,xt){return P===null||P.tag!==7?(P=Br(G,F.mode,it,xt),P.return=F,P):(P=d(P,G),P.return=F,P)}function at(F,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=zd(""+P,F.mode,G),P.return=F,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case V:return G=lc(P.type,P.key,P.props,null,F.mode,G),cl(G,P),G.return=F,G;case k:return P=Fd(P,F.mode,G),P.return=F,P;case C:return P=Gr(P),at(F,P,G)}if(ut(P)||E(P))return P=Br(P,F.mode,G,null),P.return=F,P;if(typeof P.then=="function")return at(F,pc(P),G);if(P.$$typeof===K)return at(F,hc(F,P),G);gc(F,P)}return null}function Q(F,P,G,it){var xt=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return xt!==null?null:S(F,P,""+G,it);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case V:return G.key===xt?I(F,P,G,it):null;case k:return G.key===xt?Y(F,P,G,it):null;case C:return G=Gr(G),Q(F,P,G,it)}if(ut(G)||E(G))return xt!==null?null:nt(F,P,G,it,null);if(typeof G.then=="function")return Q(F,P,pc(G),it);if(G.$$typeof===K)return Q(F,P,hc(F,G),it);gc(F,G)}return null}function Z(F,P,G,it,xt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return F=F.get(G)||null,S(P,F,""+it,xt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case V:return F=F.get(it.key===null?G:it.key)||null,I(P,F,it,xt);case k:return F=F.get(it.key===null?G:it.key)||null,Y(P,F,it,xt);case C:return it=Gr(it),Z(F,P,G,it,xt)}if(ut(it)||E(it))return F=F.get(G)||null,nt(P,F,it,xt,null);if(typeof it.then=="function")return Z(F,P,G,pc(it),xt);if(it.$$typeof===K)return Z(F,P,G,hc(P,it),xt);gc(P,it)}return null}function yt(F,P,G,it){for(var xt=null,Ht=null,bt=P,Vt=P=0,Pt=null;bt!==null&&Vt<G.length;Vt++){bt.index>Vt?(Pt=bt,bt=null):Pt=bt.sibling;var Gt=Q(F,bt,G[Vt],it);if(Gt===null){bt===null&&(bt=Pt);break}e&&bt&&Gt.alternate===null&&i(F,bt),P=p(Gt,P,Vt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt,bt=Pt}if(Vt===G.length)return a(F,bt),Bt&&ii(F,Vt),xt;if(bt===null){for(;Vt<G.length;Vt++)bt=at(F,G[Vt],it),bt!==null&&(P=p(bt,P,Vt),Ht===null?xt=bt:Ht.sibling=bt,Ht=bt);return Bt&&ii(F,Vt),xt}for(bt=l(bt);Vt<G.length;Vt++)Pt=Z(bt,F,Vt,G[Vt],it),Pt!==null&&(e&&Pt.alternate!==null&&bt.delete(Pt.key===null?Vt:Pt.key),P=p(Pt,P,Vt),Ht===null?xt=Pt:Ht.sibling=Pt,Ht=Pt);return e&&bt.forEach(function(nr){return i(F,nr)}),Bt&&ii(F,Vt),xt}function wt(F,P,G,it){if(G==null)throw Error(r(151));for(var xt=null,Ht=null,bt=P,Vt=P=0,Pt=null,Gt=G.next();bt!==null&&!Gt.done;Vt++,Gt=G.next()){bt.index>Vt?(Pt=bt,bt=null):Pt=bt.sibling;var nr=Q(F,bt,Gt.value,it);if(nr===null){bt===null&&(bt=Pt);break}e&&bt&&nr.alternate===null&&i(F,bt),P=p(nr,P,Vt),Ht===null?xt=nr:Ht.sibling=nr,Ht=nr,bt=Pt}if(Gt.done)return a(F,bt),Bt&&ii(F,Vt),xt;if(bt===null){for(;!Gt.done;Vt++,Gt=G.next())Gt=at(F,Gt.value,it),Gt!==null&&(P=p(Gt,P,Vt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt);return Bt&&ii(F,Vt),xt}for(bt=l(bt);!Gt.done;Vt++,Gt=G.next())Gt=Z(bt,F,Vt,Gt.value,it),Gt!==null&&(e&&Gt.alternate!==null&&bt.delete(Gt.key===null?Vt:Gt.key),P=p(Gt,P,Vt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt);return e&&bt.forEach(function(QS){return i(F,QS)}),Bt&&ii(F,Vt),xt}function ee(F,P,G,it){if(typeof G=="object"&&G!==null&&G.type===U&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case V:t:{for(var xt=G.key;P!==null;){if(P.key===xt){if(xt=G.type,xt===U){if(P.tag===7){a(F,P.sibling),it=d(P,G.props.children),it.return=F,F=it;break t}}else if(P.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===C&&Gr(xt)===P.type){a(F,P.sibling),it=d(P,G.props),cl(it,G),it.return=F,F=it;break t}a(F,P);break}else i(F,P);P=P.sibling}G.type===U?(it=Br(G.props.children,F.mode,it,G.key),it.return=F,F=it):(it=lc(G.type,G.key,G.props,null,F.mode,it),cl(it,G),it.return=F,F=it)}return _(F);case k:t:{for(xt=G.key;P!==null;){if(P.key===xt)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){a(F,P.sibling),it=d(P,G.children||[]),it.return=F,F=it;break t}else{a(F,P);break}else i(F,P);P=P.sibling}it=Fd(G,F.mode,it),it.return=F,F=it}return _(F);case C:return G=Gr(G),ee(F,P,G,it)}if(ut(G))return yt(F,P,G,it);if(E(G)){if(xt=E(G),typeof xt!="function")throw Error(r(150));return G=xt.call(G),wt(F,P,G,it)}if(typeof G.then=="function")return ee(F,P,pc(G),it);if(G.$$typeof===K)return ee(F,P,hc(F,G),it);gc(F,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(a(F,P.sibling),it=d(P,G),it.return=F,F=it):(a(F,P),it=zd(G,F.mode,it),it.return=F,F=it),_(F)):a(F,P)}return function(F,P,G,it){try{ul=0;var xt=ee(F,P,G,it);return za=null,xt}catch(bt){if(bt===Ba||bt===fc)throw bt;var Ht=Rn(29,bt,null,F.mode);return Ht.lanes=it,Ht.return=F,Ht}finally{}}}var Kr=Wy(!0),Jy=Wy(!1),Ui=!1;function tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function zi(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var d=l.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),l.pending=i,i=oc(e),Oy(e,null,a),i}return ac(e,l,i,a),oc(e)}function hl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Lo(e,a)}}function nf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?d=p=_:p=p.next=_,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var sf=!1;function dl(){if(sf){var e=Ua;if(e!==null)throw e}}function fl(e,i,a,l){sf=!1;var d=e.updateQueue;Ui=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var I=S,Y=I.next;I.next=null,_===null?p=Y:_.next=Y,_=I;var nt=e.alternate;nt!==null&&(nt=nt.updateQueue,S=nt.lastBaseUpdate,S!==_&&(S===null?nt.firstBaseUpdate=Y:S.next=Y,nt.lastBaseUpdate=I))}if(p!==null){var at=d.baseState;_=0,nt=Y=I=null,S=p;do{var Q=S.lane&-536870913,Z=Q!==S.lane;if(Z?(Ot&Q)===Q:(l&Q)===Q){Q!==0&&Q===La&&(sf=!0),nt!==null&&(nt=nt.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var yt=e,wt=S;Q=i;var ee=a;switch(wt.tag){case 1:if(yt=wt.payload,typeof yt=="function"){at=yt.call(ee,at,Q);break t}at=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=wt.payload,Q=typeof yt=="function"?yt.call(ee,at,Q):yt,Q==null)break t;at=x({},at,Q);break t;case 2:Ui=!0}}Q=S.callback,Q!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=d.callbacks,Z===null?d.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},nt===null?(Y=nt=Z,I=at):nt=nt.next=Z,_|=Q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Z=S,S=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);nt===null&&(I=at),d.baseState=I,d.firstBaseUpdate=Y,d.lastBaseUpdate=nt,p===null&&(d.shared.lanes=0),Yi|=_,e.lanes=_,e.memoizedState=at}}function t0(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function e0(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)t0(a[e],i)}var Fa=O(null),yc=O(0);function n0(e,i){e=pi,dt(yc,e),dt(Fa,i),pi=e|i.baseLanes}function rf(){dt(yc,pi),dt(Fa,Fa.current)}function af(){pi=yc.current,rt(Fa),rt(yc)}var jn=O(null),Yn=null;function Fi(e){var i=e.alternate;dt(_e,_e.current&1),dt(jn,e),Yn===null&&(i===null||Fa.current!==null||i.memoizedState!==null)&&(Yn=e)}function of(e){dt(_e,_e.current),dt(jn,e),Yn===null&&(Yn=e)}function s0(e){e.tag===22?(dt(_e,_e.current),dt(jn,e),Yn===null&&(Yn=e)):qi()}function qi(){dt(_e,_e.current),dt(jn,jn.current)}function Dn(e){rt(jn),Yn===e&&(Yn=null),rt(_e)}var _e=O(0);function vc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||fm(a)||mm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var oi=0,Dt=null,Jt=null,je=null,bc=!1,qa=!1,Qr=!1,xc=0,ml=0,Ha=null,LE=0;function pe(){throw Error(r(321))}function lf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Cn(e[a],i[a]))return!1;return!0}function uf(e,i,a,l,d,p){return oi=p,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?B0:Ef,Qr=!1,p=a(l,d),Qr=!1,qa&&(p=r0(i,a,l,d)),i0(e),p}function i0(e){B.H=yl;var i=Jt!==null&&Jt.next!==null;if(oi=0,je=Jt=Dt=null,bc=!1,ml=0,Ha=null,i)throw Error(r(300));e===null||De||(e=e.dependencies,e!==null&&cc(e)&&(De=!0))}function r0(e,i,a,l){Dt=e;var d=0;do{if(qa&&(Ha=null),ml=0,qa=!1,25<=d)throw Error(r(301));if(d+=1,je=Jt=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}B.H=z0,p=i(a,l)}while(qa);return p}function UE(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?pl(i):i,e=e.useState()[0],(Jt!==null?Jt.memoizedState:null)!==e&&(Dt.flags|=1024),i}function cf(){var e=xc!==0;return xc=0,e}function hf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function df(e){if(bc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}bc=!1}oi=0,je=Jt=Dt=null,qa=!1,ml=xc=0,Ha=null}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?Dt.memoizedState=je=e:je=je.next=e,je}function Te(){if(Jt===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var i=je===null?Dt.memoizedState:je.next;if(i!==null)je=i,Jt=e;else{if(e===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},je===null?Dt.memoizedState=je=e:je=je.next=e}return je}function _c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(e){var i=ml;return ml+=1,Ha===null&&(Ha=[]),e=Xy(Ha,e,i),i=Dt,(je===null?i.memoizedState:je.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?B0:Ef),e}function Tc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pl(e);if(e.$$typeof===K)return $e(e)}throw Error(r(438,String(e)))}function ff(e){var i=null,a=Dt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Dt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=_c(),Dt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=N;return i.index++,a}function li(e,i){return typeof i=="function"?i(e):i}function wc(e){var i=Te();return mf(i,Jt,e)}function mf(e,i,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=e.baseQueue,p=l.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}i.baseQueue=d=p,l.pending=null}if(p=e.baseState,d===null)e.memoizedState=p;else{i=d.next;var S=_=null,I=null,Y=i,nt=!1;do{var at=Y.lane&-536870913;if(at!==Y.lane?(Ot&at)===at:(oi&at)===at){var Q=Y.revertLane;if(Q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),at===La&&(nt=!0);else if((oi&Q)===Q){Y=Y.next,Q===La&&(nt=!0);continue}else at={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},I===null?(S=I=at,_=p):I=I.next=at,Dt.lanes|=Q,Yi|=Q;at=Y.action,Qr&&a(p,at),p=Y.hasEagerState?Y.eagerState:a(p,at)}else Q={lane:at,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},I===null?(S=I=Q,_=p):I=I.next=Q,Dt.lanes|=at,Yi|=at;Y=Y.next}while(Y!==null&&Y!==i);if(I===null?_=p:I.next=S,!Cn(p,e.memoizedState)&&(De=!0,nt&&(a=Ua,a!==null)))throw a;e.memoizedState=p,e.baseState=_,e.baseQueue=I,l.lastRenderedState=p}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function pf(e){var i=Te(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do p=e(p,_.action),_=_.next;while(_!==d);Cn(p,i.memoizedState)||(De=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,l]}function a0(e,i,a){var l=Dt,d=Te(),p=Bt;if(p){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Cn((Jt||d).memoizedState,a);if(_&&(d.memoizedState=a,De=!0),d=d.queue,vf(u0.bind(null,l,d,e),[e]),d.getSnapshot!==i||_||je!==null&&je.memoizedState.tag&1){if(l.flags|=2048,Ga(9,{destroy:void 0},l0.bind(null,l,d,a,i),null),se===null)throw Error(r(349));p||(oi&127)!==0||o0(l,i,a)}return a}function o0(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Dt.updateQueue,i===null?(i=_c(),Dt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function l0(e,i,a,l){i.value=a,i.getSnapshot=l,c0(i)&&h0(e)}function u0(e,i,a){return a(function(){c0(i)&&h0(e)})}function c0(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Cn(e,a)}catch{return!0}}function h0(e){var i=Ur(e,2);i!==null&&bn(i,e,2)}function gf(e){var i=hn();if(typeof e=="function"){var a=e;if(e=a(),Qr){On(!0);try{a()}finally{On(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},i}function d0(e,i,a,l){return e.baseState=a,mf(e,Jt,typeof l=="function"?l:li)}function BE(e,i,a,l,d){if(Ac(e))throw Error(r(485));if(e=i.action,e!==null){var p={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){p.listeners.push(_)}};B.T!==null?a(!0):p.isTransition=!1,l(p),a=i.pending,a===null?(p.next=i.pending=p,f0(i,p)):(p.next=a.next,i.pending=a.next=p)}}function f0(e,i){var a=i.action,l=i.payload,d=e.state;if(i.isTransition){var p=B.T,_={};B.T=_;try{var S=a(d,l),I=B.S;I!==null&&I(_,S),m0(e,i,S)}catch(Y){yf(e,i,Y)}finally{p!==null&&_.types!==null&&(p.types=_.types),B.T=p}}else try{p=a(d,l),m0(e,i,p)}catch(Y){yf(e,i,Y)}}function m0(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){p0(e,i,l)},function(l){return yf(e,i,l)}):p0(e,i,a)}function p0(e,i,a){i.status="fulfilled",i.value=a,g0(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,f0(e,a)))}function yf(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,g0(i),i=i.next;while(i!==l)}e.action=null}function g0(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function y0(e,i){return i}function v0(e,i){if(Bt){var a=se.formState;if(a!==null){t:{var l=Dt;if(Bt){if(re){e:{for(var d=re,p=Gn;d.nodeType!==8;){if(!p){d=null;break e}if(d=Kn(d.nextSibling),d===null){d=null;break e}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){re=Kn(d.nextSibling),l=d.data==="F!";break t}}Pi(l)}l=!1}l&&(i=a[0])}}return a=hn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y0,lastRenderedState:i},a.queue=l,a=P0.bind(null,Dt,l),l.dispatch=a,l=gf(!1),p=wf.bind(null,Dt,!1,l.queue),l=hn(),d={state:i,dispatch:null,action:e,pending:null},l.queue=d,a=BE.bind(null,Dt,d,p,a),d.dispatch=a,l.memoizedState=e,[i,a,!1]}function b0(e){var i=Te();return x0(i,Jt,e)}function x0(e,i,a){if(i=mf(e,i,y0)[0],e=wc(li)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=pl(i)}catch(_){throw _===Ba?fc:_}else l=i;i=Te();var d=i.queue,p=d.dispatch;return a!==i.memoizedState&&(Dt.flags|=2048,Ga(9,{destroy:void 0},zE.bind(null,d,a),null)),[l,p,e]}function zE(e,i){e.action=i}function _0(e){var i=Te(),a=Jt;if(a!==null)return x0(i,a,e);Te(),i=i.memoizedState,a=Te();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Ga(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=_c(),Dt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function T0(){return Te().memoizedState}function Ec(e,i,a,l){var d=hn();Dt.flags|=e,d.memoizedState=Ga(1|i,{destroy:void 0},a,l===void 0?null:l)}function Sc(e,i,a,l){var d=Te();l=l===void 0?null:l;var p=d.memoizedState.inst;Jt!==null&&l!==null&&lf(l,Jt.memoizedState.deps)?d.memoizedState=Ga(i,p,a,l):(Dt.flags|=e,d.memoizedState=Ga(1|i,p,a,l))}function w0(e,i){Ec(8390656,8,e,i)}function vf(e,i){Sc(2048,8,e,i)}function FE(e){Dt.flags|=4;var i=Dt.updateQueue;if(i===null)i=_c(),Dt.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function E0(e){var i=Te().memoizedState;return FE({ref:i,nextImpl:e}),function(){if((Kt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function S0(e,i){return Sc(4,2,e,i)}function A0(e,i){return Sc(4,4,e,i)}function N0(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function C0(e,i,a){a=a!=null?a.concat([e]):null,Sc(4,4,N0.bind(null,i,e),a)}function bf(){}function R0(e,i){var a=Te();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&lf(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function j0(e,i){var a=Te();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&lf(i,l[1]))return l[0];if(l=e(),Qr){On(!0);try{e()}finally{On(!1)}}return a.memoizedState=[l,i],l}function xf(e,i,a){return a===void 0||(oi&1073741824)!==0&&(Ot&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=Dv(),Dt.lanes|=e,Yi|=e,a)}function D0(e,i,a,l){return Cn(a,i)?a:Fa.current!==null?(e=xf(e,a,l),Cn(e,i)||(De=!0),e):(oi&42)===0||(oi&1073741824)!==0&&(Ot&261930)===0?(De=!0,e.memoizedState=a):(e=Dv(),Dt.lanes|=e,Yi|=e,i)}function V0(e,i,a,l,d){var p=X.p;X.p=p!==0&&8>p?p:8;var _=B.T,S={};B.T=S,wf(e,!1,i,a);try{var I=d(),Y=B.S;if(Y!==null&&Y(S,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var nt=PE(I,l);gl(e,i,nt,In(e))}else gl(e,i,l,In(e))}catch(at){gl(e,i,{then:function(){},status:"rejected",reason:at},In())}finally{X.p=p,_!==null&&S.types!==null&&(_.types=S.types),B.T=_}}function qE(){}function _f(e,i,a,l){if(e.tag!==5)throw Error(r(476));var d=M0(e).queue;V0(e,d,i,ct,a===null?qE:function(){return I0(e),a(l)})}function M0(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:ct},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function I0(e){var i=M0(e);i.next===null&&(i=e.alternate.memoizedState),gl(e,i.next.queue,{},In())}function Tf(){return $e(Ml)}function k0(){return Te().memoizedState}function O0(){return Te().memoizedState}function HE(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=In();e=Bi(a);var l=zi(i,e,a);l!==null&&(bn(l,i,a),hl(l,i,a)),i={cache:$d()},e.payload=i;return}i=i.return}}function GE(e,i,a){var l=In();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ac(e)?L0(i,a):(a=Ud(e,i,a,l),a!==null&&(bn(a,e,l),U0(a,i,l)))}function P0(e,i,a){var l=In();gl(e,i,a,l)}function gl(e,i,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ac(e))L0(i,d);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var _=i.lastRenderedState,S=p(_,a);if(d.hasEagerState=!0,d.eagerState=S,Cn(S,_))return ac(e,i,d,0),se===null&&rc(),!1}catch{}finally{}if(a=Ud(e,i,d,l),a!==null)return bn(a,e,l),U0(a,i,l),!0}return!1}function wf(e,i,a,l){if(l={lane:2,revertLane:em(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ac(e)){if(i)throw Error(r(479))}else i=Ud(e,a,l,2),i!==null&&bn(i,e,2)}function Ac(e){var i=e.alternate;return e===Dt||i!==null&&i===Dt}function L0(e,i){qa=bc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function U0(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Lo(e,a)}}var yl={readContext:$e,use:Tc,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe,useHostTransitionStatus:pe,useFormState:pe,useActionState:pe,useOptimistic:pe,useMemoCache:pe,useCacheRefresh:pe};yl.useEffectEvent=pe;var B0={readContext:$e,use:Tc,useCallback:function(e,i){return hn().memoizedState=[e,i===void 0?null:i],e},useContext:$e,useEffect:w0,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Ec(4194308,4,N0.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Ec(4194308,4,e,i)},useInsertionEffect:function(e,i){Ec(4,2,e,i)},useMemo:function(e,i){var a=hn();i=i===void 0?null:i;var l=e();if(Qr){On(!0);try{e()}finally{On(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=hn();if(a!==void 0){var d=a(i);if(Qr){On(!0);try{a(i)}finally{On(!1)}}}else d=i;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=GE.bind(null,Dt,e),[l.memoizedState,e]},useRef:function(e){var i=hn();return e={current:e},i.memoizedState=e},useState:function(e){e=gf(e);var i=e.queue,a=P0.bind(null,Dt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:bf,useDeferredValue:function(e,i){var a=hn();return xf(a,e,i)},useTransition:function(){var e=gf(!1);return e=V0.bind(null,Dt,e.queue,!0,!1),hn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=Dt,d=hn();if(Bt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),se===null)throw Error(r(349));(Ot&127)!==0||o0(l,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,w0(u0.bind(null,l,p,e),[e]),l.flags|=2048,Ga(9,{destroy:void 0},l0.bind(null,l,p,a,i),null),a},useId:function(){var e=hn(),i=se.identifierPrefix;if(Bt){var a=ks,l=Is;a=(l&~(1<<32-be(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=xc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=LE++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Tf,useFormState:v0,useActionState:v0,useOptimistic:function(e){var i=hn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=wf.bind(null,Dt,!0,a),a.dispatch=i,[e,i]},useMemoCache:ff,useCacheRefresh:function(){return hn().memoizedState=HE.bind(null,Dt)},useEffectEvent:function(e){var i=hn(),a={impl:e};return i.memoizedState=a,function(){if((Kt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Ef={readContext:$e,use:Tc,useCallback:R0,useContext:$e,useEffect:vf,useImperativeHandle:C0,useInsertionEffect:S0,useLayoutEffect:A0,useMemo:j0,useReducer:wc,useRef:T0,useState:function(){return wc(li)},useDebugValue:bf,useDeferredValue:function(e,i){var a=Te();return D0(a,Jt.memoizedState,e,i)},useTransition:function(){var e=wc(li)[0],i=Te().memoizedState;return[typeof e=="boolean"?e:pl(e),i]},useSyncExternalStore:a0,useId:k0,useHostTransitionStatus:Tf,useFormState:b0,useActionState:b0,useOptimistic:function(e,i){var a=Te();return d0(a,Jt,e,i)},useMemoCache:ff,useCacheRefresh:O0};Ef.useEffectEvent=E0;var z0={readContext:$e,use:Tc,useCallback:R0,useContext:$e,useEffect:vf,useImperativeHandle:C0,useInsertionEffect:S0,useLayoutEffect:A0,useMemo:j0,useReducer:pf,useRef:T0,useState:function(){return pf(li)},useDebugValue:bf,useDeferredValue:function(e,i){var a=Te();return Jt===null?xf(a,e,i):D0(a,Jt.memoizedState,e,i)},useTransition:function(){var e=pf(li)[0],i=Te().memoizedState;return[typeof e=="boolean"?e:pl(e),i]},useSyncExternalStore:a0,useId:k0,useHostTransitionStatus:Tf,useFormState:_0,useActionState:_0,useOptimistic:function(e,i){var a=Te();return Jt!==null?d0(a,Jt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ff,useCacheRefresh:O0};z0.useEffectEvent=E0;function Sf(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:x({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Af={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=In(),d=Bi(l);d.payload=i,a!=null&&(d.callback=a),i=zi(e,d,l),i!==null&&(bn(i,e,l),hl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=In(),d=Bi(l);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=zi(e,d,l),i!==null&&(bn(i,e,l),hl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=In(),l=Bi(a);l.tag=2,i!=null&&(l.callback=i),i=zi(e,l,a),i!==null&&(bn(i,e,a),hl(i,e,a))}};function F0(e,i,a,l,d,p,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,_):i.prototype&&i.prototype.isPureReactComponent?!sl(a,l)||!sl(d,p):!0}function q0(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Af.enqueueReplaceState(i,i.state,null)}function Xr(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=x({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function H0(e){ic(e)}function G0(e){console.error(e)}function Y0(e){ic(e)}function Nc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function K0(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Nf(e,i,a){return a=Bi(a),a.tag=3,a.payload={element:null},a.callback=function(){Nc(e,i)},a}function Q0(e){return e=Bi(e),e.tag=3,e}function X0(e,i,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var p=l.value;e.payload=function(){return d(p)},e.callback=function(){K0(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){K0(i,a,l),typeof d!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function YE(e,i,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Pa(i,a,d,!0),a=jn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?Uc():a.alternate===null&&ge===0&&(ge=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Wf(e,l,d)),!1;case 22:return a.flags|=65536,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Wf(e,l,d)),!1}throw Error(r(435,a.tag))}return Wf(e,l,d),Uc(),!1}if(Bt)return i=jn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,l!==Gd&&(e=Error(r(422),{cause:l}),al(Fn(e,a)))):(l!==Gd&&(i=Error(r(423),{cause:l}),al(Fn(i,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Fn(l,a),d=Nf(e.stateNode,l,d),nf(e,d),ge!==4&&(ge=2)),!1;var p=Error(r(520),{cause:l});if(p=Fn(p,a),Sl===null?Sl=[p]:Sl.push(p),ge!==4&&(ge=2),i===null)return!0;l=Fn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Nf(a.stateNode,l,e),nf(a,e),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ki===null||!Ki.has(p))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Q0(d),X0(d,e,a,l),nf(a,d),!1}a=a.return}while(a!==null);return!1}var Cf=Error(r(461)),De=!1;function Ze(e,i,a,l){i.child=e===null?Jy(i,null,a,l):Kr(i,e.child,a,l)}function $0(e,i,a,l,d){a=a.render;var p=i.ref;if("ref"in l){var _={};for(var S in l)S!=="ref"&&(_[S]=l[S])}else _=l;return qr(i),l=uf(e,i,a,_,p,d),S=cf(),e!==null&&!De?(hf(e,i,d),ui(e,i,d)):(Bt&&S&&qd(i),i.flags|=1,Ze(e,i,l,d),i.child)}function Z0(e,i,a,l,d){if(e===null){var p=a.type;return typeof p=="function"&&!Bd(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,W0(e,i,p,l,d)):(e=lc(a.type,null,l,i,i.mode,d),e.ref=i.ref,e.return=i,i.child=e)}if(p=e.child,!Of(e,d)){var _=p.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(_,l)&&e.ref===i.ref)return ui(e,i,d)}return i.flags|=1,e=si(p,l),e.ref=i.ref,e.return=i,i.child=e}function W0(e,i,a,l,d){if(e!==null){var p=e.memoizedProps;if(sl(p,l)&&e.ref===i.ref)if(De=!1,i.pendingProps=l=p,Of(e,d))(e.flags&131072)!==0&&(De=!0);else return i.lanes=e.lanes,ui(e,i,d)}return Rf(e,i,a,l,d)}function J0(e,i,a,l){var d=l.children,p=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(l=i.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~p}else l=0,i.child=null;return tv(e,i,p,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&dc(i,p!==null?p.cachePool:null),p!==null?n0(i,p):rf(),s0(i);else return l=i.lanes=536870912,tv(e,i,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(dc(i,p.cachePool),n0(i,p),qi(),i.memoizedState=null):(e!==null&&dc(i,null),rf(),qi());return Ze(e,i,d,a),i.child}function vl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function tv(e,i,a,l,d){var p=Wd();return p=p===null?null:{parent:Re._currentValue,pool:p},i.memoizedState={baseLanes:a,cachePool:p},e!==null&&dc(i,null),rf(),s0(i),e!==null&&Pa(e,i,l,!0),i.childLanes=d,null}function Cc(e,i){return i=jc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function ev(e,i,a){return Kr(i,e.child,null,a),e=Cc(i,i.pendingProps),e.flags|=2,Dn(i),i.memoizedState=null,e}function KE(e,i,a){var l=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Bt){if(l.mode==="hidden")return e=Cc(i,l),i.lanes=536870912,vl(null,e);if(of(i),(e=re)?(e=fb(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ki!==null?{id:Is,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},a=Ly(e),a.return=i,i.child=a,Xe=i,re=null)):e=null,e===null)throw Pi(i);return i.lanes=536870912,null}return Cc(i,l)}var p=e.memoizedState;if(p!==null){var _=p.dehydrated;if(of(i),d)if(i.flags&256)i.flags&=-257,i=ev(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(De||Pa(e,i,a,!1),d=(a&e.childLanes)!==0,De||d){if(l=se,l!==null&&(_=Uo(l,a),_!==0&&_!==p.retryLane))throw p.retryLane=_,Ur(e,_),bn(l,e,_),Cf;Uc(),i=ev(e,i,a)}else e=p.treeContext,re=Kn(_.nextSibling),Xe=i,Bt=!0,Oi=null,Gn=!1,e!==null&&zy(i,e),i=Cc(i,l),i.flags|=4096;return i}return e=si(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Rc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Rf(e,i,a,l,d){return qr(i),a=uf(e,i,a,l,void 0,d),l=cf(),e!==null&&!De?(hf(e,i,d),ui(e,i,d)):(Bt&&l&&qd(i),i.flags|=1,Ze(e,i,a,d),i.child)}function nv(e,i,a,l,d,p){return qr(i),i.updateQueue=null,a=r0(i,l,a,d),i0(e),l=cf(),e!==null&&!De?(hf(e,i,p),ui(e,i,p)):(Bt&&l&&qd(i),i.flags|=1,Ze(e,i,a,p),i.child)}function sv(e,i,a,l,d){if(qr(i),i.stateNode===null){var p=Ma,_=a.contextType;typeof _=="object"&&_!==null&&(p=$e(_)),p=new a(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Af,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},tf(i),_=a.contextType,p.context=typeof _=="object"&&_!==null?$e(_):Ma,p.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Sf(i,a,_,l),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(_=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),_!==p.state&&Af.enqueueReplaceState(p,p.state,null),fl(i,l,p,d),dl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){p=i.stateNode;var S=i.memoizedProps,I=Xr(a,S);p.props=I;var Y=p.context,nt=a.contextType;_=Ma,typeof nt=="object"&&nt!==null&&(_=$e(nt));var at=a.getDerivedStateFromProps;nt=typeof at=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,nt||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||Y!==_)&&q0(i,p,l,_),Ui=!1;var Q=i.memoizedState;p.state=Q,fl(i,l,p,d),dl(),Y=i.memoizedState,S||Q!==Y||Ui?(typeof at=="function"&&(Sf(i,a,at,l),Y=i.memoizedState),(I=Ui||F0(i,a,I,l,Q,Y,_))?(nt||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=Y),p.props=l,p.state=Y,p.context=_,l=I):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,ef(e,i),_=i.memoizedProps,nt=Xr(a,_),p.props=nt,at=i.pendingProps,Q=p.context,Y=a.contextType,I=Ma,typeof Y=="object"&&Y!==null&&(I=$e(Y)),S=a.getDerivedStateFromProps,(Y=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==at||Q!==I)&&q0(i,p,l,I),Ui=!1,Q=i.memoizedState,p.state=Q,fl(i,l,p,d),dl();var Z=i.memoizedState;_!==at||Q!==Z||Ui||e!==null&&e.dependencies!==null&&cc(e.dependencies)?(typeof S=="function"&&(Sf(i,a,S,l),Z=i.memoizedState),(nt=Ui||F0(i,a,nt,l,Q,Z,I)||e!==null&&e.dependencies!==null&&cc(e.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,Z,I),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,Z,I)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||_===e.memoizedProps&&Q===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&Q===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Z),p.props=l,p.state=Z,p.context=I,l=nt):(typeof p.componentDidUpdate!="function"||_===e.memoizedProps&&Q===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&Q===e.memoizedState||(i.flags|=1024),l=!1)}return p=l,Rc(e,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,e!==null&&l?(i.child=Kr(i,e.child,null,d),i.child=Kr(i,null,a,d)):Ze(e,i,a,d),i.memoizedState=p.state,e=i.child):e=ui(e,i,d),e}function iv(e,i,a,l){return zr(),i.flags|=256,Ze(e,i,a,l),i.child}var jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Df(e){return{baseLanes:e,cachePool:Ky()}}function Vf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Mn),e}function rv(e,i,a){var l=i.pendingProps,d=!1,p=(i.flags&128)!==0,_;if((_=p)||(_=e!==null&&e.memoizedState===null?!1:(_e.current&2)!==0),_&&(d=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(Bt){if(d?Fi(i):qi(),(e=re)?(e=fb(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ki!==null?{id:Is,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},a=Ly(e),a.return=i,i.child=a,Xe=i,re=null)):e=null,e===null)throw Pi(i);return mm(e)?i.lanes=32:i.lanes=536870912,null}var S=l.children;return l=l.fallback,d?(qi(),d=i.mode,S=jc({mode:"hidden",children:S},d),l=Br(l,d,a,null),S.return=i,l.return=i,S.sibling=l,i.child=S,l=i.child,l.memoizedState=Df(a),l.childLanes=Vf(e,_,a),i.memoizedState=jf,vl(null,l)):(Fi(i),Mf(i,S))}var I=e.memoizedState;if(I!==null&&(S=I.dehydrated,S!==null)){if(p)i.flags&256?(Fi(i),i.flags&=-257,i=If(e,i,a)):i.memoizedState!==null?(qi(),i.child=e.child,i.flags|=128,i=null):(qi(),S=l.fallback,d=i.mode,l=jc({mode:"visible",children:l.children},d),S=Br(S,d,a,null),S.flags|=2,l.return=i,S.return=i,l.sibling=S,i.child=l,Kr(i,e.child,null,a),l=i.child,l.memoizedState=Df(a),l.childLanes=Vf(e,_,a),i.memoizedState=jf,i=vl(null,l));else if(Fi(i),mm(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var Y=_.dgst;_=Y,l=Error(r(419)),l.stack="",l.digest=_,al({value:l,source:null,stack:null}),i=If(e,i,a)}else if(De||Pa(e,i,a,!1),_=(a&e.childLanes)!==0,De||_){if(_=se,_!==null&&(l=Uo(_,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,Ur(e,l),bn(_,e,l),Cf;fm(S)||Uc(),i=If(e,i,a)}else fm(S)?(i.flags|=192,i.child=e.child,i=null):(e=I.treeContext,re=Kn(S.nextSibling),Xe=i,Bt=!0,Oi=null,Gn=!1,e!==null&&zy(i,e),i=Mf(i,l.children),i.flags|=4096);return i}return d?(qi(),S=l.fallback,d=i.mode,I=e.child,Y=I.sibling,l=si(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,Y!==null?S=si(Y,S):(S=Br(S,d,a,null),S.flags|=2),S.return=i,l.return=i,l.sibling=S,i.child=l,vl(null,l),l=i.child,S=e.child.memoizedState,S===null?S=Df(a):(d=S.cachePool,d!==null?(I=Re._currentValue,d=d.parent!==I?{parent:I,pool:I}:d):d=Ky(),S={baseLanes:S.baseLanes|a,cachePool:d}),l.memoizedState=S,l.childLanes=Vf(e,_,a),i.memoizedState=jf,vl(e.child,l)):(Fi(i),a=e.child,e=a.sibling,a=si(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Mf(e,i){return i=jc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function jc(e,i){return e=Rn(22,e,null,i),e.lanes=0,e}function If(e,i,a){return Kr(i,e.child,null,a),e=Mf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function av(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Qd(e.return,i,a)}function kf(e,i,a,l,d,p){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:p}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=p)}function ov(e,i,a){var l=i.pendingProps,d=l.revealOrder,p=l.tail;l=l.children;var _=_e.current,S=(_&2)!==0;if(S?(_=_&1|2,i.flags|=128):_&=1,dt(_e,_),Ze(e,i,l,a),l=Bt?rl:0,!S&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&av(e,a,i);else if(e.tag===19)av(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=i.child,d=null;a!==null;)e=a.alternate,e!==null&&vc(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),kf(i,!1,d,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(e=d.alternate,e!==null&&vc(e)===null){i.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}kf(i,!0,a,null,p,l);break;case"together":kf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ui(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Yi|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Pa(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=si(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=si(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Of(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&cc(e)))}function QE(e,i,a){switch(i.tag){case 3:Pe(i,i.stateNode.containerInfo),Li(i,Re,e.memoizedState.cache),zr();break;case 27:case 5:_r(i);break;case 4:Pe(i,i.stateNode.containerInfo);break;case 10:Li(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,of(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Fi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?rv(e,i,a):(Fi(i),e=ui(e,i,a),e!==null?e.sibling:null);Fi(i);break;case 19:var d=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Pa(e,i,a,!1),l=(a&i.childLanes)!==0),d){if(l)return ov(e,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),dt(_e,_e.current),l)break;return null;case 22:return i.lanes=0,J0(e,i,a,i.pendingProps);case 24:Li(i,Re,e.memoizedState.cache)}return ui(e,i,a)}function lv(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)De=!0;else{if(!Of(e,a)&&(i.flags&128)===0)return De=!1,QE(e,i,a);De=(e.flags&131072)!==0}else De=!1,Bt&&(i.flags&1048576)!==0&&By(i,rl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=Gr(i.elementType),i.type=e,typeof e=="function")Bd(e)?(l=Xr(e,l),i.tag=1,i=sv(null,i,e,l,a)):(i.tag=0,i=Rf(null,i,e,l,a));else{if(e!=null){var d=e.$$typeof;if(d===tt){i.tag=11,i=$0(null,i,e,l,a);break t}else if(d===j){i.tag=14,i=Z0(null,i,e,l,a);break t}}throw i=st(e)||e,Error(r(306,i,""))}}return i;case 0:return Rf(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,d=Xr(l,i.pendingProps),sv(e,i,l,d,a);case 3:t:{if(Pe(i,i.stateNode.containerInfo),e===null)throw Error(r(387));l=i.pendingProps;var p=i.memoizedState;d=p.element,ef(e,i),fl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Li(i,Re,l),l!==p.cache&&Xd(i,[Re],a,!0),dl(),l=_.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=iv(e,i,l,a);break t}else if(l!==d){d=Fn(Error(r(424)),i),al(d),i=iv(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(re=Kn(e.firstChild),Xe=i,Bt=!0,Oi=null,Gn=!0,a=Jy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zr(),l===d){i=ui(e,i,a);break t}Ze(e,i,l,a)}i=i.child}return i;case 26:return Rc(e,i),e===null?(a=bb(i.type,null,i.pendingProps,null))?i.memoizedState=a:Bt||(a=i.type,e=i.pendingProps,l=Yc(At.current).createElement(a),l[Ae]=i,l[Fe]=e,We(l,a,e),Ne(l),i.stateNode=l):i.memoizedState=bb(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return _r(i),e===null&&Bt&&(l=i.stateNode=gb(i.type,i.pendingProps,At.current),Xe=i,Gn=!0,d=re,Zi(i.type)?(pm=d,re=Kn(l.firstChild)):re=d),Ze(e,i,i.pendingProps.children,a),Rc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Bt&&((d=l=re)&&(l=ES(l,i.type,i.pendingProps,Gn),l!==null?(i.stateNode=l,Xe=i,re=Kn(l.firstChild),Gn=!1,d=!0):d=!1),d||Pi(i)),_r(i),d=i.type,p=i.pendingProps,_=e!==null?e.memoizedProps:null,l=p.children,cm(d,p)?l=null:_!==null&&cm(d,_)&&(i.flags|=32),i.memoizedState!==null&&(d=uf(e,i,UE,null,null,a),Ml._currentValue=d),Rc(e,i),Ze(e,i,l,a),i.child;case 6:return e===null&&Bt&&((e=a=re)&&(a=SS(a,i.pendingProps,Gn),a!==null?(i.stateNode=a,Xe=i,re=null,e=!0):e=!1),e||Pi(i)),null;case 13:return rv(e,i,a);case 4:return Pe(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Kr(i,null,l,a):Ze(e,i,l,a),i.child;case 11:return $0(e,i,i.type,i.pendingProps,a);case 7:return Ze(e,i,i.pendingProps,a),i.child;case 8:return Ze(e,i,i.pendingProps.children,a),i.child;case 12:return Ze(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Li(i,i.type,l.value),Ze(e,i,l.children,a),i.child;case 9:return d=i.type._context,l=i.pendingProps.children,qr(i),d=$e(d),l=l(d),i.flags|=1,Ze(e,i,l,a),i.child;case 14:return Z0(e,i,i.type,i.pendingProps,a);case 15:return W0(e,i,i.type,i.pendingProps,a);case 19:return ov(e,i,a);case 31:return KE(e,i,a);case 22:return J0(e,i,a,i.pendingProps);case 24:return qr(i),l=$e(Re),e===null?(d=Wd(),d===null&&(d=se,p=$d(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=a),d=p),i.memoizedState={parent:l,cache:d},tf(i),Li(i,Re,d)):((e.lanes&a)!==0&&(ef(e,i),fl(i,null,null,a),dl()),d=e.memoizedState,p=i.memoizedState,d.parent!==l?(d={parent:l,cache:l},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Li(i,Re,l)):(l=p.cache,Li(i,Re,l),l!==d.cache&&Xd(i,[Re],a,!0))),Ze(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ci(e){e.flags|=4}function Pf(e,i,a,l,d){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(kv())e.flags|=8192;else throw Yr=mc,Jd}else e.flags&=-16777217}function uv(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Eb(i))if(kv())e.flags|=8192;else throw Yr=mc,Jd}function Dc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Pu():536870912,e.lanes|=i,Xa|=i)}function bl(e,i){if(!Bt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ae(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function XE(e,i,a){var l=i.pendingProps;switch(Hd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ae(i),null;case 1:return ae(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ai(Re),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Oa(i)?ci(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yd())),ae(i),null;case 26:var d=i.type,p=i.memoizedState;return e===null?(ci(i),p!==null?(ae(i),uv(i,p)):(ae(i),Pf(i,d,null,l,a))):p?p!==e.memoizedState?(ci(i),ae(i),uv(i,p)):(ae(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&ci(i),ae(i),Pf(i,d,e,l,a)),null;case 27:if(ma(i),a=At.current,d=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ci(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ae(i),null}e=mt.current,Oa(i)?Fy(i):(e=gb(d,l,a),i.stateNode=e,ci(i))}return ae(i),null;case 5:if(ma(i),d=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ci(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ae(i),null}if(p=mt.current,Oa(i))Fy(i);else{var _=Yc(At.current);switch(p){case 1:p=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=_.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}p[Ae]=i,p[Fe]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=p;t:switch(We(p,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&ci(i)}}return ae(i),Pf(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&ci(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(e=At.current,Oa(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,d=Xe,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Ae]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||rb(e.nodeValue,a)),e||Pi(i,!0)}else e=Yc(e).createTextNode(l),e[Ae]=i,i.stateNode=e}return ae(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=Oa(i),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Ae]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ae(i),e=!1}else a=Yd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(Dn(i),i):(Dn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ae(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Oa(i),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Ae]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ae(i),d=!1}else d=Yd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(Dn(i),i):(Dn(i),null)}return Dn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Dc(i,i.updateQueue),ae(i),null);case 4:return ue(),e===null&&rm(i.stateNode.containerInfo),ae(i),null;case 10:return ai(i.type),ae(i),null;case 19:if(rt(_e),l=i.memoizedState,l===null)return ae(i),null;if(d=(i.flags&128)!==0,p=l.rendering,p===null)if(d)bl(l,!1);else{if(ge!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(p=vc(e),p!==null){for(i.flags|=128,bl(l,!1),e=p.updateQueue,i.updateQueue=e,Dc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Py(a,e),a=a.sibling;return dt(_e,_e.current&1|2),Bt&&ii(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&un()>Oc&&(i.flags|=128,d=!0,bl(l,!1),i.lanes=4194304)}else{if(!d)if(e=vc(p),e!==null){if(i.flags|=128,d=!0,e=e.updateQueue,i.updateQueue=e,Dc(i,e),bl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Bt)return ae(i),null}else 2*un()-l.renderingStartTime>Oc&&a!==536870912&&(i.flags|=128,d=!0,bl(l,!1),i.lanes=4194304);l.isBackwards?(p.sibling=i.child,i.child=p):(e=l.last,e!==null?e.sibling=p:i.child=p,l.last=p)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=un(),e.sibling=null,a=_e.current,dt(_e,d?a&1|2:a&1),Bt&&ii(i,l.treeForkCount),e):(ae(i),null);case 22:case 23:return Dn(i),af(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ae(i),i.subtreeFlags&6&&(i.flags|=8192)):ae(i),a=i.updateQueue,a!==null&&Dc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&rt(Hr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ai(Re),ae(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function $E(e,i){switch(Hd(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ai(Re),ue(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return ma(i),null;case 31:if(i.memoizedState!==null){if(Dn(i),i.alternate===null)throw Error(r(340));zr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Dn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));zr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return rt(_e),null;case 4:return ue(),null;case 10:return ai(i.type),null;case 22:case 23:return Dn(i),af(),e!==null&&rt(Hr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ai(Re),null;case 25:return null;default:return null}}function cv(e,i){switch(Hd(i),i.tag){case 3:ai(Re),ue();break;case 26:case 27:case 5:ma(i);break;case 4:ue();break;case 31:i.memoizedState!==null&&Dn(i);break;case 13:Dn(i);break;case 19:rt(_e);break;case 10:ai(i.type);break;case 22:case 23:Dn(i),af(),e!==null&&rt(Hr);break;case 24:ai(Re)}}function xl(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var p=a.create,_=a.inst;l=p(),_.destroy=l}a=a.next}while(a!==d)}}catch(S){Zt(i,i.return,S)}}function Hi(e,i,a){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&e)===e){var _=l.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,d=i;var I=a,Y=S;try{Y()}catch(nt){Zt(d,I,nt)}}}l=l.next}while(l!==p)}}catch(nt){Zt(i,i.return,nt)}}function hv(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{e0(i,a)}catch(l){Zt(e,e.return,l)}}}function dv(e,i,a){a.props=Xr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Zt(e,i,l)}}function _l(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){Zt(e,i,d)}}function Os(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Zt(e,i,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Zt(e,i,d)}else a.current=null}function fv(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Zt(e,e.return,d)}}function Lf(e,i,a){try{var l=e.stateNode;vS(l,e.type,a,i),l[Fe]=i}catch(d){Zt(e,e.return,d)}}function mv(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Zi(e.type)||e.tag===4}function Uf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||mv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Zi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bf(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ss));else if(l!==4&&(l===27&&Zi(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Bf(e,i,a),e=e.sibling;e!==null;)Bf(e,i,a),e=e.sibling}function Vc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Zi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Vc(e,i,a),e=e.sibling;e!==null;)Vc(e,i,a),e=e.sibling}function pv(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);We(i,l,a),i[Ae]=e,i[Fe]=a}catch(p){Zt(e,e.return,p)}}var hi=!1,Ve=!1,zf=!1,gv=typeof WeakSet=="function"?WeakSet:Set,He=null;function ZE(e,i){if(e=e.containerInfo,lm=Jc,e=Cy(e),Md(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var _=0,S=-1,I=-1,Y=0,nt=0,at=e,Q=null;e:for(;;){for(var Z;at!==a||d!==0&&at.nodeType!==3||(S=_+d),at!==p||l!==0&&at.nodeType!==3||(I=_+l),at.nodeType===3&&(_+=at.nodeValue.length),(Z=at.firstChild)!==null;)Q=at,at=Z;for(;;){if(at===e)break e;if(Q===a&&++Y===d&&(S=_),Q===p&&++nt===l&&(I=_),(Z=at.nextSibling)!==null)break;at=Q,Q=at.parentNode}at=Z}a=S===-1||I===-1?null:{start:S,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(um={focusedElem:e,selectionRange:a},Jc=!1,He=i;He!==null;)if(i=He,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,He=e;else for(;He!==null;){switch(i=He,p=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=i,d=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var yt=Xr(a.type,d);e=l.getSnapshotBeforeUpdate(yt,p),l.__reactInternalSnapshotBeforeUpdate=e}catch(wt){Zt(a,a.return,wt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)dm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":dm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,He=e;break}He=i.return}}function yv(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:fi(e,a),l&4&&xl(5,a);break;case 1:if(fi(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){Zt(a,a.return,_)}else{var d=Xr(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(d,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Zt(a,a.return,_)}}l&64&&hv(a),l&512&&_l(a,a.return);break;case 3:if(fi(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{e0(e,i)}catch(_){Zt(a,a.return,_)}}break;case 27:i===null&&l&4&&pv(a);case 26:case 5:fi(e,a),i===null&&l&4&&fv(a),l&512&&_l(a,a.return);break;case 12:fi(e,a);break;case 31:fi(e,a),l&4&&xv(e,a);break;case 13:fi(e,a),l&4&&_v(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=aS.bind(null,a),AS(e,a))));break;case 22:if(l=a.memoizedState!==null||hi,!l){i=i!==null&&i.memoizedState!==null||Ve,d=hi;var p=Ve;hi=l,(Ve=i)&&!p?mi(e,a,(a.subtreeFlags&8772)!==0):fi(e,a),hi=d,Ve=p}break;case 30:break;default:fi(e,a)}}function vv(e){var i=e.alternate;i!==null&&(e.alternate=null,vv(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ba(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var he=null,pn=!1;function di(e,i,a){for(a=a.child;a!==null;)bv(e,i,a),a=a.sibling}function bv(e,i,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Jn,a)}catch{}switch(a.tag){case 26:Ve||Os(a,i),di(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ve||Os(a,i);var l=he,d=pn;Zi(a.type)&&(he=a.stateNode,pn=!1),di(e,i,a),jl(a.stateNode),he=l,pn=d;break;case 5:Ve||Os(a,i);case 6:if(l=he,d=pn,he=null,di(e,i,a),he=l,pn=d,he!==null)if(pn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(a.stateNode)}catch(p){Zt(a,i,p)}else try{he.removeChild(a.stateNode)}catch(p){Zt(a,i,p)}break;case 18:he!==null&&(pn?(e=he,hb(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),so(e)):hb(he,a.stateNode));break;case 4:l=he,d=pn,he=a.stateNode.containerInfo,pn=!0,di(e,i,a),he=l,pn=d;break;case 0:case 11:case 14:case 15:Hi(2,a,i),Ve||Hi(4,a,i),di(e,i,a);break;case 1:Ve||(Os(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&dv(a,i,l)),di(e,i,a);break;case 21:di(e,i,a);break;case 22:Ve=(l=Ve)||a.memoizedState!==null,di(e,i,a),Ve=l;break;default:di(e,i,a)}}function xv(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{so(e)}catch(a){Zt(i,i.return,a)}}}function _v(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{so(e)}catch(a){Zt(i,i.return,a)}}function WE(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new gv),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new gv),i;default:throw Error(r(435,e.tag))}}function Mc(e,i){var a=WE(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var d=oS.bind(null,e,l);l.then(d,d)}})}function gn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],p=e,_=i,S=_;t:for(;S!==null;){switch(S.tag){case 27:if(Zi(S.type)){he=S.stateNode,pn=!1;break t}break;case 5:he=S.stateNode,pn=!1;break t;case 3:case 4:he=S.stateNode.containerInfo,pn=!0;break t}S=S.return}if(he===null)throw Error(r(160));bv(p,_,d),he=null,pn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Tv(i,e),i=i.sibling}var us=null;function Tv(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(i,e),yn(e),l&4&&(Hi(3,e,e.return),xl(3,e),Hi(5,e,e.return));break;case 1:gn(i,e),yn(e),l&512&&(Ve||a===null||Os(a,a.return)),l&64&&hi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=us;if(gn(i,e),yn(e),l&512&&(Ve||a===null||Os(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;e:switch(l){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Ts]||p[Ae]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(l),d.head.insertBefore(p,d.querySelector("head > title"))),We(p,l,a),p[Ae]=e,Ne(p),l=p;break t;case"link":var _=Tb("link","href",d).get(l+(a.href||""));if(_){for(var S=0;S<_.length;S++)if(p=_[S],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(S,1);break e}}p=d.createElement(l),We(p,l,a),d.head.appendChild(p);break;case"meta":if(_=Tb("meta","content",d).get(l+(a.content||""))){for(S=0;S<_.length;S++)if(p=_[S],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(S,1);break e}}p=d.createElement(l),We(p,l,a),d.head.appendChild(p);break;default:throw Error(r(468,l))}p[Ae]=e,Ne(p),l=p}e.stateNode=l}else wb(d,e.type,e.stateNode);else e.stateNode=_b(d,l,e.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?wb(d,e.type,e.stateNode):_b(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Lf(e,e.memoizedProps,a.memoizedProps)}break;case 27:gn(i,e),yn(e),l&512&&(Ve||a===null||Os(a,a.return)),a!==null&&l&4&&Lf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,e),yn(e),l&512&&(Ve||a===null||Os(a,a.return)),e.flags&32){d=e.stateNode;try{mn(d,"")}catch(yt){Zt(e,e.return,yt)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Lf(e,d,a!==null?a.memoizedProps:d)),l&1024&&(zf=!0);break;case 6:if(gn(i,e),yn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(yt){Zt(e,e.return,yt)}}break;case 3:if(Xc=null,d=us,us=Kc(i.containerInfo),gn(i,e),us=d,yn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{so(i.containerInfo)}catch(yt){Zt(e,e.return,yt)}zf&&(zf=!1,wv(e));break;case 4:l=us,us=Kc(e.stateNode.containerInfo),gn(i,e),yn(e),us=l;break;case 12:gn(i,e),yn(e);break;case 31:gn(i,e),yn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mc(e,l)));break;case 13:gn(i,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kc=un()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mc(e,l)));break;case 22:d=e.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,Y=hi,nt=Ve;if(hi=Y||d,Ve=nt||I,gn(i,e),Ve=nt,hi=Y,yn(e),l&8192)t:for(i=e.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||I||hi||Ve||$r(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(p=I.stateNode,d)_=p.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=I.stateNode;var at=I.memoizedProps.style,Q=at!=null&&at.hasOwnProperty("display")?at.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(yt){Zt(I,I.return,yt)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=d?"":I.memoizedProps}catch(yt){Zt(I,I.return,yt)}}}else if(i.tag===18){if(a===null){I=i;try{var Z=I.stateNode;d?db(Z,!0):db(I.stateNode,!1)}catch(yt){Zt(I,I.return,yt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Mc(e,a))));break;case 19:gn(i,e),yn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mc(e,l)));break;case 30:break;case 21:break;default:gn(i,e),yn(e)}}function yn(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(mv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,p=Uf(e);Vc(e,p,d);break;case 5:var _=a.stateNode;a.flags&32&&(mn(_,""),a.flags&=-33);var S=Uf(e);Vc(e,S,_);break;case 3:case 4:var I=a.stateNode.containerInfo,Y=Uf(e);Bf(e,Y,I);break;default:throw Error(r(161))}}catch(nt){Zt(e,e.return,nt)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function wv(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;wv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function fi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)yv(e,i.alternate,i),i=i.sibling}function $r(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Hi(4,i,i.return),$r(i);break;case 1:Os(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&dv(i,i.return,a),$r(i);break;case 27:jl(i.stateNode);case 26:case 5:Os(i,i.return),$r(i);break;case 22:i.memoizedState===null&&$r(i);break;case 30:$r(i);break;default:$r(i)}e=e.sibling}}function mi(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,d=e,p=i,_=p.flags;switch(p.tag){case 0:case 11:case 15:mi(d,p,a),xl(4,p);break;case 1:if(mi(d,p,a),l=p,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){Zt(l,l.return,Y)}if(l=p,d=l.updateQueue,d!==null){var S=l.stateNode;try{var I=d.shared.hiddenCallbacks;if(I!==null)for(d.shared.hiddenCallbacks=null,d=0;d<I.length;d++)t0(I[d],S)}catch(Y){Zt(l,l.return,Y)}}a&&_&64&&hv(p),_l(p,p.return);break;case 27:pv(p);case 26:case 5:mi(d,p,a),a&&l===null&&_&4&&fv(p),_l(p,p.return);break;case 12:mi(d,p,a);break;case 31:mi(d,p,a),a&&_&4&&xv(d,p);break;case 13:mi(d,p,a),a&&_&4&&_v(d,p);break;case 22:p.memoizedState===null&&mi(d,p,a),_l(p,p.return);break;case 30:break;default:mi(d,p,a)}i=i.sibling}}function Ff(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ol(a))}function qf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ol(e))}function cs(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ev(e,i,a,l),i=i.sibling}function Ev(e,i,a,l){var d=i.flags;switch(i.tag){case 0:case 11:case 15:cs(e,i,a,l),d&2048&&xl(9,i);break;case 1:cs(e,i,a,l);break;case 3:cs(e,i,a,l),d&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ol(e)));break;case 12:if(d&2048){cs(e,i,a,l),e=i.stateNode;try{var p=i.memoizedProps,_=p.id,S=p.onPostCommit;typeof S=="function"&&S(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){Zt(i,i.return,I)}}else cs(e,i,a,l);break;case 31:cs(e,i,a,l);break;case 13:cs(e,i,a,l);break;case 23:break;case 22:p=i.stateNode,_=i.alternate,i.memoizedState!==null?p._visibility&2?cs(e,i,a,l):Tl(e,i):p._visibility&2?cs(e,i,a,l):(p._visibility|=2,Ya(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),d&2048&&Ff(_,i);break;case 24:cs(e,i,a,l),d&2048&&qf(i.alternate,i);break;default:cs(e,i,a,l)}}function Ya(e,i,a,l,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=e,_=i,S=a,I=l,Y=_.flags;switch(_.tag){case 0:case 11:case 15:Ya(p,_,S,I,d),xl(8,_);break;case 23:break;case 22:var nt=_.stateNode;_.memoizedState!==null?nt._visibility&2?Ya(p,_,S,I,d):Tl(p,_):(nt._visibility|=2,Ya(p,_,S,I,d)),d&&Y&2048&&Ff(_.alternate,_);break;case 24:Ya(p,_,S,I,d),d&&Y&2048&&qf(_.alternate,_);break;default:Ya(p,_,S,I,d)}i=i.sibling}}function Tl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,d=l.flags;switch(l.tag){case 22:Tl(a,l),d&2048&&Ff(l.alternate,l);break;case 24:Tl(a,l),d&2048&&qf(l.alternate,l);break;default:Tl(a,l)}i=i.sibling}}var wl=8192;function Ka(e,i,a){if(e.subtreeFlags&wl)for(e=e.child;e!==null;)Sv(e,i,a),e=e.sibling}function Sv(e,i,a){switch(e.tag){case 26:Ka(e,i,a),e.flags&wl&&e.memoizedState!==null&&LS(a,us,e.memoizedState,e.memoizedProps);break;case 5:Ka(e,i,a);break;case 3:case 4:var l=us;us=Kc(e.stateNode.containerInfo),Ka(e,i,a),us=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=wl,wl=16777216,Ka(e,i,a),wl=l):Ka(e,i,a));break;default:Ka(e,i,a)}}function Av(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function El(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];He=l,Cv(l,e)}Av(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nv(e),e=e.sibling}function Nv(e){switch(e.tag){case 0:case 11:case 15:El(e),e.flags&2048&&Hi(9,e,e.return);break;case 3:El(e);break;case 12:El(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ic(e)):El(e);break;default:El(e)}}function Ic(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];He=l,Cv(l,e)}Av(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Hi(8,i,i.return),Ic(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ic(i));break;default:Ic(i)}e=e.sibling}}function Cv(e,i){for(;He!==null;){var a=He;switch(a.tag){case 0:case 11:case 15:Hi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ol(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,He=l;else t:for(a=e;He!==null;){l=He;var d=l.sibling,p=l.return;if(vv(l),l===a){He=null;break t}if(d!==null){d.return=p,He=d;break t}He=p}}}var JE={getCacheForType:function(e){var i=$e(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return $e(Re).controller.signal}},tS=typeof WeakMap=="function"?WeakMap:Map,Kt=0,se=null,Mt=null,Ot=0,$t=0,Vn=null,Gi=!1,Qa=!1,Hf=!1,pi=0,ge=0,Yi=0,Zr=0,Gf=0,Mn=0,Xa=0,Sl=null,vn=null,Yf=!1,kc=0,Rv=0,Oc=1/0,Pc=null,Ki=null,Ue=0,Qi=null,$a=null,gi=0,Kf=0,Qf=null,jv=null,Al=0,Xf=null;function In(){return(Kt&2)!==0&&Ot!==0?Ot&-Ot:B.T!==null?em():Lu()}function Dv(){if(Mn===0)if((Ot&536870912)===0||Bt){var e=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),Mn=e}else Mn=536870912;return e=jn.current,e!==null&&(e.flags|=32),Mn}function bn(e,i,a){(e===se&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(Za(e,0),Xi(e,Ot,Mn,!1)),Sr(e,a),((Kt&2)===0||e!==se)&&(e===se&&((Kt&2)===0&&(Zr|=a),ge===4&&Xi(e,Ot,Mn,!1)),Ps(e))}function Vv(e,i,a){if((Kt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||ts(e,i),d=l?sS(e,i):Zf(e,i,!0),p=l;do{if(d===0){Qa&&!l&&Xi(e,i,0,!1);break}else{if(a=e.current.alternate,p&&!eS(a)){d=Zf(e,i,!1),p=!1;continue}if(d===2){if(p=i,e.errorRecoveryDisabledLanes&p)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var S=e;d=Sl;var I=S.current.memoizedState.isDehydrated;if(I&&(Za(S,_).flags|=256),_=Zf(S,_,!1),_!==2){if(Hf&&!I){S.errorRecoveryDisabledLanes|=p,Zr|=p,d=4;break t}p=vn,vn=d,p!==null&&(vn===null?vn=p:vn.push.apply(vn,p))}d=_}if(p=!1,d!==2)continue}}if(d===1){Za(e,0),Xi(e,i,0,!0);break}t:{switch(l=e,p=d,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Xi(l,i,Mn,!Gi);break t;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=kc+300-un(),10<d)){if(Xi(l,i,Mn,!Gi),bs(l,0,!0)!==0)break t;gi=i,l.timeoutHandle=ub(Mv.bind(null,l,a,vn,Pc,Yf,i,Mn,Zr,Xa,Gi,p,"Throttled",-0,0),d);break t}Mv(l,a,vn,Pc,Yf,i,Mn,Zr,Xa,Gi,p,null,-0,0)}}break}while(!0);Ps(e)}function Mv(e,i,a,l,d,p,_,S,I,Y,nt,at,Q,Z){if(e.timeoutHandle=-1,at=i.subtreeFlags,at&8192||(at&16785408)===16785408){at={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},Sv(i,p,at);var yt=(p&62914560)===p?kc-un():(p&4194048)===p?Rv-un():0;if(yt=US(at,yt),yt!==null){gi=p,e.cancelPendingCommit=yt(zv.bind(null,e,i,p,a,l,d,_,S,I,nt,at,null,Q,Z)),Xi(e,p,_,!Y);return}}zv(e,i,p,a,l,d,_,S,I)}function eS(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],p=d.getSnapshot;d=d.value;try{if(!Cn(p(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xi(e,i,a,l){i&=~Gf,i&=~Zr,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var d=i;0<d;){var p=31-be(d),_=1<<p;l[p]=-1,d&=~_}a!==0&&Ar(e,a,i)}function Lc(){return(Kt&6)===0?(Nl(0),!1):!0}function $f(){if(Mt!==null){if($t===0)var e=Mt.return;else e=Mt,ri=Fr=null,df(e),za=null,ul=0,e=Mt;for(;e!==null;)cv(e.alternate,e),e=e.return;Mt=null}}function Za(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,_S(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),gi=0,$f(),se=e,Mt=a=si(e.current,null),Ot=i,$t=0,Vn=null,Gi=!1,Qa=ts(e,i),Hf=!1,Xa=Mn=Gf=Zr=Yi=ge=0,vn=Sl=null,Yf=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var d=31-be(l),p=1<<d;i|=e[d],l&=~p}return pi=i,rc(),a}function Iv(e,i){Dt=null,B.H=yl,i===Ba||i===fc?(i=$y(),$t=3):i===Jd?(i=$y(),$t=4):$t=i===Cf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vn=i,Mt===null&&(ge=1,Nc(e,Fn(i,e.current)))}function kv(){var e=jn.current;return e===null?!0:(Ot&4194048)===Ot?Yn===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?e===Yn:!1}function Ov(){var e=B.H;return B.H=yl,e===null?yl:e}function Pv(){var e=B.A;return B.A=JE,e}function Uc(){ge=4,Gi||(Ot&4194048)!==Ot&&jn.current!==null||(Qa=!0),(Yi&134217727)===0&&(Zr&134217727)===0||se===null||Xi(se,Ot,Mn,!1)}function Zf(e,i,a){var l=Kt;Kt|=2;var d=Ov(),p=Pv();(se!==e||Ot!==i)&&(Pc=null,Za(e,i)),i=!1;var _=ge;t:do try{if($t!==0&&Mt!==null){var S=Mt,I=Vn;switch($t){case 8:$f(),_=6;break t;case 3:case 2:case 9:case 6:jn.current===null&&(i=!0);var Y=$t;if($t=0,Vn=null,Wa(e,S,I,Y),a&&Qa){_=0;break t}break;default:Y=$t,$t=0,Vn=null,Wa(e,S,I,Y)}}nS(),_=ge;break}catch(nt){Iv(e,nt)}while(!0);return i&&e.shellSuspendCounter++,ri=Fr=null,Kt=l,B.H=d,B.A=p,Mt===null&&(se=null,Ot=0,rc()),_}function nS(){for(;Mt!==null;)Lv(Mt)}function sS(e,i){var a=Kt;Kt|=2;var l=Ov(),d=Pv();se!==e||Ot!==i?(Pc=null,Oc=un()+500,Za(e,i)):Qa=ts(e,i);t:do try{if($t!==0&&Mt!==null){i=Mt;var p=Vn;e:switch($t){case 1:$t=0,Vn=null,Wa(e,i,p,1);break;case 2:case 9:if(Qy(p)){$t=0,Vn=null,Uv(i);break}i=function(){$t!==2&&$t!==9||se!==e||($t=7),Ps(e)},p.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:Qy(p)?($t=0,Vn=null,Uv(i)):($t=0,Vn=null,Wa(e,i,p,7));break;case 5:var _=null;switch(Mt.tag){case 26:_=Mt.memoizedState;case 5:case 27:var S=Mt;if(_?Eb(_):S.stateNode.complete){$t=0,Vn=null;var I=S.sibling;if(I!==null)Mt=I;else{var Y=S.return;Y!==null?(Mt=Y,Bc(Y)):Mt=null}break e}}$t=0,Vn=null,Wa(e,i,p,5);break;case 6:$t=0,Vn=null,Wa(e,i,p,6);break;case 8:$f(),ge=6;break t;default:throw Error(r(462))}}iS();break}catch(nt){Iv(e,nt)}while(!0);return ri=Fr=null,B.H=l,B.A=d,Kt=a,Mt!==null?0:(se=null,Ot=0,rc(),ge)}function iS(){for(;Mt!==null&&!Ad();)Lv(Mt)}function Lv(e){var i=lv(e.alternate,e,pi);e.memoizedProps=e.pendingProps,i===null?Bc(e):Mt=i}function Uv(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=nv(a,i,i.pendingProps,i.type,void 0,Ot);break;case 11:i=nv(a,i,i.pendingProps,i.type.render,i.ref,Ot);break;case 5:df(i);default:cv(a,i),i=Mt=Py(i,pi),i=lv(a,i,pi)}e.memoizedProps=e.pendingProps,i===null?Bc(e):Mt=i}function Wa(e,i,a,l){ri=Fr=null,df(i),za=null,ul=0;var d=i.return;try{if(YE(e,d,i,a,Ot)){ge=1,Nc(e,Fn(a,e.current)),Mt=null;return}}catch(p){if(d!==null)throw Mt=d,p;ge=1,Nc(e,Fn(a,e.current)),Mt=null;return}i.flags&32768?(Bt||l===1?e=!0:Qa||(Ot&536870912)!==0?e=!1:(Gi=e=!0,(l===2||l===9||l===3||l===6)&&(l=jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Bv(i,e)):Bc(i)}function Bc(e){var i=e;do{if((i.flags&32768)!==0){Bv(i,Gi);return}e=i.return;var a=XE(i.alternate,i,pi);if(a!==null){Mt=a;return}if(i=i.sibling,i!==null){Mt=i;return}Mt=i=e}while(i!==null);ge===0&&(ge=5)}function Bv(e,i){do{var a=$E(e.alternate,e);if(a!==null){a.flags&=32767,Mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=a}while(e!==null);ge=6,Mt=null}function zv(e,i,a,l,d,p,_,S,I){e.cancelPendingCommit=null;do zc();while(Ue!==0);if((Kt&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(p=i.lanes|i.childLanes,p|=Ld,Rd(e,a,p,_,S,I),e===se&&(Mt=se=null,Ot=0),$a=i,Qi=e,gi=a,Kf=p,Qf=d,jv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,lS(Si,function(){return Yv(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,d=X.p,X.p=2,_=Kt,Kt|=4;try{ZE(e,i,a)}finally{Kt=_,X.p=d,B.T=l}}Ue=1,Fv(),qv(),Hv()}}function Fv(){if(Ue===1){Ue=0;var e=Qi,i=$a,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var l=X.p;X.p=2;var d=Kt;Kt|=4;try{Tv(i,e);var p=um,_=Cy(e.containerInfo),S=p.focusedElem,I=p.selectionRange;if(_!==S&&S&&S.ownerDocument&&Ny(S.ownerDocument.documentElement,S)){if(I!==null&&Md(S)){var Y=I.start,nt=I.end;if(nt===void 0&&(nt=Y),"selectionStart"in S)S.selectionStart=Y,S.selectionEnd=Math.min(nt,S.value.length);else{var at=S.ownerDocument||document,Q=at&&at.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),yt=S.textContent.length,wt=Math.min(I.start,yt),ee=I.end===void 0?wt:Math.min(I.end,yt);!Z.extend&&wt>ee&&(_=ee,ee=wt,wt=_);var F=Ay(S,wt),P=Ay(S,ee);if(F&&P&&(Z.rangeCount!==1||Z.anchorNode!==F.node||Z.anchorOffset!==F.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var G=at.createRange();G.setStart(F.node,F.offset),Z.removeAllRanges(),wt>ee?(Z.addRange(G),Z.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),Z.addRange(G))}}}}for(at=[],Z=S;Z=Z.parentNode;)Z.nodeType===1&&at.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<at.length;S++){var it=at[S];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}Jc=!!lm,um=lm=null}finally{Kt=d,X.p=l,B.T=a}}e.current=i,Ue=2}}function qv(){if(Ue===2){Ue=0;var e=Qi,i=$a,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var l=X.p;X.p=2;var d=Kt;Kt|=4;try{yv(e,i.alternate,i)}finally{Kt=d,X.p=l,B.T=a}}Ue=3}}function Hv(){if(Ue===4||Ue===3){Ue=0,Du();var e=Qi,i=$a,a=gi,l=jv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ue=5:(Ue=0,$a=Qi=null,Gv(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ki=null),Js(a),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Jn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=B.T,d=X.p,X.p=2,B.T=null;try{for(var p=e.onRecoverableError,_=0;_<l.length;_++){var S=l[_];p(S.value,{componentStack:S.stack})}}finally{B.T=i,X.p=d}}(gi&3)!==0&&zc(),Ps(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===Xf?Al++:(Al=0,Xf=e):Al=0,Nl(0)}}function Gv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ol(i)))}function zc(){return Fv(),qv(),Hv(),Yv()}function Yv(){if(Ue!==5)return!1;var e=Qi,i=Kf;Kf=0;var a=Js(gi),l=B.T,d=X.p;try{X.p=32>a?32:a,B.T=null,a=Qf,Qf=null;var p=Qi,_=gi;if(Ue=0,$a=Qi=null,gi=0,(Kt&6)!==0)throw Error(r(331));var S=Kt;if(Kt|=4,Nv(p.current),Ev(p,p.current,_,a),Kt=S,Nl(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Jn,p)}catch{}return!0}finally{X.p=d,B.T=l,Gv(e,i)}}function Kv(e,i,a){i=Fn(a,i),i=Nf(e.stateNode,i,2),e=zi(e,i,2),e!==null&&(Sr(e,2),Ps(e))}function Zt(e,i,a){if(e.tag===3)Kv(e,e,a);else for(;i!==null;){if(i.tag===3){Kv(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ki===null||!Ki.has(l))){e=Fn(a,e),a=Q0(2),l=zi(i,a,2),l!==null&&(X0(a,l,i,e),Sr(l,2),Ps(l));break}}i=i.return}}function Wf(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new tS;var d=new Set;l.set(i,d)}else d=l.get(i),d===void 0&&(d=new Set,l.set(i,d));d.has(a)||(Hf=!0,d.add(a),e=rS.bind(null,e,i,a),i.then(e,e))}function rS(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,se===e&&(Ot&a)===a&&(ge===4||ge===3&&(Ot&62914560)===Ot&&300>un()-kc?(Kt&2)===0&&Za(e,0):Gf|=a,Xa===Ot&&(Xa=0)),Ps(e)}function Qv(e,i){i===0&&(i=Pu()),e=Ur(e,i),e!==null&&(Sr(e,i),Ps(e))}function aS(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Qv(e,a)}function oS(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Qv(e,a)}function lS(e,i){return Le(e,i)}var Fc=null,Ja=null,Jf=!1,qc=!1,tm=!1,$i=0;function Ps(e){e!==Ja&&e.next===null&&(Ja===null?Fc=Ja=e:Ja=Ja.next=e),qc=!0,Jf||(Jf=!0,cS())}function Nl(e,i){if(!tm&&qc){tm=!0;do for(var a=!1,l=Fc;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var p=0;else{var _=l.suspendedLanes,S=l.pingedLanes;p=(1<<31-be(42|e)+1)-1,p&=d&~(_&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Wv(l,p))}else p=Ot,p=bs(l,l===se?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||ts(l,p)||(a=!0,Wv(l,p));l=l.next}while(a);tm=!1}}function uS(){Xv()}function Xv(){qc=Jf=!1;var e=0;$i!==0&&xS()&&(e=$i);for(var i=un(),a=null,l=Fc;l!==null;){var d=l.next,p=$v(l,i);p===0?(l.next=null,a===null?Fc=d:a.next=d,d===null&&(Ja=a)):(a=l,(e!==0||(p&3)!==0)&&(qc=!0)),l=d}Ue!==0&&Ue!==5||Nl(e),$i!==0&&($i=0)}function $v(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var _=31-be(p),S=1<<_,I=d[_];I===-1?((S&a)===0||(S&l)!==0)&&(d[_]=Cd(S,i)):I<=i&&(e.expiredLanes|=S),p&=~S}if(i=se,a=Ot,a=bs(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&($t===2||$t===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ei(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ts(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&Ei(l),Js(a)){case 2:case 8:a=Po;break;case 32:a=Si;break;case 268435456:a=Vu;break;default:a=Si}return l=Zv.bind(null,e),a=Le(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&Ei(l),e.callbackPriority=2,e.callbackNode=null,2}function Zv(e,i){if(Ue!==0&&Ue!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(zc()&&e.callbackNode!==a)return null;var l=Ot;return l=bs(e,e===se?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Vv(e,l,i),$v(e,un()),e.callbackNode!=null&&e.callbackNode===a?Zv.bind(null,e):null)}function Wv(e,i){if(zc())return null;Vv(e,i,!0)}function cS(){TS(function(){(Kt&6)!==0?Le(Oo,uS):Xv()})}function em(){if($i===0){var e=La;e===0&&(e=ys,ys<<=1,(ys&261888)===0&&(ys=256)),$i=e}return $i}function Jv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:wa(""+e)}function tb(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function hS(e,i,a,l,d){if(i==="submit"&&a&&a.stateNode===d){var p=Jv((d[Fe]||null).action),_=l.submitter;_&&(i=(i=_[Fe]||null)?Jv(i.formAction):_.getAttribute("formAction"),i!==null&&(p=i,_=null));var S=new js("action","action",null,l,d);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($i!==0){var I=_?tb(d,_):new FormData(d);_f(a,{pending:!0,data:I,method:d.method,action:p},null,I)}}else typeof p=="function"&&(S.preventDefault(),I=_?tb(d,_):new FormData(d),_f(a,{pending:!0,data:I,method:d.method,action:p},p,I))},currentTarget:d}]})}}for(var nm=0;nm<Pd.length;nm++){var sm=Pd[nm],dS=sm.toLowerCase(),fS=sm[0].toUpperCase()+sm.slice(1);ls(dS,"on"+fS)}ls(Dy,"onAnimationEnd"),ls(Vy,"onAnimationIteration"),ls(My,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(RE,"onTransitionRun"),ls(jE,"onTransitionStart"),ls(DE,"onTransitionCancel"),ls(Iy,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function eb(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;t:{var p=void 0;if(i)for(var _=l.length-1;0<=_;_--){var S=l[_],I=S.instance,Y=S.currentTarget;if(S=S.listener,I!==p&&d.isPropagationStopped())break t;p=S,d.currentTarget=Y;try{p(d)}catch(nt){ic(nt)}d.currentTarget=null,p=I}else for(_=0;_<l.length;_++){if(S=l[_],I=S.instance,Y=S.currentTarget,S=S.listener,I!==p&&d.isPropagationStopped())break t;p=S,d.currentTarget=Y;try{p(d)}catch(nt){ic(nt)}d.currentTarget=null,p=I}}}}function It(e,i){var a=i[va];a===void 0&&(a=i[va]=new Set);var l=e+"__bubble";a.has(l)||(nb(i,e,2,!1),a.add(l))}function im(e,i,a){var l=0;i&&(l|=4),nb(a,e,l,i)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function rm(e){if(!e[Hc]){e[Hc]=!0,Bo.forEach(function(a){a!=="selectionchange"&&(mS.has(a)||im(a,!1,e),im(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Hc]||(i[Hc]=!0,im("selectionchange",!1,i))}}function nb(e,i,a,l){switch(Db(i)){case 2:var d=FS;break;case 8:d=qS;break;default:d=xm}a=d.bind(null,i,a,e),d=void 0,!Dr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(i,a,{capture:!0,passive:d}):e.addEventListener(i,a,!0):d!==void 0?e.addEventListener(i,a,{passive:d}):e.addEventListener(i,a,!1)}function am(e,i,a,l,d){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var S=l.stateNode.containerInfo;if(S===d)break;if(_===4)for(_=l.return;_!==null;){var I=_.tag;if((I===3||I===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;S!==null;){if(_=ws(S),_===null)return;if(I=_.tag,I===5||I===6||I===26||I===27){l=p=_;continue t}S=S.parentNode}}l=l.return}Di(function(){var Y=p,nt=Ln(a),at=[];t:{var Q=ky.get(e);if(Q!==void 0){var Z=js,yt=e;switch(e){case"keypress":if(Mr(a)===0)break t;case"keydown":case"keyup":Z=ec;break;case"focusin":yt="focus",Z=kr;break;case"focusout":yt="blur",Z=kr;break;case"beforeblur":case"afterblur":Z=kr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=v;break;case Dy:case Vy:case My:Z=Qu;break;case Iy:Z=R;break;case"scroll":case"scrollend":Z=Wo;break;case"wheel":Z=$;break;case"copy":case"cut":case"paste":Z=Xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ni;break;case"toggle":case"beforetoggle":Z=jt}var wt=(i&4)!==0,ee=!wt&&(e==="scroll"||e==="scrollend"),F=wt?Q!==null?Q+"Capture":null:Q;wt=[];for(var P=Y,G;P!==null;){var it=P;if(G=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||G===null||F===null||(it=is(P,F),it!=null&&wt.push(Rl(P,it,G))),ee)break;P=P.return}0<wt.length&&(Q=new Z(Q,yt,null,a,nt),at.push({event:Q,listeners:wt}))}}if((i&7)===0){t:{if(Q=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",Q&&a!==Xo&&(yt=a.relatedTarget||a.fromElement)&&(ws(yt)||yt[_s]))break t;if((Z||Q)&&(Q=nt.window===nt?nt:(Q=nt.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(yt=a.relatedTarget||a.toElement,Z=Y,yt=yt?ws(yt):null,yt!==null&&(ee=u(yt),wt=yt.tag,yt!==ee||wt!==5&&wt!==27&&wt!==6)&&(yt=null)):(Z=null,yt=Y),Z!==yt)){if(wt=Jo,it="onMouseLeave",F="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(wt=ni,it="onPointerLeave",F="onPointerEnter",P="pointer"),ee=Z==null?Q:An(Z),G=yt==null?Q:An(yt),Q=new wt(it,P+"leave",Z,a,nt),Q.target=ee,Q.relatedTarget=G,it=null,ws(nt)===Y&&(wt=new wt(F,P+"enter",yt,a,nt),wt.target=G,wt.relatedTarget=ee,it=wt),ee=it,Z&&yt)e:{for(wt=pS,F=Z,P=yt,G=0,it=F;it;it=wt(it))G++;it=0;for(var xt=P;xt;xt=wt(xt))it++;for(;0<G-it;)F=wt(F),G--;for(;0<it-G;)P=wt(P),it--;for(;G--;){if(F===P||P!==null&&F===P.alternate){wt=F;break e}F=wt(F),P=wt(P)}wt=null}else wt=null;Z!==null&&sb(at,Q,Z,wt,!1),yt!==null&&ee!==null&&sb(at,ee,yt,wt,!0)}}t:{if(Q=Y?An(Y):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Ht=xy;else if(vy(Q))if(_y)Ht=AE;else{Ht=EE;var bt=wE}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&Ta(Y.elementType)&&(Ht=xy):Ht=SE;if(Ht&&(Ht=Ht(e,Y))){by(at,Ht,a,nt);break t}bt&&bt(e,Q,Y),e==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&Yo(Q,"number",Q.value)}switch(bt=Y?An(Y):window,e){case"focusin":(vy(bt)||bt.contentEditable==="true")&&(ja=bt,Id=Y,il=null);break;case"focusout":il=Id=ja=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Ry(at,a,nt);break;case"selectionchange":if(CE)break;case"keydown":case"keyup":Ry(at,a,nt)}var Vt;if(Yt)t:{switch(e){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Ra?Or(e,a)&&(Pt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Pt="onCompositionStart");Pt&&(Ms&&a.locale!=="ko"&&(Ra||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Ra&&(Vt=Zo()):(Rs=nt,$o="value"in Rs?Rs.value:Rs.textContent,Ra=!0)),bt=Gc(Y,Pt),0<bt.length&&(Pt=new Vs(Pt,e,null,a,nt),at.push({event:Pt,listeners:bt}),Vt?Pt.data=Vt:(Vt=Ca(a),Vt!==null&&(Pt.data=Vt)))),(Vt=Bn?bE(e,a):xE(e,a))&&(Pt=Gc(Y,"onBeforeInput"),0<Pt.length&&(bt=new Vs("onBeforeInput","beforeinput",null,a,nt),at.push({event:bt,listeners:Pt}),bt.data=Vt)),hS(at,e,Y,a,nt)}eb(at,i)})}function Rl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Gc(e,i){for(var a=i+"Capture",l=[];e!==null;){var d=e,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=is(e,a),d!=null&&l.unshift(Rl(e,d,p)),d=is(e,i),d!=null&&l.push(Rl(e,d,p))),e.tag===3)return l;e=e.return}return[]}function pS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sb(e,i,a,l,d){for(var p=i._reactName,_=[];a!==null&&a!==l;){var S=a,I=S.alternate,Y=S.stateNode;if(S=S.tag,I!==null&&I===l)break;S!==5&&S!==26&&S!==27||Y===null||(I=Y,d?(Y=is(a,p),Y!=null&&_.unshift(Rl(a,Y,I))):d||(Y=is(a,p),Y!=null&&_.push(Rl(a,Y,I)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var gS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function ib(e){return(typeof e=="string"?e:""+e).replace(gS,`
`).replace(yS,"")}function rb(e,i){return i=ib(i),ib(e)===i}function te(e,i,a,l,d,p){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||mn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&mn(e,""+l);break;case"className":Nn(e,"class",l);break;case"tabIndex":Nn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(e,a,l);break;case"style":Qo(e,l,p);break;case"data":if(i!=="object"){Nn(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=wa(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&te(e,i,"name",d.name,d,null),te(e,i,"formEncType",d.formEncType,d,null),te(e,i,"formMethod",d.formMethod,d,null),te(e,i,"formTarget",d.formTarget,d,null)):(te(e,i,"encType",d.encType,d,null),te(e,i,"method",d.method,d,null),te(e,i,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=wa(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=ss);break;case"onScroll":l!=null&&It("scroll",e);break;case"onScrollEnd":l!=null&&It("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=wa(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":It("beforetoggle",e),It("toggle",e),xa(e,"popover",l);break;case"xlinkActuate":Ce(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ce(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ce(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ce(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ce(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ce(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ce(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ce(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ce(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xa(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gu.get(a)||a,xa(e,a,l))}}function om(e,i,a,l,d,p){switch(a){case"style":Qo(e,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?mn(e,l):(typeof l=="number"||typeof l=="bigint")&&mn(e,""+l);break;case"onScroll":l!=null&&It("scroll",e);break;case"onScrollEnd":l!=null&&It("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zo.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),p=e[Fe]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(i,p,d),typeof l=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,d);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):xa(e,a,l)}}}function We(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",e),It("load",e);var l=!1,d=!1,p;for(p in a)if(a.hasOwnProperty(p)){var _=a[p];if(_!=null)switch(p){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:te(e,i,p,_,a,null)}}d&&te(e,i,"srcSet",a.srcSet,a,null),l&&te(e,i,"src",a.src,a,null);return;case"input":It("invalid",e);var S=p=_=d=null,I=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var nt=a[l];if(nt!=null)switch(l){case"name":d=nt;break;case"type":_=nt;break;case"checked":I=nt;break;case"defaultChecked":Y=nt;break;case"value":p=nt;break;case"defaultValue":S=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,i));break;default:te(e,i,l,nt,a,null)}}Fu(e,p,S,I,Y,_,d,!1);return;case"select":It("invalid",e),l=_=p=null;for(d in a)if(a.hasOwnProperty(d)&&(S=a[d],S!=null))switch(d){case"value":p=S;break;case"defaultValue":_=S;break;case"multiple":l=S;default:te(e,i,d,S,a,null)}i=p,a=_,e.multiple=!!l,i!=null?Ni(e,!!l,i,!1):a!=null&&Ni(e,!!l,a,!0);return;case"textarea":It("invalid",e),p=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(S=a[_],S!=null))switch(_){case"value":l=S;break;case"defaultValue":d=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:te(e,i,_,S,a,null)}Ci(e,l,d,p);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:te(e,i,I,l,a,null)}return;case"dialog":It("beforetoggle",e),It("toggle",e),It("cancel",e),It("close",e);break;case"iframe":case"object":It("load",e);break;case"video":case"audio":for(l=0;l<Cl.length;l++)It(Cl[l],e);break;case"image":It("error",e),It("load",e);break;case"details":It("toggle",e);break;case"embed":case"source":case"link":It("error",e),It("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:te(e,i,Y,l,a,null)}return;default:if(Ta(i)){for(nt in a)a.hasOwnProperty(nt)&&(l=a[nt],l!==void 0&&om(e,i,nt,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&te(e,i,S,l,a,null))}function vS(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,_=null,S=null,I=null,Y=null,nt=null;for(Z in a){var at=a[Z];if(a.hasOwnProperty(Z)&&at!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":I=at;default:l.hasOwnProperty(Z)||te(e,i,Z,null,l,at)}}for(var Q in l){var Z=l[Q];if(at=a[Q],l.hasOwnProperty(Q)&&(Z!=null||at!=null))switch(Q){case"type":p=Z;break;case"name":d=Z;break;case"checked":Y=Z;break;case"defaultChecked":nt=Z;break;case"value":_=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:Z!==at&&te(e,i,Q,Z,l,at)}}_a(e,_,S,I,Y,nt,p,d);return;case"select":Z=_=S=Q=null;for(p in a)if(I=a[p],a.hasOwnProperty(p)&&I!=null)switch(p){case"value":break;case"multiple":Z=I;default:l.hasOwnProperty(p)||te(e,i,p,null,l,I)}for(d in l)if(p=l[d],I=a[d],l.hasOwnProperty(d)&&(p!=null||I!=null))switch(d){case"value":Q=p;break;case"defaultValue":S=p;break;case"multiple":_=p;default:p!==I&&te(e,i,d,p,l,I)}i=S,a=_,l=Z,Q!=null?Ni(e,!!a,Q,!1):!!l!=!!a&&(i!=null?Ni(e,!!a,i,!0):Ni(e,!!a,a?[]:"",!1));return;case"textarea":Z=Q=null;for(S in a)if(d=a[S],a.hasOwnProperty(S)&&d!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:te(e,i,S,null,l,d)}for(_ in l)if(d=l[_],p=a[_],l.hasOwnProperty(_)&&(d!=null||p!=null))switch(_){case"value":Q=d;break;case"defaultValue":Z=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&te(e,i,_,d,l,p)}qu(e,Q,Z);return;case"option":for(var yt in a)if(Q=a[yt],a.hasOwnProperty(yt)&&Q!=null&&!l.hasOwnProperty(yt))switch(yt){case"selected":e.selected=!1;break;default:te(e,i,yt,null,l,Q)}for(I in l)if(Q=l[I],Z=a[I],l.hasOwnProperty(I)&&Q!==Z&&(Q!=null||Z!=null))switch(I){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:te(e,i,I,Q,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in a)Q=a[wt],a.hasOwnProperty(wt)&&Q!=null&&!l.hasOwnProperty(wt)&&te(e,i,wt,null,l,Q);for(Y in l)if(Q=l[Y],Z=a[Y],l.hasOwnProperty(Y)&&Q!==Z&&(Q!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:te(e,i,Y,Q,l,Z)}return;default:if(Ta(i)){for(var ee in a)Q=a[ee],a.hasOwnProperty(ee)&&Q!==void 0&&!l.hasOwnProperty(ee)&&om(e,i,ee,void 0,l,Q);for(nt in l)Q=l[nt],Z=a[nt],!l.hasOwnProperty(nt)||Q===Z||Q===void 0&&Z===void 0||om(e,i,nt,Q,l,Z);return}}for(var F in a)Q=a[F],a.hasOwnProperty(F)&&Q!=null&&!l.hasOwnProperty(F)&&te(e,i,F,null,l,Q);for(at in l)Q=l[at],Z=a[at],!l.hasOwnProperty(at)||Q===Z||Q==null&&Z==null||te(e,i,at,Q,l,Z)}function ab(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],p=d.transferSize,_=d.initiatorType,S=d.duration;if(p&&S&&ab(_)){for(_=0,S=d.responseEnd,l+=1;l<a.length;l++){var I=a[l],Y=I.startTime;if(Y>S)break;var nt=I.transferSize,at=I.initiatorType;nt&&ab(at)&&(I=I.responseEnd,_+=nt*(I<S?1:(S-Y)/(I-Y)))}if(--l,i+=8*(p+_)/(d.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var lm=null,um=null;function Yc(e){return e.nodeType===9?e:e.ownerDocument}function ob(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lb(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function cm(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var hm=null;function xS(){var e=window.event;return e&&e.type==="popstate"?e===hm?!1:(hm=e,!0):(hm=null,!1)}var ub=typeof setTimeout=="function"?setTimeout:void 0,_S=typeof clearTimeout=="function"?clearTimeout:void 0,cb=typeof Promise=="function"?Promise:void 0,TS=typeof queueMicrotask=="function"?queueMicrotask:typeof cb<"u"?function(e){return cb.resolve(null).then(e).catch(wS)}:ub;function wS(e){setTimeout(function(){throw e})}function Zi(e){return e==="head"}function hb(e,i){var a=i,l=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(d),so(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")jl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,jl(a);for(var p=a.firstChild;p;){var _=p.nextSibling,S=p.nodeName;p[Ts]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=_}}else a==="body"&&jl(e.ownerDocument.body);a=d}while(a);so(i)}function db(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function dm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dm(a),ba(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ES(e,i,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ts])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=Kn(e.nextSibling),e===null)break}return null}function SS(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Kn(e.nextSibling),e===null))return null;return e}function fb(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Kn(e.nextSibling),e===null))return null;return e}function fm(e){return e.data==="$?"||e.data==="$~"}function mm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function AS(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Kn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var pm=null;function mb(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Kn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function pb(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function gb(e,i,a){switch(i=Yc(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function jl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ba(e)}var Qn=new Map,yb=new Set;function Kc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yi=X.d;X.d={f:NS,r:CS,D:RS,C:jS,L:DS,m:VS,X:IS,S:MS,M:kS};function NS(){var e=yi.f(),i=Lc();return e||i}function CS(e){var i=Pn(e);i!==null&&i.tag===5&&i.type==="form"?I0(i):yi.r(e)}var to=typeof document>"u"?null:document;function vb(e,i,a){var l=to;if(l&&typeof i=="string"&&i){var d=fn(i);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),yb.has(d)||(yb.add(d),e={rel:e,crossOrigin:a,href:i},l.querySelector(d)===null&&(i=l.createElement("link"),We(i,"link",e),Ne(i),l.head.appendChild(i)))}}function RS(e){yi.D(e),vb("dns-prefetch",e,null)}function jS(e,i){yi.C(e,i),vb("preconnect",e,i)}function DS(e,i,a){yi.L(e,i,a);var l=to;if(l&&e&&i){var d='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+fn(a.imageSizes)+'"]')):d+='[href="'+fn(e)+'"]';var p=d;switch(i){case"style":p=eo(e);break;case"script":p=no(e)}Qn.has(p)||(e=x({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Qn.set(p,e),l.querySelector(d)!==null||i==="style"&&l.querySelector(Dl(p))||i==="script"&&l.querySelector(Vl(p))||(i=l.createElement("link"),We(i,"link",e),Ne(i),l.head.appendChild(i)))}}function VS(e,i){yi.m(e,i);var a=to;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(e)+'"]',p=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=no(e)}if(!Qn.has(p)&&(e=x({rel:"modulepreload",href:e},i),Qn.set(p,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vl(p)))return}l=a.createElement("link"),We(l,"link",e),Ne(l),a.head.appendChild(l)}}}function MS(e,i,a){yi.S(e,i,a);var l=to;if(l&&e){var d=Es(l).hoistableStyles,p=eo(e);i=i||"default";var _=d.get(p);if(!_){var S={loading:0,preload:null};if(_=l.querySelector(Dl(p)))S.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Qn.get(p))&&gm(e,a);var I=_=l.createElement("link");Ne(I),We(I,"link",e),I._p=new Promise(function(Y,nt){I.onload=Y,I.onerror=nt}),I.addEventListener("load",function(){S.loading|=1}),I.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Qc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:S},d.set(p,_)}}}function IS(e,i){yi.X(e,i);var a=to;if(a&&e){var l=Es(a).hoistableScripts,d=no(e),p=l.get(d);p||(p=a.querySelector(Vl(d)),p||(e=x({src:e,async:!0},i),(i=Qn.get(d))&&ym(e,i),p=a.createElement("script"),Ne(p),We(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(d,p))}}function kS(e,i){yi.M(e,i);var a=to;if(a&&e){var l=Es(a).hoistableScripts,d=no(e),p=l.get(d);p||(p=a.querySelector(Vl(d)),p||(e=x({src:e,async:!0,type:"module"},i),(i=Qn.get(d))&&ym(e,i),p=a.createElement("script"),Ne(p),We(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(d,p))}}function bb(e,i,a,l){var d=(d=At.current)?Kc(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=eo(a.href),a=Es(d).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=eo(a.href);var p=Es(d).hoistableStyles,_=p.get(e);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,_),(p=d.querySelector(Dl(e)))&&!p._p&&(_.instance=p,_.state.loading=5),Qn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(e,a),p||OS(d,e,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=no(a),a=Es(d).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function eo(e){return'href="'+fn(e)+'"'}function Dl(e){return'link[rel="stylesheet"]['+e+"]"}function xb(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function OS(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),We(i,"link",a),Ne(i),e.head.appendChild(i))}function no(e){return'[src="'+fn(e)+'"]'}function Vl(e){return"script[async]"+e}function _b(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return i.instance=l,Ne(l),l;var d=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ne(l),We(l,"style",d),Qc(l,a.precedence,e),i.instance=l;case"stylesheet":d=eo(a.href);var p=e.querySelector(Dl(d));if(p)return i.state.loading|=4,i.instance=p,Ne(p),p;l=xb(a),(d=Qn.get(d))&&gm(l,d),p=(e.ownerDocument||e).createElement("link"),Ne(p);var _=p;return _._p=new Promise(function(S,I){_.onload=S,_.onerror=I}),We(p,"link",l),i.state.loading|=4,Qc(p,a.precedence,e),i.instance=p;case"script":return p=no(a.src),(d=e.querySelector(Vl(p)))?(i.instance=d,Ne(d),d):(l=a,(d=Qn.get(p))&&(l=x({},a),ym(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Ne(d),We(d,"link",l),e.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Qc(l,a.precedence,e));return i.instance}function Qc(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,p=d,_=0;_<l.length;_++){var S=l[_];if(S.dataset.precedence===i)p=S;else if(p!==d)break}p?p.parentNode.insertBefore(e,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function gm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function ym(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Xc=null;function Tb(e,i,a){if(Xc===null){var l=new Map,d=Xc=new Map;d.set(a,l)}else d=Xc,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var p=a[d];if(!(p[Ts]||p[Ae]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var _=p.getAttribute(i)||"";_=e+_;var S=l.get(_);S?S.push(p):l.set(_,[p])}}return l}function wb(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function PS(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Eb(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function LS(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=eo(l.href),p=i.querySelector(Dl(d));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=$c.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=p,Ne(p);return}p=i.ownerDocument||i,l=xb(l),(d=Qn.get(d))&&gm(l,d),p=p.createElement("link"),Ne(p);var _=p;_._p=new Promise(function(S,I){_.onload=S,_.onerror=I}),We(p,"link",l),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=$c.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var vm=0;function US(e,i){return e.stylesheets&&e.count===0&&Wc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Wc(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+i);0<e.imgBytes&&vm===0&&(vm=62500*bS());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wc(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>vm?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function $c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zc=null;function Wc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zc=new Map,i.forEach(BS,e),Zc=null,$c.call(e))}function BS(e,i){if(!(i.state.loading&4)){var a=Zc.get(e);if(a)var l=a.get(null);else{a=new Map,Zc.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var _=d[p];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=i.instance,_=d.getAttribute("data-precedence"),p=a.get(_)||l,p===l&&a.set(null,d),a.set(_,d),this.count++,l=$c.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),p?p.parentNode.insertBefore(d,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),i.state.loading|=4}}var Ml={$$typeof:K,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function zS(e,i,a,l,d,p,_,S,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xs(0),this.hiddenUpdates=xs(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Sb(e,i,a,l,d,p,_,S,I,Y,nt,at){return e=new zS(e,i,a,_,I,Y,nt,at,S),i=1,p===!0&&(i|=24),p=Rn(3,null,null,i),e.current=p,p.stateNode=e,i=$d(),i.refCount++,e.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:i},tf(p),e}function Ab(e){return e?(e=Ma,e):Ma}function Nb(e,i,a,l,d,p){d=Ab(d),l.context===null?l.context=d:l.pendingContext=d,l=Bi(i),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=zi(e,l,i),a!==null&&(bn(a,e,i),hl(a,e,i))}function Cb(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function bm(e,i){Cb(e,i),(e=e.alternate)&&Cb(e,i)}function Rb(e){if(e.tag===13||e.tag===31){var i=Ur(e,67108864);i!==null&&bn(i,e,67108864),bm(e,67108864)}}function jb(e){if(e.tag===13||e.tag===31){var i=In();i=Nr(i);var a=Ur(e,i);a!==null&&bn(a,e,i),bm(e,i)}}var Jc=!0;function FS(e,i,a,l){var d=B.T;B.T=null;var p=X.p;try{X.p=2,xm(e,i,a,l)}finally{X.p=p,B.T=d}}function qS(e,i,a,l){var d=B.T;B.T=null;var p=X.p;try{X.p=8,xm(e,i,a,l)}finally{X.p=p,B.T=d}}function xm(e,i,a,l){if(Jc){var d=_m(l);if(d===null)am(e,i,l,th,a),Vb(e,l);else if(GS(d,e,i,a,l))l.stopPropagation();else if(Vb(e,l),i&4&&-1<HS.indexOf(e)){for(;d!==null;){var p=Pn(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var _=vs(p.pendingLanes);if(_!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var I=1<<31-be(_);S.entanglements[1]|=I,_&=~I}Ps(p),(Kt&6)===0&&(Oc=un()+500,Nl(0))}}break;case 31:case 13:S=Ur(p,2),S!==null&&bn(S,p,2),Lc(),bm(p,2)}if(p=_m(l),p===null&&am(e,i,l,th,a),p===d)break;d=p}d!==null&&l.stopPropagation()}else am(e,i,l,null,a)}}function _m(e){return e=Ln(e),Tm(e)}var th=null;function Tm(e){if(th=null,e=ws(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=c(i),e!==null)return e;e=null}else if(a===31){if(e=m(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return th=e,null}function Db(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wr()){case Oo:return 2;case Po:return 8;case Si:case Nd:return 32;case Vu:return 268435456;default:return 32}default:return 32}}var wm=!1,Wi=null,Ji=null,tr=null,Il=new Map,kl=new Map,er=[],HS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vb(e,i){switch(e){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Il.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(i.pointerId)}}function Ol(e,i,a,l,d,p){return e===null||e.nativeEvent!==p?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Pn(i),i!==null&&Rb(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),e)}function GS(e,i,a,l,d){switch(i){case"focusin":return Wi=Ol(Wi,e,i,a,l,d),!0;case"dragenter":return Ji=Ol(Ji,e,i,a,l,d),!0;case"mouseover":return tr=Ol(tr,e,i,a,l,d),!0;case"pointerover":var p=d.pointerId;return Il.set(p,Ol(Il.get(p)||null,e,i,a,l,d)),!0;case"gotpointercapture":return p=d.pointerId,kl.set(p,Ol(kl.get(p)||null,e,i,a,l,d)),!0}return!1}function Mb(e){var i=ws(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){e.blockedOn=i,es(e.priority,function(){jb(a)});return}}else if(i===31){if(i=m(a),i!==null){e.blockedOn=i,es(e.priority,function(){jb(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function eh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=_m(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Xo=l,a.target.dispatchEvent(l),Xo=null}else return i=Pn(a),i!==null&&Rb(i),e.blockedOn=a,!1;i.shift()}return!0}function Ib(e,i,a){eh(e)&&a.delete(i)}function YS(){wm=!1,Wi!==null&&eh(Wi)&&(Wi=null),Ji!==null&&eh(Ji)&&(Ji=null),tr!==null&&eh(tr)&&(tr=null),Il.forEach(Ib),kl.forEach(Ib)}function nh(e,i){e.blockedOn===i&&(e.blockedOn=null,wm||(wm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YS)))}var sh=null;function kb(e){sh!==e&&(sh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sh===e&&(sh=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],d=e[i+2];if(typeof l!="function"){if(Tm(l||a)===null)continue;break}var p=Pn(a);p!==null&&(e.splice(i,3),i-=3,_f(p,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function so(e){function i(I){return nh(I,e)}Wi!==null&&nh(Wi,e),Ji!==null&&nh(Ji,e),tr!==null&&nh(tr,e),Il.forEach(i),kl.forEach(i);for(var a=0;a<er.length;a++){var l=er[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<er.length&&(a=er[0],a.blockedOn===null);)Mb(a),a.blockedOn===null&&er.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],p=a[l+1],_=d[Fe]||null;if(typeof p=="function")_||kb(a);else if(_){var S=null;if(p&&p.hasAttribute("formAction")){if(d=p,_=p[Fe]||null)S=_.formAction;else if(Tm(d)!==null)continue}else S=_.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),kb(a)}}}function Ob(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function Em(e){this._internalRoot=e}ih.prototype.render=Em.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=In();Nb(a,l,e,i,null,null)},ih.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Nb(e.current,2,null,e,null,null),Lc(),i[_s]=null}};function ih(e){this._internalRoot=e}ih.prototype.unstable_scheduleHydration=function(e){if(e){var i=Lu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<er.length&&i!==0&&i<er[a].priority;a++);er.splice(a,0,e),a===0&&Mb(e)}};var Pb=t.version;if(Pb!=="19.2.3")throw Error(r(527,Pb,"19.2.3"));X.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(i),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var KS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{Jn=rh.inject(KS),Ke=rh}catch{}}return Ll.createRoot=function(e,i){if(!o(e))throw Error(r(299));var a=!1,l="",d=H0,p=G0,_=Y0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Sb(e,1,!1,null,null,a,l,null,d,p,_,Ob),e[_s]=i.current,rm(e),new Em(i)},Ll.hydrateRoot=function(e,i,a){if(!o(e))throw Error(r(299));var l=!1,d="",p=H0,_=G0,S=Y0,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),i=Sb(e,1,!0,i,a??null,l,d,I,p,_,S,Ob),i.context=Ab(null),a=i.current,l=In(),l=Nr(l),d=Bi(l),d.callback=null,zi(a,d,l),a=l,i.current.lanes=a,Sr(i,a),Ps(i),e[_s]=i.current,rm(e),new ih(i)},Ll.version="19.2.3",Ll}var Kb;function sA(){if(Kb)return Nm.exports;Kb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Nm.exports=nA(),Nm.exports}var iA=sA();const rA=R_(iA),aA=()=>{};var Qb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=function(n){const t=[];let s=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?t[s++]=o:o<2048?(t[s++]=o>>6|192,t[s++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),t[s++]=o>>18|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128,t[s++]=o&63|128):(t[s++]=o>>12|224,t[s++]=o>>6&63|128,t[s++]=o&63|128)}return t},oA=function(n){const t=[];let s=0,r=0;for(;s<n.length;){const o=n[s++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[s++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[s++],c=n[s++],m=n[s++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=n[s++],c=n[s++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},D_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const u=n[o],c=o+1<n.length,m=c?n[o+1]:0,g=o+2<n.length,y=g?n[o+2]:0,b=u>>2,x=(u&3)<<4|m>>4;let w=(m&15)<<2|y>>6,V=y&63;g||(V=64,c||(w=64)),r.push(s[b],s[x],s[w],s[V])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(j_(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):oA(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const u=s[n.charAt(o++)],m=o<n.length?s[n.charAt(o)]:0;++o;const y=o<n.length?s[n.charAt(o)]:64;++o;const x=o<n.length?s[n.charAt(o)]:64;if(++o,u==null||m==null||y==null||x==null)throw new lA;const w=u<<2|m>>4;if(r.push(w),y!==64){const V=m<<4&240|y>>2;if(r.push(V),x!==64){const k=y<<6&192|x;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uA=function(n){const t=j_(n);return D_.encodeByteArray(t,!0)},Rh=function(n){return uA(n).replace(/\./g,"")},cA=function(n){try{return D_.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=()=>hA().__FIREBASE_DEFAULTS__,fA=()=>{if(typeof process>"u"||typeof Qb>"u")return;const n=Qb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&cA(n[1]);return t&&JSON.parse(t)},Jp=()=>{try{return aA()||dA()||fA()||mA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pA=n=>{var t,s;return(s=(t=Jp())==null?void 0:t.emulatorHosts)==null?void 0:s[n]},V_=n=>{const t=pA(n);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),r]:[t.substring(0,s),r]},M_=()=>{var n;return(n=Jp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function I_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=t||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Rh(JSON.stringify(s)),Rh(JSON.stringify(c)),""].join(".")}const Kl={};function yA(){const n={prod:[],emulator:[]};for(const t of Object.keys(Kl))Kl[t]?n.emulator.push(t):n.prod.push(t);return n}function vA(n){let t=document.getElementById(n),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),s=!0),{created:s,element:t}}let Xb=!1;function O_(n,t){if(typeof window>"u"||typeof document>"u"||!td(window.location.host)||Kl[n]===t||Kl[n]||Xb)return;Kl[n]=t;function s(w){return`__firebase__banner__${w}`}const r="__firebase__banner",u=yA().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,V){w.setAttribute("width","24"),w.setAttribute("id",V),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Xb=!0,c()},w}function b(w,V){w.setAttribute("id",V),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function x(){const w=vA(r),V=s("text"),k=document.getElementById(V)||document.createElement("span"),U=s("learnmore"),L=document.getElementById(U)||document.createElement("a"),z=s("preprendIcon"),W=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const K=w.element;m(K),b(L,U);const tt=y();g(W,z),K.append(W,k,L,tt),document.body.appendChild(K)}u?(k.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xA(){var t;const n=(t=Jp())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _A(){return!xA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TA(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((n,t)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="FirebaseError";class ca extends Error{constructor(t,s,r){super(s),this.code=t,this.customData=r,this.name=EA,Object.setPrototypeOf(this,ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P_.prototype.create)}}class P_{constructor(t,s,r){this.service=t,this.serviceName=s,this.errors=r}create(t,...s){const r=s[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?SA(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new ca(o,m,r)}}function SA(n,t){return n.replace(AA,(s,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const AA=/\{\$([^}]+)}/g;function jh(n,t){if(n===t)return!0;const s=Object.keys(n),r=Object.keys(t);for(const o of s){if(!r.includes(o))return!1;const u=n[o],c=t[o];if($b(u)&&$b(c)){if(!jh(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function $b(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n){return n&&n._delegate?n._delegate:n}class yo{constructor(t,s,r){this.name=t,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const r=new gA;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(RA(t))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Jr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Jr){return this.instances.has(t)}getOptions(t=Jr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CA(t),options:s}),this.instances.set(t,r),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Jr){return this.component?this.component.multipleInstances?t:Jr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CA(n){return n===Jr?void 0:n}function RA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new NA(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qt||(qt={}));const DA={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},VA=qt.INFO,MA={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},IA=(n,t,...s)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),o=MA[t];if(o)console[o](`[${r}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class L_{constructor(t){this.name=t,this._logLevel=VA,this._logHandler=IA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...t),this._logHandler(this,qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...t),this._logHandler(this,qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...t),this._logHandler(this,qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...t),this._logHandler(this,qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...t),this._logHandler(this,qt.ERROR,...t)}}const kA=(n,t)=>t.some(s=>n instanceof s);let Zb,Wb;function OA(){return Zb||(Zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PA(){return Wb||(Wb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U_=new WeakMap,rp=new WeakMap,B_=new WeakMap,Dm=new WeakMap,tg=new WeakMap;function LA(n){const t=new Promise((s,r)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",c)},u=()=>{s(ar(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",c)});return t.then(s=>{s instanceof IDBCursor&&U_.set(s,n)}).catch(()=>{}),tg.set(t,n),t}function UA(n){if(rp.has(n))return;const t=new Promise((s,r)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",c),n.removeEventListener("abort",c)},u=()=>{s(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",c),n.addEventListener("abort",c)});rp.set(n,t)}let ap={get(n,t,s){if(n instanceof IDBTransaction){if(t==="done")return rp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||B_.get(n);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ar(n[t])},set(n,t,s){return n[t]=s,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function BA(n){ap=n(ap)}function zA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const r=n.call(Vm(this),t,...s);return B_.set(r,t.sort?t.sort():[t]),ar(r)}:PA().includes(n)?function(...t){return n.apply(Vm(this),t),ar(U_.get(this))}:function(...t){return ar(n.apply(Vm(this),t))}}function FA(n){return typeof n=="function"?zA(n):(n instanceof IDBTransaction&&UA(n),kA(n,OA())?new Proxy(n,ap):n)}function ar(n){if(n instanceof IDBRequest)return LA(n);if(Dm.has(n))return Dm.get(n);const t=FA(n);return t!==n&&(Dm.set(n,t),tg.set(t,n)),t}const Vm=n=>tg.get(n);function qA(n,t,{blocked:s,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(n,t),m=ar(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ar(c.result),g.oldVersion,g.newVersion,ar(c.transaction),g)}),s&&c.addEventListener("blocked",g=>s(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const HA=["get","getKey","getAll","getAllKeys","count"],GA=["put","add","delete","clear"],Mm=new Map;function Jb(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Mm.get(t))return Mm.get(t);const s=t.replace(/FromIndex$/,""),r=t!==s,o=GA.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||HA.includes(s)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[s](...m),o&&g.done]))[0]};return Mm.set(t,u),u}BA(n=>({...n,get:(t,s,r)=>Jb(t,s)||n.get(t,s,r),has:(t,s)=>!!Jb(t,s)||n.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(KA(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function KA(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const op="@firebase/app",tx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new L_("@firebase/app"),QA="@firebase/app-compat",XA="@firebase/analytics-compat",$A="@firebase/analytics",ZA="@firebase/app-check-compat",WA="@firebase/app-check",JA="@firebase/auth",tN="@firebase/auth-compat",eN="@firebase/database",nN="@firebase/data-connect",sN="@firebase/database-compat",iN="@firebase/functions",rN="@firebase/functions-compat",aN="@firebase/installations",oN="@firebase/installations-compat",lN="@firebase/messaging",uN="@firebase/messaging-compat",cN="@firebase/performance",hN="@firebase/performance-compat",dN="@firebase/remote-config",fN="@firebase/remote-config-compat",mN="@firebase/storage",pN="@firebase/storage-compat",gN="@firebase/firestore",yN="@firebase/ai",vN="@firebase/firestore-compat",bN="firebase",xN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]",_N={[op]:"fire-core",[QA]:"fire-core-compat",[$A]:"fire-analytics",[XA]:"fire-analytics-compat",[WA]:"fire-app-check",[ZA]:"fire-app-check-compat",[JA]:"fire-auth",[tN]:"fire-auth-compat",[eN]:"fire-rtdb",[nN]:"fire-data-connect",[sN]:"fire-rtdb-compat",[iN]:"fire-fn",[rN]:"fire-fn-compat",[aN]:"fire-iid",[oN]:"fire-iid-compat",[lN]:"fire-fcm",[uN]:"fire-fcm-compat",[cN]:"fire-perf",[hN]:"fire-perf-compat",[dN]:"fire-rc",[fN]:"fire-rc-compat",[mN]:"fire-gcs",[pN]:"fire-gcs-compat",[gN]:"fire-fst",[vN]:"fire-fst-compat",[yN]:"fire-vertex","fire-js":"fire-js",[bN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map,TN=new Map,up=new Map;function ex(n,t){try{n.container.addComponent(t)}catch(s){bi.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,s)}}function nu(n){const t=n.name;if(up.has(t))return bi.debug(`There were multiple attempts to register component ${t}.`),!1;up.set(t,n);for(const s of Dh.values())ex(s,n);for(const s of TN.values())ex(s,n);return!0}function z_(n,t){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(t)}function F_(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new P_("app","Firebase",wN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(t,s,r){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=xN;function H_(n,t={}){let s=n;typeof t!="object"&&(t={name:t});const r={name:lp,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw or.create("bad-app-name",{appName:String(o)});if(s||(s=M_()),!s)throw or.create("no-options");const u=Dh.get(o);if(u){if(jh(s,u.options)&&jh(r,u.config))return u;throw or.create("duplicate-app",{appName:o})}const c=new jA(o);for(const g of up.values())c.addComponent(g);const m=new EN(s,r,c);return Dh.set(o,m),m}function G_(n=lp){const t=Dh.get(n);if(!t&&n===lp&&M_())return H_();if(!t)throw or.create("no-app",{appName:n});return t}function lr(n,t,s){let r=_N[n]??n;s&&(r+=`-${s}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),bi.warn(c.join(" "));return}nu(new yo(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="firebase-heartbeat-database",AN=1,su="firebase-heartbeat-store";let Im=null;function Y_(){return Im||(Im=qA(SN,AN,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(su)}catch(s){console.warn(s)}}}}).catch(n=>{throw or.create("idb-open",{originalErrorMessage:n.message})})),Im}async function NN(n){try{const s=(await Y_()).transaction(su),r=await s.objectStore(su).get(K_(n));return await s.done,r}catch(t){if(t instanceof ca)bi.warn(t.message);else{const s=or.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});bi.warn(s.message)}}}async function nx(n,t){try{const r=(await Y_()).transaction(su,"readwrite");await r.objectStore(su).put(t,K_(n)),await r.done}catch(s){if(s instanceof ca)bi.warn(s.message);else{const r=or.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});bi.warn(r.message)}}}function K_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=1024,RN=30;class jN{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new VN(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,s;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=sx();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>RN){const c=MN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bi.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=sx(),{heartbeatsToSend:r,unsentEntries:o}=DN(this._heartbeatsCache.heartbeats),u=Rh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(s){return bi.warn(s),""}}}function sx(){return new Date().toISOString().substring(0,10)}function DN(n,t=CN){const s=[];let r=n.slice();for(const o of n){const u=s.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),ix(s)>t){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),ix(s)>t){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class VN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TA()?wA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await NN(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return nx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return nx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function ix(n){return Rh(JSON.stringify({version:2,heartbeats:n})).length}function MN(n){if(n.length===0)return-1;let t=0,s=n[0].date;for(let r=1;r<n.length;r++)n[r].date<s&&(s=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(n){nu(new yo("platform-logger",t=>new YA(t),"PRIVATE")),nu(new yo("heartbeat",t=>new jN(t),"PRIVATE")),lr(op,tx,n),lr(op,tx,"esm2020"),lr("fire-js","")}IN("");var rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,Q_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(j,C){function A(){}A.prototype=C.prototype,j.F=C.prototype,j.prototype=new A,j.prototype.constructor=j,j.D=function(N,M,E){for(var D=Array(arguments.length-2),st=2;st<arguments.length;st++)D[st-2]=arguments[st];return C.prototype[M].apply(N,D)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,C,A){A||(A=0);const N=Array(16);if(typeof C=="string")for(var M=0;M<16;++M)N[M]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(M=0;M<16;++M)N[M]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=j.g[0],A=j.g[1],M=j.g[2];let E=j.g[3],D;D=C+(E^A&(M^E))+N[0]+3614090360&4294967295,C=A+(D<<7&4294967295|D>>>25),D=E+(M^C&(A^M))+N[1]+3905402710&4294967295,E=C+(D<<12&4294967295|D>>>20),D=M+(A^E&(C^A))+N[2]+606105819&4294967295,M=E+(D<<17&4294967295|D>>>15),D=A+(C^M&(E^C))+N[3]+3250441966&4294967295,A=M+(D<<22&4294967295|D>>>10),D=C+(E^A&(M^E))+N[4]+4118548399&4294967295,C=A+(D<<7&4294967295|D>>>25),D=E+(M^C&(A^M))+N[5]+1200080426&4294967295,E=C+(D<<12&4294967295|D>>>20),D=M+(A^E&(C^A))+N[6]+2821735955&4294967295,M=E+(D<<17&4294967295|D>>>15),D=A+(C^M&(E^C))+N[7]+4249261313&4294967295,A=M+(D<<22&4294967295|D>>>10),D=C+(E^A&(M^E))+N[8]+1770035416&4294967295,C=A+(D<<7&4294967295|D>>>25),D=E+(M^C&(A^M))+N[9]+2336552879&4294967295,E=C+(D<<12&4294967295|D>>>20),D=M+(A^E&(C^A))+N[10]+4294925233&4294967295,M=E+(D<<17&4294967295|D>>>15),D=A+(C^M&(E^C))+N[11]+2304563134&4294967295,A=M+(D<<22&4294967295|D>>>10),D=C+(E^A&(M^E))+N[12]+1804603682&4294967295,C=A+(D<<7&4294967295|D>>>25),D=E+(M^C&(A^M))+N[13]+4254626195&4294967295,E=C+(D<<12&4294967295|D>>>20),D=M+(A^E&(C^A))+N[14]+2792965006&4294967295,M=E+(D<<17&4294967295|D>>>15),D=A+(C^M&(E^C))+N[15]+1236535329&4294967295,A=M+(D<<22&4294967295|D>>>10),D=C+(M^E&(A^M))+N[1]+4129170786&4294967295,C=A+(D<<5&4294967295|D>>>27),D=E+(A^M&(C^A))+N[6]+3225465664&4294967295,E=C+(D<<9&4294967295|D>>>23),D=M+(C^A&(E^C))+N[11]+643717713&4294967295,M=E+(D<<14&4294967295|D>>>18),D=A+(E^C&(M^E))+N[0]+3921069994&4294967295,A=M+(D<<20&4294967295|D>>>12),D=C+(M^E&(A^M))+N[5]+3593408605&4294967295,C=A+(D<<5&4294967295|D>>>27),D=E+(A^M&(C^A))+N[10]+38016083&4294967295,E=C+(D<<9&4294967295|D>>>23),D=M+(C^A&(E^C))+N[15]+3634488961&4294967295,M=E+(D<<14&4294967295|D>>>18),D=A+(E^C&(M^E))+N[4]+3889429448&4294967295,A=M+(D<<20&4294967295|D>>>12),D=C+(M^E&(A^M))+N[9]+568446438&4294967295,C=A+(D<<5&4294967295|D>>>27),D=E+(A^M&(C^A))+N[14]+3275163606&4294967295,E=C+(D<<9&4294967295|D>>>23),D=M+(C^A&(E^C))+N[3]+4107603335&4294967295,M=E+(D<<14&4294967295|D>>>18),D=A+(E^C&(M^E))+N[8]+1163531501&4294967295,A=M+(D<<20&4294967295|D>>>12),D=C+(M^E&(A^M))+N[13]+2850285829&4294967295,C=A+(D<<5&4294967295|D>>>27),D=E+(A^M&(C^A))+N[2]+4243563512&4294967295,E=C+(D<<9&4294967295|D>>>23),D=M+(C^A&(E^C))+N[7]+1735328473&4294967295,M=E+(D<<14&4294967295|D>>>18),D=A+(E^C&(M^E))+N[12]+2368359562&4294967295,A=M+(D<<20&4294967295|D>>>12),D=C+(A^M^E)+N[5]+4294588738&4294967295,C=A+(D<<4&4294967295|D>>>28),D=E+(C^A^M)+N[8]+2272392833&4294967295,E=C+(D<<11&4294967295|D>>>21),D=M+(E^C^A)+N[11]+1839030562&4294967295,M=E+(D<<16&4294967295|D>>>16),D=A+(M^E^C)+N[14]+4259657740&4294967295,A=M+(D<<23&4294967295|D>>>9),D=C+(A^M^E)+N[1]+2763975236&4294967295,C=A+(D<<4&4294967295|D>>>28),D=E+(C^A^M)+N[4]+1272893353&4294967295,E=C+(D<<11&4294967295|D>>>21),D=M+(E^C^A)+N[7]+4139469664&4294967295,M=E+(D<<16&4294967295|D>>>16),D=A+(M^E^C)+N[10]+3200236656&4294967295,A=M+(D<<23&4294967295|D>>>9),D=C+(A^M^E)+N[13]+681279174&4294967295,C=A+(D<<4&4294967295|D>>>28),D=E+(C^A^M)+N[0]+3936430074&4294967295,E=C+(D<<11&4294967295|D>>>21),D=M+(E^C^A)+N[3]+3572445317&4294967295,M=E+(D<<16&4294967295|D>>>16),D=A+(M^E^C)+N[6]+76029189&4294967295,A=M+(D<<23&4294967295|D>>>9),D=C+(A^M^E)+N[9]+3654602809&4294967295,C=A+(D<<4&4294967295|D>>>28),D=E+(C^A^M)+N[12]+3873151461&4294967295,E=C+(D<<11&4294967295|D>>>21),D=M+(E^C^A)+N[15]+530742520&4294967295,M=E+(D<<16&4294967295|D>>>16),D=A+(M^E^C)+N[2]+3299628645&4294967295,A=M+(D<<23&4294967295|D>>>9),D=C+(M^(A|~E))+N[0]+4096336452&4294967295,C=A+(D<<6&4294967295|D>>>26),D=E+(A^(C|~M))+N[7]+1126891415&4294967295,E=C+(D<<10&4294967295|D>>>22),D=M+(C^(E|~A))+N[14]+2878612391&4294967295,M=E+(D<<15&4294967295|D>>>17),D=A+(E^(M|~C))+N[5]+4237533241&4294967295,A=M+(D<<21&4294967295|D>>>11),D=C+(M^(A|~E))+N[12]+1700485571&4294967295,C=A+(D<<6&4294967295|D>>>26),D=E+(A^(C|~M))+N[3]+2399980690&4294967295,E=C+(D<<10&4294967295|D>>>22),D=M+(C^(E|~A))+N[10]+4293915773&4294967295,M=E+(D<<15&4294967295|D>>>17),D=A+(E^(M|~C))+N[1]+2240044497&4294967295,A=M+(D<<21&4294967295|D>>>11),D=C+(M^(A|~E))+N[8]+1873313359&4294967295,C=A+(D<<6&4294967295|D>>>26),D=E+(A^(C|~M))+N[15]+4264355552&4294967295,E=C+(D<<10&4294967295|D>>>22),D=M+(C^(E|~A))+N[6]+2734768916&4294967295,M=E+(D<<15&4294967295|D>>>17),D=A+(E^(M|~C))+N[13]+1309151649&4294967295,A=M+(D<<21&4294967295|D>>>11),D=C+(M^(A|~E))+N[4]+4149444226&4294967295,C=A+(D<<6&4294967295|D>>>26),D=E+(A^(C|~M))+N[11]+3174756917&4294967295,E=C+(D<<10&4294967295|D>>>22),D=M+(C^(E|~A))+N[2]+718787259&4294967295,M=E+(D<<15&4294967295|D>>>17),D=A+(E^(M|~C))+N[9]+3951481745&4294967295,j.g[0]=j.g[0]+C&4294967295,j.g[1]=j.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+M&4294967295,j.g[3]=j.g[3]+E&4294967295}r.prototype.v=function(j,C){C===void 0&&(C=j.length);const A=C-this.blockSize,N=this.C;let M=this.h,E=0;for(;E<C;){if(M==0)for(;E<=A;)o(this,j,E),E+=this.blockSize;if(typeof j=="string"){for(;E<C;)if(N[M++]=j.charCodeAt(E++),M==this.blockSize){o(this,N),M=0;break}}else for(;E<C;)if(N[M++]=j[E++],M==this.blockSize){o(this,N),M=0;break}}this.h=M,this.o+=C},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var C=1;C<j.length-8;++C)j[C]=0;C=this.o*8;for(var A=j.length-8;A<j.length;++A)j[A]=C&255,C/=256;for(this.v(j),j=Array(16),C=0,A=0;A<4;++A)for(let N=0;N<32;N+=8)j[C++]=this.g[A]>>>N&255;return j};function u(j,C){var A=m;return Object.prototype.hasOwnProperty.call(A,j)?A[j]:A[j]=C(j)}function c(j,C){this.h=C;const A=[];let N=!0;for(let M=j.length-1;M>=0;M--){const E=j[M]|0;N&&E==C||(A[M]=E,N=!1)}this.g=A}var m={};function g(j){return-128<=j&&j<128?u(j,function(C){return new c([C|0],C<0?-1:0)}):new c([j|0],j<0?-1:0)}function y(j){if(isNaN(j)||!isFinite(j))return x;if(j<0)return L(y(-j));const C=[];let A=1;for(let N=0;j>=A;N++)C[N]=j/A|0,A*=4294967296;return new c(C,0)}function b(j,C){if(j.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(j.charAt(0)=="-")return L(b(j.substring(1),C));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(C,8));let N=x;for(let E=0;E<j.length;E+=8){var M=Math.min(8,j.length-E);const D=parseInt(j.substring(E,E+M),C);M<8?(M=y(Math.pow(C,M)),N=N.j(M).add(y(D))):(N=N.j(A),N=N.add(y(D)))}return N}var x=g(0),w=g(1),V=g(16777216);n=c.prototype,n.m=function(){if(U(this))return-L(this).m();let j=0,C=1;for(let A=0;A<this.g.length;A++){const N=this.i(A);j+=(N>=0?N:4294967296+N)*C,C*=4294967296}return j},n.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(k(this))return"0";if(U(this))return"-"+L(this).toString(j);const C=y(Math.pow(j,6));var A=this;let N="";for(;;){const M=tt(A,C).g;A=z(A,M.j(C));let E=((A.g.length>0?A.g[0]:A.h)>>>0).toString(j);if(A=M,k(A))return E+N;for(;E.length<6;)E="0"+E;N=E+N}},n.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function k(j){if(j.h!=0)return!1;for(let C=0;C<j.g.length;C++)if(j.g[C]!=0)return!1;return!0}function U(j){return j.h==-1}n.l=function(j){return j=z(this,j),U(j)?-1:k(j)?0:1};function L(j){const C=j.g.length,A=[];for(let N=0;N<C;N++)A[N]=~j.g[N];return new c(A,~j.h).add(w)}n.abs=function(){return U(this)?L(this):this},n.add=function(j){const C=Math.max(this.g.length,j.g.length),A=[];let N=0;for(let M=0;M<=C;M++){let E=N+(this.i(M)&65535)+(j.i(M)&65535),D=(E>>>16)+(this.i(M)>>>16)+(j.i(M)>>>16);N=D>>>16,E&=65535,D&=65535,A[M]=D<<16|E}return new c(A,A[A.length-1]&-2147483648?-1:0)};function z(j,C){return j.add(L(C))}n.j=function(j){if(k(this)||k(j))return x;if(U(this))return U(j)?L(this).j(L(j)):L(L(this).j(j));if(U(j))return L(this.j(L(j)));if(this.l(V)<0&&j.l(V)<0)return y(this.m()*j.m());const C=this.g.length+j.g.length,A=[];for(var N=0;N<2*C;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(let M=0;M<j.g.length;M++){const E=this.i(N)>>>16,D=this.i(N)&65535,st=j.i(M)>>>16,ut=j.i(M)&65535;A[2*N+2*M]+=D*ut,W(A,2*N+2*M),A[2*N+2*M+1]+=E*ut,W(A,2*N+2*M+1),A[2*N+2*M+1]+=D*st,W(A,2*N+2*M+1),A[2*N+2*M+2]+=E*st,W(A,2*N+2*M+2)}for(j=0;j<C;j++)A[j]=A[2*j+1]<<16|A[2*j];for(j=C;j<2*C;j++)A[j]=0;return new c(A,0)};function W(j,C){for(;(j[C]&65535)!=j[C];)j[C+1]+=j[C]>>>16,j[C]&=65535,C++}function K(j,C){this.g=j,this.h=C}function tt(j,C){if(k(C))throw Error("division by zero");if(k(j))return new K(x,x);if(U(j))return C=tt(L(j),C),new K(L(C.g),L(C.h));if(U(C))return C=tt(j,L(C)),new K(L(C.g),C.h);if(j.g.length>30){if(U(j)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var A=w,N=C;N.l(j)<=0;)A=et(A),N=et(N);var M=J(A,1),E=J(N,1);for(N=J(N,2),A=J(A,2);!k(N);){var D=E.add(N);D.l(j)<=0&&(M=M.add(A),E=D),N=J(N,1),A=J(A,1)}return C=z(j,M.j(C)),new K(M,C)}for(M=x;j.l(C)>=0;){for(A=Math.max(1,Math.floor(j.m()/C.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),E=y(A),D=E.j(C);U(D)||D.l(j)>0;)A-=N,E=y(A),D=E.j(C);k(E)&&(E=w),M=M.add(E),j=z(j,D)}return new K(M,j)}n.B=function(j){return tt(this,j).h},n.and=function(j){const C=Math.max(this.g.length,j.g.length),A=[];for(let N=0;N<C;N++)A[N]=this.i(N)&j.i(N);return new c(A,this.h&j.h)},n.or=function(j){const C=Math.max(this.g.length,j.g.length),A=[];for(let N=0;N<C;N++)A[N]=this.i(N)|j.i(N);return new c(A,this.h|j.h)},n.xor=function(j){const C=Math.max(this.g.length,j.g.length),A=[];for(let N=0;N<C;N++)A[N]=this.i(N)^j.i(N);return new c(A,this.h^j.h)};function et(j){const C=j.g.length+1,A=[];for(let N=0;N<C;N++)A[N]=j.i(N)<<1|j.i(N-1)>>>31;return new c(A,j.h)}function J(j,C){const A=C>>5;C%=32;const N=j.g.length-A,M=[];for(let E=0;E<N;E++)M[E]=C>0?j.i(E+A)>>>C|j.i(E+A+1)<<32-C:j.i(E+A);return new c(M,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Q_=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=b,ur=c}).apply(typeof rx<"u"?rx:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X_,zl,$_,gh,cp,Z_,W_,J_;(function(){var n,t=Object.defineProperty;function s(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var v=0;v<h.length;++v){var T=h[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=s(this);function o(h,v){if(v)t:{var T=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var H=h[R];if(!(H in T))break t;T=T[H]}h=h[h.length-1],R=T[h],v=v(R),v!=R&&v!=null&&t(T,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var T=[],R;for(R in v)Object.prototype.hasOwnProperty.call(v,R)&&T.push([R,v[R]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,T){return h.call.apply(h.bind,arguments)}function y(h,v,T){return y=g,y.apply(null,arguments)}function b(h,v){var T=Array.prototype.slice.call(arguments,1);return function(){var R=T.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function x(h,v){function T(){}T.prototype=v.prototype,h.Z=v.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(R,H,$){for(var ht=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)ht[jt-2]=arguments[jt];return v.prototype[H].apply(R,ht)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function V(h){const v=h.length;if(v>0){const T=Array(v);for(let R=0;R<v;R++)T[R]=h[R];return T}return[]}function k(h,v){for(let R=1;R<arguments.length;R++){const H=arguments[R];var T=typeof H;if(T=T!="object"?T:H?Array.isArray(H)?"array":T:"null",T=="array"||T=="object"&&typeof H.length=="number"){T=h.length||0;const $=H.length||0;h.length=T+$;for(let ht=0;ht<$;ht++)h[T+ht]=H[ht]}else h.push(H)}}class U{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){c.setTimeout(()=>{throw h},0)}function z(){var h=j;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class W{constructor(){this.h=this.g=null}add(v,T){const R=K.get();R.set(v,T),this.h?this.h.next=R:this.g=R,this.h=R}}var K=new U(()=>new tt,h=>h.reset());class tt{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let et,J=!1,j=new W,C=()=>{const h=Promise.resolve(void 0);et=()=>{h.then(A)}};function A(){for(var h;h=z();){try{h.h.call(h.g)}catch(T){L(T)}var v=K;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}J=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var E=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,v),c.removeEventListener("test",T,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function st(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}x(st,M),st.prototype.init=function(h,v){const T=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(T=="mouseover"?v=h.fromElement:T=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&st.Z.h.call(this)},st.prototype.h=function(){st.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ut="closure_listenable_"+(Math.random()*1e6|0),B=0;function X(h,v,T,R,H){this.listener=h,this.proxy=null,this.src=v,this.type=T,this.capture=!!R,this.ha=H,this.key=++B,this.da=this.fa=!1}function ct(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Tt(h,v,T){for(const R in h)v.call(T,h[R],R,h)}function Et(h,v){for(const T in h)v.call(void 0,h[T],T,h)}function O(h){const v={};for(const T in h)v[T]=h[T];return v}const rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(h,v){let T,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(T in R)h[T]=R[T];for(let $=0;$<rt.length;$++)T=rt[$],Object.prototype.hasOwnProperty.call(R,T)&&(h[T]=R[T])}}function mt(h){this.src=h,this.g={},this.h=0}mt.prototype.add=function(h,v,T,R,H){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const ht=At(h,v,R,H);return ht>-1?(v=h[ht],T||(v.fa=!1)):(v=new X(v,this.src,$,!!R,H),v.fa=T,h.push(v)),v};function vt(h,v){const T=v.type;if(T in h.g){var R=h.g[T],H=Array.prototype.indexOf.call(R,v,void 0),$;($=H>=0)&&Array.prototype.splice.call(R,H,1),$&&(ct(v),h.g[T].length==0&&(delete h.g[T],h.h--))}}function At(h,v,T,R){for(let H=0;H<h.length;++H){const $=h[H];if(!$.da&&$.listener==v&&$.capture==!!T&&$.ha==R)return H}return-1}var zt="closure_lm_"+(Math.random()*1e6|0),Pe={};function ue(h,v,T,R,H){if(Array.isArray(v)){for(let $=0;$<v.length;$++)ue(h,v[$],T,R,H);return null}return T=ko(T),h&&h[ut]?h.J(v,T,m(R)?!!R.capture:!1,H):_r(h,v,T,!1,R,H)}function _r(h,v,T,R,H,$){if(!v)throw Error("Invalid event type");const ht=m(H)?!!H.capture:!!H;let jt=Tr(h);if(jt||(h[zt]=jt=new mt(h)),T=jt.add(v,T,R,ht,$),T.proxy)return T;if(R=ma(),T.proxy=R,R.src=h,R.listener=T,h.addEventListener)E||(H=ht),H===void 0&&(H=!1),h.addEventListener(v.toString(),R,H);else if(h.attachEvent)h.attachEvent(gs(v.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ma(){function h(T){return v.call(h.src,h.listener,T)}const v=Mo;return h}function pa(h,v,T,R,H){if(Array.isArray(v))for(var $=0;$<v.length;$++)pa(h,v[$],T,R,H);else R=m(R)?!!R.capture:!!R,T=ko(T),h&&h[ut]?(h=h.i,$=String(v).toString(),$ in h.g&&(v=h.g[$],T=At(v,T,R,H),T>-1&&(ct(v[T]),Array.prototype.splice.call(v,T,1),v.length==0&&(delete h.g[$],h.h--)))):h&&(h=Tr(h))&&(v=h.g[v.toString()],h=-1,v&&(h=At(v,T,R,H)),(T=h>-1?v[h]:null)&&ga(T))}function ga(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[ut])vt(v.i,h);else{var T=h.type,R=h.proxy;v.removeEventListener?v.removeEventListener(T,R,h.capture):v.detachEvent?v.detachEvent(gs(T),R):v.addListener&&v.removeListener&&v.removeListener(R),(T=Tr(v))?(vt(T,h),T.h==0&&(T.src=null,v[zt]=null)):ct(h)}}}function gs(h){return h in Pe?Pe[h]:Pe[h]="on"+h}function Mo(h,v){if(h.da)h=!0;else{v=new st(v,this);const T=h.listener,R=h.ha||h.src;h.fa&&ga(h),h=T.call(R,v)}return h}function Tr(h){return h=h[zt],h instanceof mt?h:null}var Io="__closure_events_fn_"+(Math.random()*1e9>>>0);function ko(h){return typeof h=="function"?h:(h[Io]||(h[Io]=function(v){return h.handleEvent(v)}),h[Io])}function Ee(){N.call(this),this.i=new mt(this),this.M=this,this.G=null}x(Ee,N),Ee.prototype[ut]=!0,Ee.prototype.removeEventListener=function(h,v,T,R){pa(this,h,v,T,R)};function Le(h,v){var T,R=h.G;if(R)for(T=[];R;R=R.G)T.push(R);if(h=h.M,R=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var H=v;v=new M(R,h),dt(v,H)}H=!0;let $,ht;if(T)for(ht=T.length-1;ht>=0;ht--)$=v.g=T[ht],H=Ei($,R,!0,v)&&H;if($=v.g=h,H=Ei($,R,!0,v)&&H,H=Ei($,R,!1,v)&&H,T)for(ht=0;ht<T.length;ht++)$=v.g=T[ht],H=Ei($,R,!1,v)&&H}Ee.prototype.N=function(){if(Ee.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const T=h.g[v];for(let R=0;R<T.length;R++)ct(T[R]);delete h.g[v],h.h--}}this.G=null},Ee.prototype.J=function(h,v,T,R){return this.i.add(String(h),v,!1,T,R)},Ee.prototype.K=function(h,v,T,R){return this.i.add(String(h),v,!0,T,R)};function Ei(h,v,T,R){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let H=!0;for(let $=0;$<v.length;++$){const ht=v[$];if(ht&&!ht.da&&ht.capture==T){const jt=ht.listener,xe=ht.ha||ht.src;ht.fa&&vt(h.i,ht),H=jt.call(xe,R)!==!1&&H}}return H&&!R.defaultPrevented}function Ad(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(h,v||0)}function Du(h){h.g=Ad(()=>{h.g=null,h.i&&(h.i=!1,Du(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class un extends N{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Du(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(h){N.call(this),this.h=h,this.g={}}x(wr,N);var Oo=[];function Po(h){Tt(h.g,function(v,T){this.g.hasOwnProperty(T)&&ga(v)},h),h.g={}}wr.prototype.N=function(){wr.Z.N.call(this),Po(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Si=c.JSON.stringify,Nd=c.JSON.parse,Vu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Mu(){}function Iu(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ke(){M.call(this,"d")}x(Ke,M);function On(){M.call(this,"c")}x(On,M);var be={},ku=null;function ya(){return ku=ku||new Ee}be.Ia="serverreachability";function Ou(h){M.call(this,be.Ia,h)}x(Ou,M);function ys(h){const v=ya();Le(v,new Ou(v))}be.STAT_EVENT="statevent";function Er(h,v){M.call(this,be.STAT_EVENT,h),this.stat=v}x(Er,M);function Se(h){const v=ya();Le(v,new Er(v,h))}be.Ja="timingevent";function vs(h,v){M.call(this,be.Ja,h),this.size=v}x(vs,M);function bs(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function ts(){this.g=!0}ts.prototype.ua=function(){this.g=!1};function Cd(h,v,T,R,H,$){h.info(function(){if(h.g)if($){var ht="",jt=$.split("&");for(let Yt=0;Yt<jt.length;Yt++){var xe=jt[Yt].split("=");if(xe.length>1){const ce=xe[0];xe=xe[1];const Bn=ce.split("_");ht=Bn.length>=2&&Bn[1]=="type"?ht+(ce+"="+xe+"&"):ht+(ce+"=redacted&")}}}else ht=null;else ht=$;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+v+`
`+T+`
`+ht})}function Pu(h,v,T,R,H,$,ht){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+v+`
`+T+`
`+$+" "+ht})}function xs(h,v,T,R){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Rd(h,T)+(R?" "+R:"")})}function Sr(h,v){h.info(function(){return"TIMEOUT: "+v})}ts.prototype.info=function(){};function Rd(h,v){if(!h.g)return v;if(!v)return null;try{const $=JSON.parse(v);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var T=$[h];if(!(T.length<2)){var R=T[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ht=1;ht<R.length;ht++)R[ht]=""}}}}return Si($)}catch{return v}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uo;function Nr(){}x(Nr,Mu),Nr.prototype.g=function(){return new XMLHttpRequest},Uo=new Nr;function Js(h){return encodeURIComponent(String(h))}function Lu(h){var v=1;h=h.split(":");const T=[];for(;v>0&&h.length;)T.push(h.shift()),v--;return h.length&&T.push(h.join(":")),T}function es(h,v,T,R){this.j=h,this.i=v,this.l=T,this.S=R||1,this.V=new wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var Ae={},Fe={};function _s(h,v,T){h.M=1,h.A=Cr(Ce(v)),h.u=T,h.R=!0,va(h,null)}function va(h,v){h.F=Date.now(),Ts(h),h.B=Ce(h.A);var T=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Ta(T.i,"t",R),h.C=0,T=h.j.L,h.h=new ns,h.g=Ju(h.j,T?v:null,!h.u),h.P>0&&(h.O=new un(y(h.Y,h,h.g),h.P)),v=h.V,T=h.g,R=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(Oo[0]=H.toString()),H=Oo);for(let $=0;$<H.length;$++){const ht=ue(T,H[$],R||v.handleEvent,!1,v.h||v);if(!ht)break;v.g[ht.key]=ht}v=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),ys(),Cd(h.i,h.v,h.B,h.l,h.S,h.u)}es.prototype.ba=function(h){h=h.target;const v=this.O;v&&rs(h)==3?v.j():this.Y(h)},es.prototype.Y=function(h){try{if(h==this.g)t:{const jt=rs(this.g),xe=this.g.ya(),Yt=this.g.ca();if(!(jt<3)&&(jt!=3||this.g&&(this.h.h||this.g.la()||Qe(this.g)))){this.K||jt!=4||xe==7||(xe==8||Yt<=0?ys(3):ys(2)),ws(this);var v=this.g.ca();this.X=v;var T=jd(this);if(this.o=v==200,Pu(this.i,this.v,this.B,this.l,this.S,jt,v),this.o){if(this.U&&!this.L){e:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var $=R;break e}}$=null}if(h=$)xs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Es(this,h);else{this.o=!1,this.m=3,Se(12),An(this),Pn(this);break t}}if(this.R){h=!0;let ce;for(;!this.K&&this.C<T.length;)if(ce=Bu(this,T),ce==Fe){jt==4&&(this.m=4,Se(14),h=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==Ae){this.m=4,Se(15),xs(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else xs(this.i,this.l,ce,null),Es(this,ce);if(Uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||T.length!=0||this.h.h||(this.m=1,Se(16),h=!1),this.o=this.o&&h,!h)xs(this.i,this.l,T,"[Invalid Chunked Response]"),An(this),Pn(this);else if(T.length>0&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.aa&&!ht.P&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),tl(ht),ht.P=!0,Se(11))}}else xs(this.i,this.l,T,null),Es(this,T);jt==4&&An(this),this.o&&!this.K&&(jt==4?Xu(this.j,this):(this.o=!1,Ts(this)))}else ei(this.g),v==400&&T.indexOf("Unknown SID")>0?(this.m=3,Se(12)):(this.m=0,Se(13)),An(this),Pn(this)}}}catch{}finally{}};function jd(h){if(!Uu(h))return h.g.la();const v=Qe(h.g);if(v==="")return"";let T="";const R=v.length,H=rs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return An(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let $=0;$<R;$++)h.h.h=!0,T+=h.h.i.decode(v[$],{stream:!(H&&$==R-1)});return v.length=0,h.h.g+=T,h.C=0,h.h.g}function Uu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Bu(h,v){var T=h.C,R=v.indexOf(`
`,T);return R==-1?Fe:(T=Number(v.substring(T,R)),isNaN(T)?Ae:(R+=1,R+T>v.length?Fe:(v=v.slice(R,R+T),h.C=R+T,v)))}es.prototype.cancel=function(){this.K=!0,An(this)};function Ts(h){h.T=Date.now()+h.H,ba(h,h.H)}function ba(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=bs(y(h.aa,h),v)}function ws(h){h.D&&(c.clearTimeout(h.D),h.D=null)}es.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(ys(),Se(17)),An(this),this.m=2,Pn(this)):ba(this,this.T-h)};function Pn(h){h.j.I==0||h.K||Xu(h.j,h)}function An(h){ws(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Po(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Es(h,v){try{var T=h.j;if(T.I!=0&&(T.g==h||As(T.h,h))){if(!h.L&&As(T.h,h)&&T.I==3){try{var R=T.Ba.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){t:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Na(T),Mi(T);else break t;kr(T),Se(18)}}else T.xa=H[1],0<T.xa-T.K&&H[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=bs(y(T.Va,T),6e3));Ss(T.h)<=1&&T.ta&&(T.ta=void 0)}else Vs(T,11)}else if((h.L||T.g==h)&&Na(T),!D(v))for(H=T.Ba.g.parse(v),v=0;v<H.length;v++){let Yt=H[v];const ce=Yt[0];if(!(ce<=T.K))if(T.K=ce,Yt=Yt[1],T.I==2)if(Yt[0]=="c"){T.M=Yt[1],T.ba=Yt[2];const Bn=Yt[3];Bn!=null&&(T.ka=Bn,T.j.info("VER="+T.ka));const Ms=Yt[4];Ms!=null&&(T.za=Ms,T.j.info("SVER="+T.za));const as=Yt[5];as!=null&&typeof as=="number"&&as>0&&(R=1.5*as,T.O=R,T.j.info("backChannelRequestTimeoutMs_="+R)),R=T;const os=h.g;if(os){const Or=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Or){var $=R.h;$.g||Or.indexOf("spdy")==-1&&Or.indexOf("quic")==-1&&Or.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Fo($,$.h),$.h=null))}if(R.G){const Ca=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&(R.wa=Ca,Xt(R.J,R.G,Ca))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),R=T;var ht=h;if(R.na=Wu(R,R.L?R.ba:null,R.W),ht.L){qo(R.h,ht);var jt=ht,xe=R.O;xe&&(jt.H=xe),jt.D&&(ws(jt),Ts(jt)),R.g=ht}else Ku(R);T.i.length>0&&Ds(T)}else Yt[0]!="stop"&&Yt[0]!="close"||Vs(T,7);else T.I==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?Vs(T,7):Wo(T):Yt[0]!="noop"&&T.l&&T.l.qa(Yt),T.A=0)}}ys(4)}catch{}}var Ne=class{constructor(h,v){this.g=h,this.map=v}};function Bo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ss(h){return h.h?1:h.g?h.g.size:0}function As(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Fo(h,v){h.g?h.g.add(v):h.h=v}function qo(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Bo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ho(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const T of h.g.values())v=v.concat(T.G);return v}return V(h.i)}var zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(h,v){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const R=h[T].indexOf("=");let H,$=null;R>=0?(H=h[T].substring(0,R),$=h[T].substring(R+1)):H=h[T],v(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Nn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Nn?(this.l=h.l,qe(this,h.j),this.o=h.o,this.g=h.g,Ai(this,h.u),this.h=h.h,Go(this,Gu(h.i)),this.m=h.m):h&&(v=String(h).match(zu))?(this.l=!1,qe(this,v[1]||"",!0),this.o=Ns(v[2]||""),this.g=Ns(v[3]||"",!0),Ai(this,v[4]),this.h=Ns(v[5]||"",!0),Go(this,v[6]||"",!0),this.m=Ns(v[7]||"")):(this.l=!1,this.i=new Ci(null,this.l))}Nn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Rr(v,_a,!0),":");var T=this.g;return(T||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Rr(v,_a,!0),"@"),h.push(Js(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Rr(T,T.charAt(0)=="/"?Yo:Fu,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Rr(T,qu)),h.join("")},Nn.prototype.resolve=function(h){const v=Ce(this);let T=!!h.j;T?qe(v,h.j):T=!!h.o,T?v.o=h.o:T=!!h.g,T?v.g=h.g:T=h.u!=null;var R=h.h;if(T)Ai(v,h.u);else if(T=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=v.h.lastIndexOf("/");H!=-1&&(R=v.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let ht=0;ht<H.length;){const jt=H[ht++];jt=="."?R&&ht==H.length&&$.push(""):jt==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),R&&ht==H.length&&$.push("")):($.push(jt),R=!0)}R=$.join("/")}else R=H}return T?v.h=R:T=h.i.toString()!=="",T?Go(v,Gu(h.i)):T=!!h.m,T&&(v.m=h.m),v};function Ce(h){return new Nn(h)}function qe(h,v,T){h.j=T?Ns(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ai(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Go(h,v,T){v instanceof Ci?(h.i=v,wa(h.i,h.l)):(T||(v=Rr(v,Ni)),h.i=new Ci(v,h.l))}function Xt(h,v,T){h.i.set(v,T)}function Cr(h){return Xt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ns(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rr(h,v,T){return typeof h=="string"?(h=encodeURI(h).replace(v,fn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var _a=/[#\/\?@]/g,Fu=/[#\?:]/g,Yo=/[#\?]/g,Ni=/[#\?@]/g,qu=/#/g;function Ci(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function mn(h){h.g||(h.g=new Map,h.h=0,h.i&&xa(h.i,function(v,T){h.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}n=Ci.prototype,n.add=function(h,v){mn(this),this.i=null,h=Ri(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(v),this.h+=1,this};function Hu(h,v){mn(h),v=Ri(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Ko(h,v){return mn(h),v=Ri(h,v),h.g.has(v)}n.forEach=function(h,v){mn(this),this.g.forEach(function(T,R){T.forEach(function(H){h.call(v,H,R,this)},this)},this)};function Qo(h,v){mn(h);let T=[];if(typeof v=="string")Ko(h,v)&&(T=T.concat(h.g.get(Ri(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)T=T.concat(h[v]);return T}n.set=function(h,v){return mn(this),this.i=null,h=Ri(this,h),Ko(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=Qo(this,h),h.length>0?String(h[0]):v):v};function Ta(h,v,T){Hu(h,v),T.length>0&&(h.i=null,h.g.set(Ri(h,v),V(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let R=0;R<v.length;R++){var T=v[R];const H=Js(T);T=Qo(this,T);for(let $=0;$<T.length;$++){let ht=H;T[$]!==""&&(ht+="="+Js(T[$])),h.push(ht)}}return this.i=h.join("&")};function Gu(h){const v=new Ci;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Ri(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function wa(h,v){v&&!h.j&&(mn(h),h.i=null,h.g.forEach(function(T,R){const H=R.toLowerCase();R!=H&&(Hu(this,R),Ta(this,H,T))},h)),h.j=v}function ss(h,v){const T=new ts;if(c.Image){const R=new Image;R.onload=b(Ln,T,"TestLoadImage: loaded",!0,v,R),R.onerror=b(Ln,T,"TestLoadImage: error",!1,v,R),R.onabort=b(Ln,T,"TestLoadImage: abort",!1,v,R),R.ontimeout=b(Ln,T,"TestLoadImage: timeout",!1,v,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else v(!1)}function Xo(h,v){const T=new ts,R=new AbortController,H=setTimeout(()=>{R.abort(),Ln(T,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:R.signal}).then($=>{clearTimeout(H),$.ok?Ln(T,"TestPingServer: ok",!0,v):Ln(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Ln(T,"TestPingServer: error",!1,v)})}function Ln(h,v,T,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(T)}catch{}}function ji(){this.g=new Vu}function Cs(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Cs,Mu),Cs.prototype.g=function(){return new jr(this.i,this.h)};function jr(h,v){Ee.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(jr,Ee),n=jr.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,is(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ea(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ea(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Di(this):is(this),this.readyState==3&&Ea(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Di(this))},n.Na=function(h){this.g&&(this.response=h,Di(this))},n.ga=function(){this.g&&Di(this)};function Di(h){h.readyState=4,h.l=null,h.j=null,h.B=null,is(h)}n.setRequestHeader=function(h,v){this.A.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=v.next();return h.join(`\r
`)};function is(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let v="";return Tt(h,function(T,R){v+=R,v+=":",v+=T,v+=`\r
`}),v}function Dr(h,v,T){t:{for(R in T){var R=!1;break t}R=!0}R||(T=Un(T),typeof h=="string"?T!=null&&Js(T):Xt(h,v,T))}function Wt(h){Ee.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Wt,Ee);var Rs=/^https?$/i,$o=["POST","PUT"];n=Wt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,v,T,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uo.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch($){Vr(this,$);return}if(h=T||"",T=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)T.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const $ of R.keys())T.set($,R.get($));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(T.keys()).find($=>$.toLowerCase()=="content-type"),H=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call($o,v,void 0)>=0)||R||H||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ht]of T)this.g.setRequestHeader($,ht);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Vr(this,$)}};function Vr(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Zo(h),ti(h)}function Zo(h){h.A||(h.A=!0,Le(h,"complete"),Le(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Le(this,"complete"),Le(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),Wt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Mr(this):this.Xa())},n.Xa=function(){Mr(this)};function Mr(h){if(h.h&&typeof u<"u"){if(h.v&&rs(h)==4)setTimeout(h.Ca.bind(h),0);else if(Le(h,"readystatechange"),rs(h)==4){h.h=!1;try{const $=h.ca();t:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var T;if(!(T=v)){var R;if(R=$===0){let ht=String(h.D).match(zu)[1]||null;!ht&&c.self&&c.self.location&&(ht=c.self.location.protocol.slice(0,-1)),R=!Rs.test(ht?ht.toLowerCase():"")}T=R}if(T)Le(h,"complete"),Le(h,"success");else{h.o=6;try{var H=rs(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",Zo(h)}}finally{ti(h)}}}}function ti(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,v||Le(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function rs(h){return h.g?h.g.readyState:0}n.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Nd(v)}};function Qe(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ei(h){const v={};h=(h.g&&rs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(D(h[R]))continue;var T=Lu(h[R]);const H=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const $=v[H]||[];v[H]=$,$.push(T)}Et(v,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(h,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||v}function Vi(h){this.za=0,this.i=[],this.j=new ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=js("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=js("baseRetryDelayMs",5e3,h),this.Za=js("retryDelaySeedMs",1e4,h),this.Ta=js("forwardChannelMaxRetries",2,h),this.va=js("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Bo(h&&h.concurrentRequestLimit),this.Ba=new ji,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Vi.prototype,n.ka=8,n.I=1,n.connect=function(h,v,T,R){Se(0),this.W=h,this.H=v||{},T&&R!==void 0&&(this.H.OSID=T,this.H.OAID=R),this.F=this.X,this.J=Wu(this,null,this.W),Ds(this)};function Wo(h){if(Sa(h),h.I==3){var v=h.V++,T=Ce(h.J);if(Xt(T,"SID",h.M),Xt(T,"RID",v),Xt(T,"TYPE","terminate"),Ir(h,T),v=new es(h,h.j,v),v.M=2,v.A=Cr(Ce(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=v.A,T=!0),T||(v.g=Ju(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ts(v)}Zu(h)}function Mi(h){h.g&&(tl(h),h.g.cancel(),h.g=null)}function Sa(h){Mi(h),h.v&&(c.clearTimeout(h.v),h.v=null),Na(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ds(h){if(!zo(h.h)&&!h.m){h.m=!0;var v=h.Ea;et||C(),J||(et(),J=!0),j.add(v,h),h.D=0}}function Aa(h,v){return Ss(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=bs(y(h.Ea,h,v),$u(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new es(this,this.j,h);let $=this.o;if(this.U&&($?($=O($),dt($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)t:{for(var v=0,T=0;T<this.i.length;T++){e:{var R=this.i[T];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break e}R=void 0}if(R===void 0)break;if(v+=R,v>4096){v=T;break t}if(v===4096||T===this.i.length-1){v=T+1;break t}}v=1e3}else v=1e3;v=Yu(this,H,v),T=Ce(this.J),Xt(T,"RID",h),Xt(T,"CVER",22),this.G&&Xt(T,"X-HTTP-Session-Id",this.G),Ir(this,T),$&&(this.R?v="headers="+Js(Un($))+"&"+v:this.u&&Dr(T,this.u,$)),Fo(this.h,H),this.Ra&&Xt(T,"TYPE","init"),this.S?(Xt(T,"$req",v),Xt(T,"SID","null"),H.U=!0,_s(H,T,null)):_s(H,T,v),this.I=2}}else this.I==3&&(h?Jo(this,h):this.i.length==0||zo(this.h)||Jo(this))};function Jo(h,v){var T;v?T=v.l:T=h.V++;const R=Ce(h.J);Xt(R,"SID",h.M),Xt(R,"RID",T),Xt(R,"AID",h.K),Ir(h,R),h.u&&h.o&&Dr(R,h.u,h.o),T=new es(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Yu(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Fo(h.h,T),_s(T,R,v)}function Ir(h,v){h.H&&Tt(h.H,function(T,R){Xt(v,R,T)}),h.l&&Tt({},function(T,R){Xt(v,R,T)})}function Yu(h,v,T){T=Math.min(h.i.length,T);const R=h.l?y(h.l.Ka,h.l,h):null;t:{var H=h.i;let jt=-1;for(;;){const xe=["count="+T];jt==-1?T>0?(jt=H[0].g,xe.push("ofs="+jt)):jt=0:xe.push("ofs="+jt);let Yt=!0;for(let ce=0;ce<T;ce++){var $=H[ce].g;const Bn=H[ce].map;if($-=jt,$<0)jt=Math.max(0,H[ce].g-100),Yt=!1;else try{$="req"+$+"_"||"";try{var ht=Bn instanceof Map?Bn:Object.entries(Bn);for(const[Ms,as]of ht){let os=as;m(as)&&(os=Si(as)),xe.push($+Ms+"="+encodeURIComponent(os))}}catch(Ms){throw xe.push($+"type="+encodeURIComponent("_badmap")),Ms}}catch{R&&R(Bn)}}if(Yt){ht=xe.join("&");break t}}ht=void 0}return h=h.i.splice(0,T),v.G=h,ht}function Ku(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;et||C(),J||(et(),J=!0),j.add(v,h),h.A=0}}function kr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=bs(y(h.Da,h),$u(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=bs(y(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Se(10),Mi(this),Qu(this))};function tl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Qu(h){h.g=new es(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Ce(h.na);Xt(v,"RID","rpc"),Xt(v,"SID",h.M),Xt(v,"AID",h.K),Xt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Xt(v,"TO",h.ia),Xt(v,"TYPE","xmlhttp"),Ir(h,v),h.u&&h.o&&Dr(v,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Cr(Ce(v)),T.u=null,T.R=!0,va(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Mi(this),kr(this),Se(19))};function Na(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Xu(h,v){var T=null;if(h.g==v){Na(h),tl(h),h.g=null;var R=2}else if(As(h.h,v))T=v.G,qo(h.h,v),R=1;else return;if(h.I!=0){if(v.o)if(R==1){T=v.u?v.u.length:0,v=Date.now()-v.F;var H=h.D;R=ya(),Le(R,new vs(R,T)),Ds(h)}else Ku(h);else if(H=v.m,H==3||H==0&&v.X>0||!(R==1&&Aa(h,v)||R==2&&kr(h)))switch(T&&T.length>0&&(v=h.h,v.i=v.i.concat(T)),H){case 1:Vs(h,5);break;case 4:Vs(h,10);break;case 3:Vs(h,6);break;default:Vs(h,2)}}}function $u(h,v){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*v}function Vs(h,v){if(h.j.info("Error code "+v),v==2){var T=y(h.bb,h),R=h.Ua;const H=!R;R=new Nn(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qe(R,"https"),Cr(R),H?ss(R.toString(),T):Xo(R.toString(),T)}else Se(2);h.I=0,h.l&&h.l.pa(v),Zu(h),Sa(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function Zu(h){if(h.I=0,h.ja=[],h.l){const v=Ho(h.h);(v.length!=0||h.i.length!=0)&&(k(h.ja,v),k(h.ja,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.oa()}}function Wu(h,v,T){var R=T instanceof Nn?Ce(T):new Nn(T);if(R.g!="")v&&(R.g=v+"."+R.g),Ai(R,R.u);else{var H=c.location;R=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;const $=new Nn(null);R&&qe($,R),v&&($.g=v),H&&Ai($,H),T&&($.h=T),R=$}return T=h.G,v=h.wa,T&&v&&Xt(R,T,v),Xt(R,"VER",h.ka),Ir(h,R),R}function Ju(h,v,T){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Wt(new Cs({ab:T})):new Wt(h.ma),v.Fa(h.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tc(){}n=tc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ii(){}Ii.prototype.g=function(h,v){return new cn(h,v)};function cn(h,v){Ee.call(this),this.g=new Vi(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ni(this)}x(cn,Ee),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Wo(this.g)},cn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Si(h),h=T);v.i.push(new Ne(v.Ya++,h)),v.I==3&&Ds(v)},cn.prototype.N=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,cn.Z.N.call(this)};function ec(h){Ke.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){t:{for(const T in v){h=T;break t}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}x(ec,Ke);function nc(){On.call(this),this.status=1}x(nc,On);function ni(h){this.g=h}x(ni,tc),ni.prototype.ra=function(){Le(this.g,"a")},ni.prototype.qa=function(h){Le(this.g,new ec(h))},ni.prototype.pa=function(h){Le(this.g,new nc)},ni.prototype.oa=function(){Le(this.g,"b")},Ii.prototype.createWebChannel=Ii.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,J_=function(){return new Ii},W_=function(){return ya()},Z_=be,cp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,gh=Ar,Lo.COMPLETE="complete",$_=Lo,Iu.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",Ee.prototype.listen=Ee.prototype.J,zl=Iu,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,X_=Wt}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const ax="@firebase/firestore",ox="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new L_("@firebase/firestore");function io(){return la.logLevel}function pt(n,...t){if(la.logLevel<=qt.DEBUG){const s=t.map(eg);la.debug(`Firestore (${Ao}): ${n}`,...s)}}function xi(n,...t){if(la.logLevel<=qt.ERROR){const s=t.map(eg);la.error(`Firestore (${Ao}): ${n}`,...s)}}function vo(n,...t){if(la.logLevel<=qt.WARN){const s=t.map(eg);la.warn(`Firestore (${Ao}): ${n}`,...s)}}function eg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,t2(n,r,s)}function t2(n,t,s){let r=`FIRESTORE (${Ao}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw xi(r),new Error(r)}function Qt(n,t,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,n||t2(t,o,r)}function Rt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends ca{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class kN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(an.UNAUTHENTICATED)))}shutdown(){}}class ON{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class PN{constructor(t){this.t=t,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){Qt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,s(g)):Promise.resolve();let u=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new vi,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new vi)}}),0),c()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==t?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string",31837,{l:r}),new e2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qt(t===null||typeof t=="string",2055,{h:t}),new an(t)}}class LN{constructor(t,s,r){this.P=t,this.T=s,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UN{constructor(t,s,r){this.P=t,this.T=s,this.I=r}getToken(){return Promise.resolve(new LN(this.P,this.T,this.I))}start(t,s){t.enqueueRetryable((()=>s(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BN{constructor(t,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,F_(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,s){Qt(this.o===void 0,3512);const r=u=>{u.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,pt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?s(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(Qt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new lx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let r=0;r<n;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=zN(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<s&&(r+=t.charAt(o[u]%62))}return r}}function Lt(n,t){return n<t?-1:n>t?1:0}function hp(n,t){const s=Math.min(n.length,t.length);for(let r=0;r<s;r++){const o=n.charAt(r),u=t.charAt(r);if(o!==u)return km(o)===km(u)?Lt(o,u):km(o)?1:-1}return Lt(n.length,t.length)}const FN=55296,qN=57343;function km(n){const t=n.charCodeAt(0);return t>=FN&&t<=qN}function bo(n,t,s){return n.length===t.length&&n.every(((r,o)=>s(r,t[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="__name__";class Ls{constructor(t,s,r){s===void 0?s=0:s>t.length&&St(637,{offset:s,range:t.length}),r===void 0?r=t.length-s:r>t.length-s&&St(1746,{length:r,range:t.length-s}),this.segments=t,this.offset=s,this.len=r}get length(){return this.len}isEqual(t){return Ls.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof Ls?t.forEach((r=>{s.push(r)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,r=this.limit();s<r;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const r=Math.min(t.length,s.length);for(let o=0;o<r;o++){const u=Ls.compareSegments(t.get(o),s.get(o));if(u!==0)return u}return Lt(t.length,s.length)}static compareSegments(t,s){const r=Ls.isNumericId(t),o=Ls.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?Ls.extractNumericId(t).compare(Ls.extractNumericId(s)):hp(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ur.fromString(t.substring(4,t.length-2))}}class ie extends Ls{construct(t,s,r){return new ie(t,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const r of t){if(r.indexOf("//")>=0)throw new ft(ot.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new ie(s)}static emptyPath(){return new ie([])}}const HN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Ls{construct(t,s,r){return new tn(t,s,r)}static isValidIdentifier(t){return HN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ux}static keyField(){return new tn([ux])}static fromServerFormat(t){const s=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ft(ot.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new ft(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ft(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new ft(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new tn(s)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.path=t}static fromPath(t){return new _t(ie.fromString(t))}static fromName(t){return new _t(ie.fromString(t).popFirst(5))}static empty(){return new _t(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ie.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return ie.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _t(new ie(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n,t,s){if(!s)throw new ft(ot.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function GN(n,t,s,r){if(t===!0&&r===!0)throw new ft(ot.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function cx(n){if(!_t.isDocumentKey(n))throw new ft(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hx(n){if(_t.isDocumentKey(n))throw new ft(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function s2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ed(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":St(12329,{type:typeof n})}function wn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ft(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=ed(n);throw new ft(ot.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n,t){const s={typeString:n};return t&&(s.value=t),s}function yu(n,t){if(!s2(n))throw new ft(ot.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){s=`JSON missing required field: '${r}'`;break}const c=n[r];if(o&&typeof c!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){s=`Expected '${r}' field to equal '${u.value}'`;break}}if(s)throw new ft(ot.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=-62135596800,fx=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),r=Math.floor((t-1e3*s)*fx);return new le(s,r)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new ft(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new ft(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<dx)throw new ft(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fx}_compareTo(t){return this.seconds===t.seconds?Lt(this.nanoseconds,t.nanoseconds):Lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(yu(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-dx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Oe("string",le._jsonSchemaVersion),seconds:Oe("number"),nanoseconds:Oe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{static fromTimestamp(t){return new Nt(t)}static min(){return new Nt(new le(0,0))}static max(){return new Nt(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function YN(n,t){const s=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Nt.fromTimestamp(r===1e9?new le(s+1,0):new le(s,r));return new hr(o,_t.empty(),t)}function KN(n){return new hr(n.readTime,n.key,iu)}class hr{constructor(t,s,r){this.readTime=t,this.documentKey=s,this.largestBatchId=r}static min(){return new hr(Nt.min(),_t.empty(),iu)}static max(){return new hr(Nt.max(),_t.empty(),iu)}}function QN(n,t){let s=n.readTime.compareTo(t.readTime);return s!==0?s:(s=_t.comparator(n.documentKey,t.documentKey),s!==0?s:Lt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $N{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(n){if(n.code!==ot.FAILED_PRECONDITION||n.message!==XN)throw n;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&St(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new lt(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(s,u).next(r,o)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof lt?s:lt.resolve(s)}catch(s){return lt.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):lt.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):lt.reject(s)}static resolve(t){return new lt(((s,r)=>{s(t)}))}static reject(t){return new lt(((s,r)=>{r(t)}))}static waitFor(t){return new lt(((s,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&s()}),(g=>r(g)))})),c=!0,u===o&&s()}))}static or(t){let s=lt.resolve(!1);for(const r of t)s=s.next((o=>o?lt.resolve(o):r()));return s}static forEach(t,s){const r=[];return t.forEach(((o,u)=>{r.push(s.call(this,o,u))})),this.waitFor(r)}static mapArray(t,s){return new lt(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;s(t[y]).next((b=>{c[y]=b,++m,m===u&&r(c)}),(b=>o(b)))}}))}static doWhile(t,s){return new lt(((r,o)=>{const u=()=>{t()===!0?s().next((()=>{u()}),o):r()};u()}))}}function ZN(n){const t=n.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Co(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}nd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=-1;function sd(n){return n==null}function Vh(n){return n===0&&1/n==-1/0}function WN(n){return typeof n=="number"&&Number.isInteger(n)&&!Vh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="";function JN(n){let t="";for(let s=0;s<n.length;s++)t.length>0&&(t=mx(t)),t=t4(n.get(s),t);return mx(t)}function t4(n,t){let s=t;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":s+="";break;case i2:s+="";break;default:s+=u}}return s}function mx(n){return n+i2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(n){let t=0;for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t++;return t}function vr(n,t){for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t(s,n[s])}function r2(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,s){this.comparator=t,this.root=s||Je.EMPTY}insert(t,s){return new fe(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Je.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(t){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,r)=>(t(s,r),!1)))}toString(){const t=[];return this.inorderTraversal(((s,r)=>(t.push(`${s}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new oh(this.root,t,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new oh(this.root,t,this.comparator,!0)}}class oh{constructor(t,s,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=s?r(t.key,s):1,s&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Je{constructor(t,s,r,o,u){this.key=t,this.value=s,this.color=r??Je.RED,this.left=o??Je.EMPTY,this.right=u??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,r,o,u){return new Je(t??this.key,s??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,s,r),null):u===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(t,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let r,o=this;if(s(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(t,o.key)===0){if(o.right.isEmpty())return Je.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw St(43730,{key:this.key,value:this.value});if(this.right.isRed())throw St(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw St(27949);return t+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw St(57766)}get value(){throw St(16141)}get color(){throw St(16727)}get left(){throw St(29726)}get right(){throw St(36894)}copy(t,s,r,o,u){return this}insert(t,s,r){return new Je(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,r)=>(t(s),!1)))}forEachInRange(t,s){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;s(o.key)}}forEachWhile(t,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new gx(this.data.getIterator())}getIteratorFrom(t){return new gx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((r=>{s=s.add(r)})),s}isEqual(t){if(!(t instanceof ze)||this.size!==t.size)return!1;const s=this.data.getIterator(),r=t.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new ze(this.comparator);return s.data=t,s}}class gx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.fields=t,t.sort(tn.comparator)}static empty(){return new kn([])}unionWith(t){let s=new ze(tn.comparator);for(const r of this.fields)s=s.add(r);for(const r of t)s=s.add(r);return new kn(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return bo(this.fields,t.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new a2("Invalid base64 string: "+u):u}})(t);return new nn(s)}static fromUint8Array(t){const s=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new nn(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const e4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(n){if(Qt(!!n,39018),typeof n=="string"){let t=0;const s=e4.exec(n);if(Qt(!!s,46558,{timestamp:n}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:we(n.seconds),nanos:we(n.nanos)}}function we(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="server_timestamp",l2="__type__",u2="__previous_value__",c2="__local_write_time__";function ig(n){var s,r;return((r=(((s=n==null?void 0:n.mapValue)==null?void 0:s.fields)||{})[l2])==null?void 0:r.stringValue)===o2}function id(n){const t=n.mapValue.fields[u2];return ig(t)?id(t):t}function ru(n){const t=dr(n.mapValue.fields[c2].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(t,s,r,o,u,c,m,g,y,b){this.databaseId=t,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const Mh="(default)";class au{constructor(t,s){this.projectId=t,this.database=s||Mh}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(t){return t instanceof au&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="__type__",s4="__max__",lh={mapValue:{}},d2="__vector__",Ih="value";function mr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ig(n)?4:r4(n)?9007199254740991:i4(n)?10:11:St(28295,{value:n})}function Ys(n,t){if(n===t)return!0;const s=mr(n);if(s!==mr(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ru(n).isEqual(ru(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=dr(o.timestampValue),m=dr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(o,u){return fr(o.bytesValue).isEqual(fr(u.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(o,u){return we(o.geoPointValue.latitude)===we(u.geoPointValue.latitude)&&we(o.geoPointValue.longitude)===we(u.geoPointValue.longitude)})(n,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return we(o.integerValue)===we(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=we(o.doubleValue),m=we(u.doubleValue);return c===m?Vh(c)===Vh(m):isNaN(c)&&isNaN(m)}return!1})(n,t);case 9:return bo(n.arrayValue.values||[],t.arrayValue.values||[],Ys);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(px(c)!==px(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Ys(c[g],m[g])))return!1;return!0})(n,t);default:return St(52216,{left:n})}}function ou(n,t){return(n.values||[]).find((s=>Ys(s,t)))!==void 0}function xo(n,t){if(n===t)return 0;const s=mr(n),r=mr(t);if(s!==r)return Lt(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=we(u.integerValue||u.doubleValue),g=we(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(n,t);case 3:return yx(n.timestampValue,t.timestampValue);case 4:return yx(ru(n),ru(t));case 5:return hp(n.stringValue,t.stringValue);case 6:return(function(u,c){const m=fr(u),g=fr(c);return m.compareTo(g)})(n.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let y=0;y<m.length&&y<g.length;y++){const b=Lt(m[y],g[y]);if(b!==0)return b}return Lt(m.length,g.length)})(n.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=Lt(we(u.latitude),we(c.latitude));return m!==0?m:Lt(we(u.longitude),we(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return vx(n.arrayValue,t.arrayValue);case 10:return(function(u,c){var w,V,k,U;const m=u.fields||{},g=c.fields||{},y=(w=m[Ih])==null?void 0:w.arrayValue,b=(V=g[Ih])==null?void 0:V.arrayValue,x=Lt(((k=y==null?void 0:y.values)==null?void 0:k.length)||0,((U=b==null?void 0:b.values)==null?void 0:U.length)||0);return x!==0?x:vx(y,b)})(n.mapValue,t.mapValue);case 11:return(function(u,c){if(u===lh.mapValue&&c===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(c===lh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=c.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let x=0;x<g.length&&x<b.length;++x){const w=hp(g[x],b[x]);if(w!==0)return w;const V=xo(m[g[x]],y[b[x]]);if(V!==0)return V}return Lt(g.length,b.length)})(n.mapValue,t.mapValue);default:throw St(23264,{he:s})}}function yx(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Lt(n,t);const s=dr(n),r=dr(t),o=Lt(s.seconds,r.seconds);return o!==0?o:Lt(s.nanos,r.nanos)}function vx(n,t){const s=n.values||[],r=t.values||[];for(let o=0;o<s.length&&o<r.length;++o){const u=xo(s[o],r[o]);if(u)return u}return Lt(s.length,r.length)}function _o(n){return dp(n)}function dp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(s){const r=dr(s);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(s){return fr(s).toBase64()})(n.bytesValue):"referenceValue"in n?(function(s){return _t.fromName(s).toString()})(n.referenceValue):"geoPointValue"in n?(function(s){return`geo(${s.latitude},${s.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(s){let r="[",o=!0;for(const u of s.values||[])o?o=!1:r+=",",r+=dp(u);return r+"]"})(n.arrayValue):"mapValue"in n?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${dp(s.fields[c])}`;return o+"}"})(n.mapValue):St(61005,{value:n})}function yh(n){switch(mr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=id(n);return t?16+yh(t):16;case 5:return 2*n.stringValue.length;case 6:return fr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+yh(u)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return vr(r.fields,((u,c)=>{o+=u.length+yh(c)})),o})(n.mapValue);default:throw St(13486,{value:n})}}function bx(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function fp(n){return!!n&&"integerValue"in n}function rg(n){return!!n&&"arrayValue"in n}function xx(n){return!!n&&"nullValue"in n}function _x(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vh(n){return!!n&&"mapValue"in n}function i4(n){var s,r;return((r=(((s=n==null?void 0:n.mapValue)==null?void 0:s.fields)||{})[h2])==null?void 0:r.stringValue)===d2}function Ql(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return vr(n.mapValue.fields,((s,r)=>t.mapValue.fields[s]=Ql(r))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(n.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=Ql(n.arrayValue.values[s]);return t}return{...n}}function r4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===s4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.value=t}static empty(){return new _n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let r=0;r<t.length-1;++r)if(s=(s.mapValue.fields||{})[t.get(r)],!vh(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ql(s)}setAll(t){let s=tn.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!s.isImmediateParentOf(m)){const g=this.getFieldsMap(s);this.applyChanges(g,r,o),r={},o=[],s=m.popLast()}c?r[m.lastSegment()]=Ql(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,r,o)}delete(t){const s=this.field(t.popLast());vh(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Ys(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=s.mapValue.fields[t.get(r)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[t.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(t,s,r){vr(s,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new _n(Ql(this.value))}}function f2(n){const t=[];return vr(n.fields,((s,r)=>{const o=new tn([s]);if(vh(r)){const u=f2(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new kn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t,s,r,o,u,c,m){this.key=t,this.documentType=s,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new on(t,0,Nt.min(),Nt.min(),Nt.min(),_n.empty(),0)}static newFoundDocument(t,s,r,o){return new on(t,1,s,Nt.min(),r,o,0)}static newNoDocument(t,s){return new on(t,2,s,Nt.min(),Nt.min(),_n.empty(),0)}static newUnknownDocument(t,s){return new on(t,3,s,Nt.min(),Nt.min(),_n.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof on&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(t,s){this.position=t,this.inclusive=s}}function Tx(n,t,s){let r=0;for(let o=0;o<n.position.length;o++){const u=t[o],c=n.position[o];if(u.field.isKeyField()?r=_t.comparator(_t.fromName(c.referenceValue),s.key):r=xo(c,s.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function wx(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let s=0;s<n.position.length;s++)if(!Ys(n.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(t,s="asc"){this.field=t,this.dir=s}}function a4(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{}class ke extends m2{constructor(t,s,r){super(),this.field=t,this.op=s,this.value=r}static create(t,s,r){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,r):new l4(t,s,r):s==="array-contains"?new h4(t,r):s==="in"?new d4(t,r):s==="not-in"?new f4(t,r):s==="array-contains-any"?new m4(t,r):new ke(t,s,r)}static createKeyFieldInFilter(t,s,r){return s==="in"?new u4(t,r):new c4(t,r)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(xo(s,this.value)):s!==null&&mr(this.value)===mr(s)&&this.matchesComparison(xo(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return St(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends m2{constructor(t,s){super(),this.filters=t,this.op=s,this.Pe=null}static create(t,s){return new ps(t,s)}matches(t){return p2(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function p2(n){return n.op==="and"}function g2(n){return o4(n)&&p2(n)}function o4(n){for(const t of n.filters)if(t instanceof ps)return!1;return!0}function mp(n){if(n instanceof ke)return n.field.canonicalString()+n.op.toString()+_o(n.value);if(g2(n))return n.filters.map((t=>mp(t))).join(",");{const t=n.filters.map((s=>mp(s))).join(",");return`${n.op}(${t})`}}function y2(n,t){return n instanceof ke?(function(r,o){return o instanceof ke&&r.op===o.op&&r.field.isEqual(o.field)&&Ys(r.value,o.value)})(n,t):n instanceof ps?(function(r,o){return o instanceof ps&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&y2(c,o.filters[m])),!0):!1})(n,t):void St(19439)}function v2(n){return n instanceof ke?(function(s){return`${s.field.canonicalString()} ${s.op} ${_o(s.value)}`})(n):n instanceof ps?(function(s){return s.op.toString()+" {"+s.getFilters().map(v2).join(" ,")+"}"})(n):"Filter"}class l4 extends ke{constructor(t,s,r){super(t,s,r),this.key=_t.fromName(r.referenceValue)}matches(t){const s=_t.comparator(t.key,this.key);return this.matchesComparison(s)}}class u4 extends ke{constructor(t,s){super(t,"in",s),this.keys=b2("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class c4 extends ke{constructor(t,s){super(t,"not-in",s),this.keys=b2("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function b2(n,t){var s;return(((s=t.arrayValue)==null?void 0:s.values)||[]).map((r=>_t.fromName(r.referenceValue)))}class h4 extends ke{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return rg(s)&&ou(s.arrayValue,this.value)}}class d4 extends ke{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&ou(this.value.arrayValue,s)}}class f4 extends ke{constructor(t,s){super(t,"not-in",s)}matches(t){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&s.nullValue===void 0&&!ou(this.value.arrayValue,s)}}class m4 extends ke{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!rg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>ou(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(t,s=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function Ex(n,t=null,s=[],r=[],o=null,u=null,c=null){return new p4(n,t,s,r,o,u,c)}function ag(n){const t=Rt(n);if(t.Te===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((r=>mp(r))).join(","),s+="|ob:",s+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),sd(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>_o(r))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>_o(r))).join(",")),t.Te=s}return t.Te}function og(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!a4(n.orderBy[s],t.orderBy[s]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if(!y2(n.filters[s],t.filters[s]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!wx(n.startAt,t.startAt)&&wx(n.endAt,t.endAt)}function pp(n){return _t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,s=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function g4(n,t,s,r,o,u,c,m){return new vu(n,t,s,r,o,u,c,m)}function rd(n){return new vu(n)}function Sx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function x2(n){return n.collectionGroup!==null}function Xl(n){const t=Rt(n);if(t.Ie===null){t.Ie=[];const s=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),s.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new ze(tn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(t).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Oh(u,r))})),s.has(tn.keyField().canonicalString())||t.Ie.push(new Oh(tn.keyField(),r))}return t.Ie}function Bs(n){const t=Rt(n);return t.Ee||(t.Ee=y4(t,Xl(n))),t.Ee}function y4(n,t){if(n.limitType==="F")return Ex(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Oh(o.field,u)}));const s=n.endAt?new kh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kh(n.startAt.position,n.startAt.inclusive):null;return Ex(n.path,n.collectionGroup,t,n.filters,n.limit,s,r)}}function gp(n,t){const s=n.filters.concat([t]);return new vu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),s,n.limit,n.limitType,n.startAt,n.endAt)}function yp(n,t,s){return new vu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,s,n.startAt,n.endAt)}function ad(n,t){return og(Bs(n),Bs(t))&&n.limitType===t.limitType}function _2(n){return`${ag(Bs(n))}|lt:${n.limitType}`}function ro(n){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>v2(o))).join(", ")}]`),sd(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>_o(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>_o(o))).join(",")),`Target(${r})`})(Bs(n))}; limitType=${n.limitType})`}function od(n,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):_t.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(n,t)&&(function(r,o){for(const u of Xl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(n,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(n,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const y=Tx(c,m,g);return c.inclusive?y<=0:y<0})(r.startAt,Xl(r),o)||r.endAt&&!(function(c,m,g){const y=Tx(c,m,g);return c.inclusive?y>=0:y>0})(r.endAt,Xl(r),o))})(n,t)}function v4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function T2(n){return(t,s)=>{let r=!1;for(const o of Xl(n)){const u=b4(o,t,s);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function b4(n,t,s){const r=n.field.isKeyField()?_t.comparator(t.key,s.key):(function(u,c,m){const g=c.data.field(u),y=m.data.field(u);return g!==null&&y!==null?xo(g,y):St(42886)})(n.field,t,s);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return St(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,s){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,s]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,s]);o.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){vr(this.inner,((s,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return r2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=new fe(_t.comparator);function _i(){return x4}const w2=new fe(_t.comparator);function Fl(...n){let t=w2;for(const s of n)t=t.insert(s.key,s);return t}function E2(n){let t=w2;return n.forEach(((s,r)=>t=t.insert(s,r.overlayedDocument))),t}function ea(){return $l()}function S2(){return $l()}function $l(){return new ha((n=>n.toString()),((n,t)=>n.isEqual(t)))}const _4=new fe(_t.comparator),T4=new ze(_t.comparator);function Ut(...n){let t=T4;for(const s of n)t=t.add(s);return t}const w4=new ze(Lt);function E4(){return w4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(t)?"-0":t}}function A2(n){return{integerValue:""+n}}function S4(n,t){return WN(t)?A2(t):lg(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function A4(n,t,s){return n instanceof Ph?(function(o,u){const c={fields:{[l2]:{stringValue:o2},[c2]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ig(u)&&(u=id(u)),u&&(c.fields[u2]=u),{mapValue:c}})(s,t):n instanceof lu?C2(n,t):n instanceof uu?R2(n,t):(function(o,u){const c=N2(o,u),m=Ax(c)+Ax(o.Ae);return fp(c)&&fp(o.Ae)?A2(m):lg(o.serializer,m)})(n,t)}function N4(n,t,s){return n instanceof lu?C2(n,t):n instanceof uu?R2(n,t):s}function N2(n,t){return n instanceof Lh?(function(r){return fp(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Ph extends ld{}class lu extends ld{constructor(t){super(),this.elements=t}}function C2(n,t){const s=j2(t);for(const r of n.elements)s.some((o=>Ys(o,r)))||s.push(r);return{arrayValue:{values:s}}}class uu extends ld{constructor(t){super(),this.elements=t}}function R2(n,t){let s=j2(t);for(const r of n.elements)s=s.filter((o=>!Ys(o,r)));return{arrayValue:{values:s}}}class Lh extends ld{constructor(t,s){super(),this.serializer=t,this.Ae=s}}function Ax(n){return we(n.integerValue||n.doubleValue)}function j2(n){return rg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function C4(n,t){return n.field.isEqual(t.field)&&(function(r,o){return r instanceof lu&&o instanceof lu||r instanceof uu&&o instanceof uu?bo(r.elements,o.elements,Ys):r instanceof Lh&&o instanceof Lh?Ys(r.Ae,o.Ae):r instanceof Ph&&o instanceof Ph})(n.transform,t.transform)}class R4{constructor(t,s){this.version=t,this.transformResults=s}}class Wn{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new Wn}static exists(t){return new Wn(void 0,t)}static updateTime(t){return new Wn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bh(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ud{}function D2(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new ug(n.key,Wn.none()):new bu(n.key,n.data,Wn.none());{const s=n.data,r=_n.empty();let o=new ze(tn.comparator);for(let u of t.fields)if(!o.has(u)){let c=s.field(u);c===null&&u.length>1&&(u=u.popLast(),c=s.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new br(n.key,r,new kn(o.toArray()),Wn.none())}}function j4(n,t,s){n instanceof bu?(function(o,u,c){const m=o.value.clone(),g=Cx(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,t,s):n instanceof br?(function(o,u,c){if(!bh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Cx(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(V2(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,t,s):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,s)}function Zl(n,t,s,r){return n instanceof bu?(function(u,c,m,g){if(!bh(u.precondition,c))return m;const y=u.value.clone(),b=Rx(u.fieldTransforms,g,c);return y.setAll(b),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,t,s,r):n instanceof br?(function(u,c,m,g){if(!bh(u.precondition,c))return m;const y=Rx(u.fieldTransforms,g,c),b=c.data;return b.setAll(V2(u)),b.setAll(y),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(n,t,s,r):(function(u,c,m){return bh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(n,t,s)}function D4(n,t){let s=null;for(const r of n.fieldTransforms){const o=t.data.field(r.field),u=N2(r.transform,o||null);u!=null&&(s===null&&(s=_n.empty()),s.set(r.field,u))}return s||null}function Nx(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&bo(r,o,((u,c)=>C4(u,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class bu extends ud{constructor(t,s,r,o=[]){super(),this.key=t,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class br extends ud{constructor(t,s,r,o,u=[]){super(),this.key=t,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function V2(n){const t=new Map;return n.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=n.data.field(s);t.set(s,r)}})),t}function Cx(n,t,s){const r=new Map;Qt(n.length===s.length,32656,{Re:s.length,Ve:n.length});for(let o=0;o<s.length;o++){const u=n[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,N4(c,m,s[o]))}return r}function Rx(n,t,s){const r=new Map;for(const o of n){const u=o.transform,c=s.data.field(o.field);r.set(o.field,A4(u,c,t))}return r}class ug extends ud{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V4 extends ud{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(t,s,r,o){this.batchId=t,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&j4(u,t,r[o])}}applyToLocalView(t,s){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(s=Zl(r,t,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(s=Zl(r,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const r=S2();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=s.has(o.key)?null:m;const g=D2(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Nt.min())})),r}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),Ut())}isEqual(t){return this.batchId===t.batchId&&bo(this.mutations,t.mutations,((s,r)=>Nx(s,r)))&&bo(this.baseMutations,t.baseMutations,((s,r)=>Nx(s,r)))}}class cg{constructor(t,s,r,o){this.batch=t,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(t,s,r){Qt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return _4})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new cg(t,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,Ft;function O4(n){switch(n){case ot.OK:return St(64938);case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0;default:return St(15467,{code:n})}}function M2(n){if(n===void 0)return xi("GRPC error has no .code"),ot.UNKNOWN;switch(n){case Me.OK:return ot.OK;case Me.CANCELLED:return ot.CANCELLED;case Me.UNKNOWN:return ot.UNKNOWN;case Me.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case Me.INTERNAL:return ot.INTERNAL;case Me.UNAVAILABLE:return ot.UNAVAILABLE;case Me.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case Me.NOT_FOUND:return ot.NOT_FOUND;case Me.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case Me.ABORTED:return ot.ABORTED;case Me.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case Me.DATA_LOSS:return ot.DATA_LOSS;default:return St(39323,{code:n})}}(Ft=Me||(Me={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new ur([4294967295,4294967295],0);function jx(n){const t=P4().encode(n),s=new Q_;return s.update(t),new Uint8Array(s.digest())}function Dx(n){const t=new DataView(n.buffer),s=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new ur([s,r],0),new ur([o,u],0)]}class hg{constructor(t,s,r){if(this.bitmap=t,this.padding=s,this.hashCount=r,s<0||s>=8)throw new ql(`Invalid padding: ${s}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(t.length===0&&s!==0)throw new ql(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*t.length-s,this.pe=ur.fromNumber(this.ge)}ye(t,s,r){let o=t.add(s.multiply(ur.fromNumber(r)));return o.compare(L4)===1&&(o=new ur([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const s=jx(t),[r,o]=Dx(s);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,s,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new hg(u,o,s);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const s=jx(t),[r,o]=Dx(s);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const s=Math.floor(t/8),r=t%8;this.bitmap[s]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t,s,r,o,u){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,s,r){const o=new Map;return o.set(t,xu.createSynthesizedTargetChangeForCurrentChange(t,s,r)),new cd(Nt.min(),o,new fe(Lt),_i(),Ut())}}class xu{constructor(t,s,r,o,u){this.resumeToken=t,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,s,r){return new xu(r,s,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t,s,r,o){this.be=t,this.removedTargetIds=s,this.key=r,this.De=o}}class I2{constructor(t,s){this.targetId=t,this.Ce=s}}class k2{constructor(t,s,r=nn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=s,this.resumeToken=r,this.cause=o}}class Vx{constructor(){this.ve=0,this.Fe=Mx(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ut(),s=Ut(),r=Ut();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:St(38017,{changeType:u})}})),new xu(this.Me,this.xe,t,s,r)}qe(){this.Oe=!1,this.Fe=Mx()}Qe(t,s){this.Oe=!0,this.Fe=this.Fe.insert(t,s)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class U4{constructor(t){this.Ge=t,this.ze=new Map,this.je=_i(),this.Je=uh(),this.He=uh(),this.Ye=new fe(Lt)}Ze(t){for(const s of t.be)t.De&&t.De.isFoundDocument()?this.Xe(s,t.De):this.et(s,t.key,t.De);for(const s of t.removedTargetIds)this.et(s,t.key,t.De)}tt(t){this.forEachTarget(t,(s=>{const r=this.nt(s);switch(t.state){case 0:this.rt(s)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(t.resumeToken));break;default:St(56790,{state:t.state})}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(t){const s=t.targetId,r=t.Ce.count,o=this.ot(s);if(o){const u=o.target;if(pp(u))if(r===0){const c=new _t(u.path);this.et(s,c,on.newNoDocument(c,Nt.min()))}else Qt(r===1,20013,{expectedCount:r});else{const c=this._t(s);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(s);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(t){const s=t.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=s;let c,m;try{c=fr(r).toUint8Array()}catch(g){if(g instanceof a2)return vo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new hg(c,o,u)}catch(g){return vo(g instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,s,r){return s.Ce.count===r-this.Pt(t,s.targetId)?0:2}Pt(t,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(s,u,null),o++)})),o}Tt(t){const s=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&pp(m.target)){const g=new _t(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,on.newNoDocument(g,t))}u.Be&&(s.set(c,u.ke()),u.qe())}}));let r=Ut();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new cd(t,s,this.Ye,this.je,r);return this.je=_i(),this.Je=uh(),this.He=uh(),this.Ye=new fe(Lt),o}Xe(t,s){if(!this.rt(t))return;const r=this.Et(t,s.key)?2:0;this.nt(t).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(t)),this.He=this.He.insert(s.key,this.dt(s.key).add(t))}et(t,s,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(t)),this.He=this.He.insert(s,this.dt(s).add(t)),r&&(this.je=this.je.insert(s,r))}removeTarget(t){this.ze.delete(t)}_t(t){const s=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let s=this.ze.get(t);return s||(s=new Vx,this.ze.set(t,s)),s}dt(t){let s=this.He.get(t);return s||(s=new ze(Lt),this.He=this.He.insert(t,s)),s}It(t){let s=this.Je.get(t);return s||(s=new ze(Lt),this.Je=this.Je.insert(t,s)),s}rt(t){const s=this.ot(t)!==null;return s||pt("WatchChangeAggregator","Detected inactive target",t),s}ot(t){const s=this.ze.get(t);return s&&s.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Vx),this.Ge.getRemoteKeysForTarget(t).forEach((s=>{this.et(t,s,null)}))}Et(t,s){return this.Ge.getRemoteKeysForTarget(t).has(s)}}function uh(){return new fe(_t.comparator)}function Mx(){return new fe(_t.comparator)}const B4={asc:"ASCENDING",desc:"DESCENDING"},z4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F4={and:"AND",or:"OR"};class q4{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function vp(n,t){return n.useProto3Json||sd(t)?t:{value:t}}function Uh(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function O2(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function H4(n,t){return Uh(n,t.toTimestamp())}function zs(n){return Qt(!!n,49232),Nt.fromTimestamp((function(s){const r=dr(s);return new le(r.seconds,r.nanos)})(n))}function dg(n,t){return bp(n,t).canonicalString()}function bp(n,t){const s=(function(o){return new ie(["projects",o.projectId,"databases",o.database])})(n).child("documents");return t===void 0?s:s.child(t)}function P2(n){const t=ie.fromString(n);return Qt(F2(t),10190,{key:t.toString()}),t}function xp(n,t){return dg(n.databaseId,t.path)}function Om(n,t){const s=P2(t);if(s.get(1)!==n.databaseId.projectId)throw new ft(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+n.databaseId.projectId);if(s.get(3)!==n.databaseId.database)throw new ft(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+n.databaseId.database);return new _t(U2(s))}function L2(n,t){return dg(n.databaseId,t)}function G4(n){const t=P2(n);return t.length===4?ie.emptyPath():U2(t)}function _p(n){return new ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function U2(n){return Qt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ix(n,t,s){return{name:xp(n,t),fields:s.value.mapValue.fields}}function Y4(n,t){let s;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:St(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(Qt(b===void 0||typeof b=="string",58123),nn.fromBase64String(b||"")):(Qt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),nn.fromUint8Array(b||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(y){const b=y.code===void 0?ot.UNKNOWN:M2(y.code);return new ft(b,y.message||"")})(c);s=new k2(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Om(n,r.document.name),u=zs(r.document.updateTime),c=r.document.createTime?zs(r.document.createTime):Nt.min(),m=new _n({mapValue:{fields:r.document.fields}}),g=on.newFoundDocument(o,u,c,m),y=r.targetIds||[],b=r.removedTargetIds||[];s=new xh(y,b,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Om(n,r.document),u=r.readTime?zs(r.readTime):Nt.min(),c=on.newNoDocument(o,u),m=r.removedTargetIds||[];s=new xh([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Om(n,r.document),u=r.removedTargetIds||[];s=new xh([],u,o,null)}else{if(!("filter"in t))return St(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new k4(o,u),m=r.targetId;s=new I2(m,c)}}return s}function K4(n,t){let s;if(t instanceof bu)s={update:Ix(n,t.key,t.value)};else if(t instanceof ug)s={delete:xp(n,t.key)};else if(t instanceof br)s={update:Ix(n,t.key,t.data),updateMask:nC(t.fieldMask)};else{if(!(t instanceof V4))return St(16599,{Vt:t.type});s={verify:xp(n,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof Ph)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof lu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof uu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Lh)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw St(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(s.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:H4(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:St(27497)})(n,t.precondition)),s}function Q4(n,t){return n&&n.length>0?(Qt(t!==void 0,14353),n.map((s=>(function(o,u){let c=o.updateTime?zs(o.updateTime):zs(u);return c.isEqual(Nt.min())&&(c=zs(u)),new R4(c,o.transformResults||[])})(s,t)))):[]}function X4(n,t){return{documents:[L2(n,t.path)]}}function $4(n,t){const s={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=L2(n,o);const u=(function(y){if(y.length!==0)return z2(ps.create(y,"and"))})(t.filters);u&&(s.structuredQuery.where=u);const c=(function(y){if(y.length!==0)return y.map((b=>(function(w){return{field:ao(w.field),direction:J4(w.dir)}})(b)))})(t.orderBy);c&&(s.structuredQuery.orderBy=c);const m=vp(n,t.limit);return m!==null&&(s.structuredQuery.limit=m),t.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:s,parent:o}}function Z4(n){let t=G4(n.parent);const s=n.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){Qt(r===1,65062);const b=s.from[0];b.allDescendants?o=b.collectionId:t=t.child(b.collectionId)}let u=[];s.where&&(u=(function(x){const w=B2(x);return w instanceof ps&&g2(w)?w.getFilters():[w]})(s.where));let c=[];s.orderBy&&(c=(function(x){return x.map((w=>(function(k){return new Oh(oo(k.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(w)))})(s.orderBy));let m=null;s.limit&&(m=(function(x){let w;return w=typeof x=="object"?x.value:x,sd(w)?null:w})(s.limit));let g=null;s.startAt&&(g=(function(x){const w=!!x.before,V=x.values||[];return new kh(V,w)})(s.startAt));let y=null;return s.endAt&&(y=(function(x){const w=!x.before,V=x.values||[];return new kh(V,w)})(s.endAt)),g4(t,o,c,u,m,"F",g,y)}function W4(n,t){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St(28987,{purpose:o})}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function B2(n){return n.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=oo(s.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(s.unaryFilter.field);return ke.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=oo(s.unaryFilter.field);return ke.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=oo(s.unaryFilter.field);return ke.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return St(61313);default:return St(60726)}})(n):n.fieldFilter!==void 0?(function(s){return ke.create(oo(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return St(58110);default:return St(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(s){return ps.create(s.compositeFilter.filters.map((r=>B2(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return St(1026)}})(s.compositeFilter.op))})(n):St(30097,{filter:n})}function J4(n){return B4[n]}function tC(n){return z4[n]}function eC(n){return F4[n]}function ao(n){return{fieldPath:n.canonicalString()}}function oo(n){return tn.fromServerFormat(n.fieldPath)}function z2(n){return n instanceof ke?(function(s){if(s.op==="=="){if(_x(s.value))return{unaryFilter:{field:ao(s.field),op:"IS_NAN"}};if(xx(s.value))return{unaryFilter:{field:ao(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(_x(s.value))return{unaryFilter:{field:ao(s.field),op:"IS_NOT_NAN"}};if(xx(s.value))return{unaryFilter:{field:ao(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(s.field),op:tC(s.op),value:s.value}}})(n):n instanceof ps?(function(s){const r=s.getFilters().map((o=>z2(o)));return r.length===1?r[0]:{compositeFilter:{op:eC(s.op),filters:r}}})(n):St(54877,{filter:n})}function nC(n){const t=[];return n.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function F2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,s,r,o,u=Nt.min(),c=Nt.min(),m=nn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new rr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t){this.yt=t}}function iC(n){const t=Z4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.Cn=new aC}addToCollectionParentIndex(t,s){return this.Cn.add(s),lt.resolve()}getCollectionParents(t,s){return lt.resolve(this.Cn.getEntries(s))}addFieldIndex(t,s){return lt.resolve()}deleteFieldIndex(t,s){return lt.resolve()}deleteAllFieldIndexes(t){return lt.resolve()}createTargetIndexes(t,s){return lt.resolve()}getDocumentsMatchingTarget(t,s){return lt.resolve(null)}getIndexType(t,s){return lt.resolve(0)}getFieldIndexes(t,s){return lt.resolve([])}getNextCollectionGroupToUpdate(t){return lt.resolve(null)}getMinOffset(t,s){return lt.resolve(hr.min())}getMinOffsetFromCollectionGroup(t,s){return lt.resolve(hr.min())}updateCollectionGroup(t,s,r){return lt.resolve()}updateIndexEntries(t,s){return lt.resolve()}}class aC{constructor(){this.index={}}add(t){const s=t.lastSegment(),r=t.popLast(),o=this.index[s]||new ze(ie.comparator),u=!o.has(r);return this.index[s]=o.add(r),u}has(t){const s=t.lastSegment(),r=t.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(t){return(this.index[t]||new ze(ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q2=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(q2,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new To(0)}static cr(){return new To(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="LruGarbageCollector",oC=1048576;function Px([n,t],[s,r]){const o=Lt(n,s);return o===0?Lt(t,r):o}class lC{constructor(t){this.Ir=t,this.buffer=new ze(Px),this.Er=0}dr(){return++this.Er}Ar(t){const s=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Px(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class uC{constructor(t,s,r){this.garbageCollector=t,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){pt(Ox,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Co(s)?pt(Ox,"Ignoring IndexedDB error during garbage collection: ",s):await No(s)}await this.Vr(3e5)}))}}class cC{constructor(t,s){this.mr=t,this.params=s}calculateTargetCount(t,s){return this.mr.gr(t).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(t,s){if(s===0)return lt.resolve(nd.ce);const r=new lC(s);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,s,r){return this.mr.removeTargets(t,s,r)}removeOrphanedDocuments(t,s){return this.mr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(kx)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kx):this.yr(t,s)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,s){let r,o,u,c,m,g,y;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(t,o)))).next((x=>(r=x,m=Date.now(),this.removeTargets(t,r,s)))).next((x=>(u=x,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((x=>(y=Date.now(),io()<=qt.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function hC(n,t){return new cC(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.changes=new ha((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,on.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?lt.resolve(r):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t,s,r,o){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,s){let r=null;return this.documentOverlayCache.getOverlay(t,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,s)))).next((o=>(r!==null&&Zl(r.mutation,o,kn.empty(),le.now()),o)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.getLocalViewOfDocuments(t,r,Ut()).next((()=>r))))}getLocalViewOfDocuments(t,s,r=Ut()){const o=ea();return this.populateOverlays(t,o,s).next((()=>this.computeViews(t,s,o,r).next((u=>{let c=Fl();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,s){const r=ea();return this.populateOverlays(t,r,s).next((()=>this.computeViews(t,s,r,Ut())))}populateOverlays(t,s,r){const o=[];return r.forEach((u=>{s.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{s.set(c,m)}))}))}computeViews(t,s,r,o){let u=_i();const c=$l(),m=(function(){return $l()})();return s.forEach(((g,y)=>{const b=r.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof br)?u=u.insert(y.key,y):b!==void 0?(c.set(y.key,b.mutation.getFieldMask()),Zl(b.mutation,y,b.mutation.getFieldMask(),le.now())):c.set(y.key,kn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,b)=>c.set(y,b))),s.forEach(((y,b)=>m.set(y,new fC(b,c.get(y)??null)))),m)))}recalculateAndSaveOverlays(t,s){const r=$l();let o=new fe(((c,m)=>c-m)),u=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((c=>{for(const m of c)m.keys().forEach((g=>{const y=s.get(g);if(y===null)return;let b=r.get(g)||kn.empty();b=m.applyToLocalView(y,b),r.set(g,b);const x=(o.get(m.batchId)||Ut()).add(g);o=o.insert(m.batchId,x)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,b=g.value,x=S2();b.forEach((w=>{if(!u.has(w)){const V=D2(s.get(w),r.get(w));V!==null&&x.set(w,V),u=u.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(t,y,x))}return lt.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,s,r,o){return(function(c){return _t.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):x2(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,r,o):this.getDocumentsMatchingCollectionQuery(t,s,r,o)}getNextDocuments(t,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,r.largestBatchId,o-u.size):lt.resolve(ea());let m=iu,g=u;return c.next((y=>lt.forEach(y,((b,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),u.get(b)?lt.resolve():this.remoteDocumentCache.getEntry(t,b).next((w=>{g=g.insert(b,w)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,Ut()))).next((b=>({batchId:m,changes:E2(b)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new _t(s)).next((r=>{let o=Fl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,s,r,o){const u=s.collectionGroup;let c=Fl();return this.indexManager.getCollectionParents(t,u).next((m=>lt.forEach(m,(g=>{const y=(function(x,w){return new vu(w,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(s,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,o).next((b=>{b.forEach(((x,w)=>{c=c.insert(x,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,s,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,r,u,o)))).next((c=>{u.forEach(((g,y)=>{const b=y.getKey();c.get(b)===null&&(c=c.insert(b,on.newInvalidDocument(b)))}));let m=Fl();return c.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Zl(b.mutation,y,kn.empty(),le.now()),od(s,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,s){return lt.resolve(this.Lr.get(s))}saveBundleMetadata(t,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:zs(o.createTime)}})(s)),lt.resolve()}getNamedQuery(t,s){return lt.resolve(this.kr.get(s))}saveNamedQuery(t,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:iC(o.bundledQuery),readTime:zs(o.readTime)}})(s)),lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.overlays=new fe(_t.comparator),this.qr=new Map}getOverlay(t,s){return lt.resolve(this.overlays.get(s))}getOverlays(t,s){const r=ea();return lt.forEach(s,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,s,r){return r.forEach(((o,u)=>{this.St(t,s,u)})),lt.resolve()}removeOverlaysForBatchId(t,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),lt.resolve()}getOverlaysForCollection(t,s,r){const o=ea(),u=s.length+1,c=new _t(s.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return lt.resolve(o)}getOverlaysForCollectionGroup(t,s,r,o){let u=new fe(((y,b)=>y-b));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>r){let b=u.get(y.largestBatchId);b===null&&(b=ea(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const m=ea(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>m.set(y,b))),!(m.size()>=o)););return lt.resolve(m)}St(t,s,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new I4(s,r));let u=this.qr.get(s);u===void 0&&(u=Ut(),this.qr.set(s,u)),this.qr.set(s,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return lt.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.Qr=new ze(Ye.$r),this.Ur=new ze(Ye.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,s){const r=new Ye(t,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,s){t.forEach((r=>this.addReference(r,s)))}removeReference(t,s){this.Gr(new Ye(t,s))}zr(t,s){t.forEach((r=>this.removeReference(r,s)))}jr(t){const s=new _t(new ie([])),r=new Ye(s,t),o=new Ye(s,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const s=new _t(new ie([])),r=new Ye(s,t),o=new Ye(s,t+1);let u=Ut();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const s=new Ye(t,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&t.isEqual(r.key)}}class Ye{constructor(t,s){this.key=t,this.Yr=s}static $r(t,s){return _t.comparator(t.key,s.key)||Lt(t.Yr,s.Yr)}static Kr(t,s){return Lt(t.Yr,s.Yr)||_t.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Ye.$r)}checkEmpty(t){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new M4(u,s,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Ye(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return lt.resolve(c)}lookupMutationBatch(t,s){return lt.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(t,s){const r=s+1,o=this.ei(r),u=o<0?0:o;return lt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?sg:this.tr-1)}getAllMutationBatches(t){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const r=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),lt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,s){let r=new ze(Lt);return s.forEach((o=>{const u=new Ye(o,0),c=new Ye(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),lt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,s){const r=s.path,o=r.length+1;let u=r;_t.isDocumentKey(u)||(u=u.child(""));const c=new Ye(new _t(u),0);let m=new ze(Lt);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Yr)),!0)}),c),lt.resolve(this.ti(m))}ti(t){const s=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(t,s){Qt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return lt.forEach(s.mutations,(o=>{const u=new Ye(o.key,s.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,s){const r=new Ye(s,0),o=this.Zr.firstAfterOrEqual(r);return lt.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,lt.resolve()}ni(t,s){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const s=this.ei(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t){this.ri=t,this.docs=(function(){return new fe(_t.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const r=s.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const r=this.docs.get(s);return lt.resolve(r?r.document.mutableCopy():on.newInvalidDocument(s))}getEntries(t,s){let r=_i();return s.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():on.newInvalidDocument(o))})),lt.resolve(r)}getDocumentsMatchingQuery(t,s,r,o){let u=_i();const c=s.path,m=new _t(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||QN(KN(b),r)<=0||(o.has(b.key)||od(s,b))&&(u=u.insert(b.key,b.mutableCopy()))}return lt.resolve(u)}getAllFromCollectionGroup(t,s,r,o){St(9500)}ii(t,s){return lt.forEach(this.docs,(r=>s(r)))}newChangeBuffer(t){return new xC(this)}getSize(t){return lt.resolve(this.size)}}class xC extends dC{constructor(t){super(),this.Nr=t}applyChanges(t){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),lt.waitFor(s)}getFromCache(t,s){return this.Nr.getEntry(t,s)}getAllFromCache(t,s){return this.Nr.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t){this.persistence=t,this.si=new ha((s=>ag(s)),og),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.oi=0,this._i=new fg,this.targetCount=0,this.ai=To.ur()}forEachTarget(t,s){return this.si.forEach(((r,o)=>s(o))),lt.resolve()}getLastRemoteSnapshotVersion(t){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return lt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(t,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),lt.resolve()}Pr(t){this.si.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.ai=new To(s),this.highestTargetId=s),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,s){return this.Pr(s),this.targetCount+=1,lt.resolve()}updateTargetData(t,s){return this.Pr(s),lt.resolve()}removeTargetData(t,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,lt.resolve()}removeTargets(t,s,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=s&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),lt.waitFor(u).next((()=>o))}getTargetCount(t){return lt.resolve(this.targetCount)}getTargetData(t,s){const r=this.si.get(s)||null;return lt.resolve(r)}addMatchingKeys(t,s,r){return this._i.Wr(s,r),lt.resolve()}removeMatchingKeys(t,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,u=[];return o&&s.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),lt.waitFor(u)}removeMatchingKeysForTargetId(t,s){return this._i.jr(s),lt.resolve()}getMatchingKeysForTargetId(t,s){const r=this._i.Hr(s);return lt.resolve(r)}containsKey(t,s){return lt.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,s){this.ui={},this.overlays={},this.ci=new nd(0),this.li=!1,this.li=!0,this.hi=new yC,this.referenceDelegate=t(this),this.Pi=new _C(this),this.indexManager=new rC,this.remoteDocumentCache=(function(o){return new bC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new sC(s),this.Ii=new pC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new gC,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let r=this.ui[t.toKey()];return r||(r=new vC(s,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,s,r){pt("MemoryPersistence","Starting transaction:",t);const o=new TC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,s){return lt.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,s))))}}class TC extends $N{constructor(t){super(),this.currentSequenceNumber=t}}class mg{constructor(t){this.persistence=t,this.Ri=new fg,this.Vi=null}static mi(t){return new mg(t)}get fi(){if(this.Vi)return this.Vi;throw St(60996)}addReference(t,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),lt.resolve()}removeReference(t,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),lt.resolve()}markPotentiallyOrphaned(t,s){return this.fi.add(s.toString()),lt.resolve()}removeTarget(t,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,s.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,s)))}Ei(){this.Vi=new Set}di(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.fi,(r=>{const o=_t.fromPath(r);return this.gi(t,o).next((u=>{u||s.removeEntry(o,Nt.min())}))})).next((()=>(this.Vi=null,s.apply(t))))}updateLimboDocument(t,s){return this.gi(t,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(t){return 0}gi(t,s){return lt.or([()=>lt.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Ai(t,s)])}}class Bh{constructor(t,s){this.persistence=t,this.pi=new ha((r=>JN(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=hC(this,s)}static mi(t,s){return new Bh(t,s)}Ei(){}di(t){return lt.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}gr(t){const s=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>s.next((o=>r+o))))}wr(t){let s=0;return this.pr(t,(r=>{s++})).next((()=>s))}pr(t,s){return lt.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?lt.resolve():s(o)))))}removeTargets(t,s,r){return this.persistence.getTargetCache().removeTargets(t,s,r)}removeOrphanedDocuments(t,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,s).next((m=>{m||(r++,u.removeEntry(c,Nt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,s){return this.pi.set(s,t.currentSequenceNumber),lt.resolve()}removeTarget(t,s){const r=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,s,r){return this.pi.set(r,t.currentSequenceNumber),lt.resolve()}removeReference(t,s,r){return this.pi.set(r,t.currentSequenceNumber),lt.resolve()}updateLimboDocument(t,s){return this.pi.set(s,t.currentSequenceNumber),lt.resolve()}Ti(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=yh(t.data.value)),s}br(t,s,r){return lt.or([()=>this.persistence.Ai(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const o=this.pi.get(s);return lt.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t,s,r,o){this.targetId=t,this.fromCache=s,this.Es=r,this.ds=o}static As(t,s){let r=Ut(),o=Ut();for(const u of s.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new pg(t,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _A()?8:ZN(bA())>0?6:4})()}initialize(t,s){this.ps=t,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(t,s,r,o){const u={result:null};return this.ys(t,s).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,s,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new wC;return this.Ss(t,s,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,s,c,m.size)}))})).next((()=>u.result))}bs(t,s,r,o){return r.documentReadCount<this.fs?(io()<=qt.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",ro(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),lt.resolve()):(io()<=qt.DEBUG&&pt("QueryEngine","Query:",ro(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(io()<=qt.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",ro(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Bs(s))):lt.resolve())}ys(t,s){if(Sx(s))return lt.resolve(null);let r=Bs(s);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=yp(s,null,"F"),r=Bs(s)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Ut(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(s,m);return this.Cs(s,y,c,g.readTime)?this.ys(t,yp(s,null,"F")):this.vs(t,y,s,g)}))))})))))}ws(t,s,r,o){return Sx(s)||o.isEqual(Nt.min())?lt.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(s,u);return this.Cs(s,c,r,o)?lt.resolve(null):(io()<=qt.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ro(s)),this.vs(t,c,s,YN(o,iu)).next((m=>m)))}))}Ds(t,s){let r=new ze(T2(t));return s.forEach(((o,u)=>{od(t,u)&&(r=r.add(u))})),r}Cs(t,s,r,o){if(t.limit===null)return!1;if(r.size!==s.size)return!0;const u=t.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,s,r){return io()<=qt.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",ro(s)),this.ps.getDocumentsMatchingQuery(t,s,hr.min(),r)}vs(t,s,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(s.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="LocalStore",SC=3e8;class AC{constructor(t,s,r,o){this.persistence=t,this.Fs=s,this.serializer=o,this.Ms=new fe(Lt),this.xs=new ha((u=>ag(u)),og),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new mC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.Ms)))}}function NC(n,t,s,r){return new AC(n,t,s,r)}async function G2(n,t){const s=Rt(n);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,s.Bs(t),s.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Ut();for(const y of o){c.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){m.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return s.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:m})))}))}))}function CC(n,t){const s=Rt(n);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,b){const x=y.batch,w=x.keys();let V=lt.resolve();return w.forEach((k=>{V=V.next((()=>b.getEntry(g,k))).next((U=>{const L=y.docVersions.get(k);Qt(L!==null,48541),U.version.compareTo(L)<0&&(x.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),b.addEntry(U)))}))})),V.next((()=>m.mutationQueue.removeMutationBatch(g,x)))})(s,r,t,u).next((()=>u.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Ut();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(t)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function Y2(n){const t=Rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.Pi.getLastRemoteSnapshotVersion(s)))}function RC(n,t){const s=Rt(n),r=t.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const m=[];t.targetChanges.forEach(((b,x)=>{const w=o.get(x);if(!w)return;m.push(s.Pi.removeMatchingKeys(u,b.removedDocuments,x).next((()=>s.Pi.addMatchingKeys(u,b.addedDocuments,x))));let V=w.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(x)!==null?V=V.withResumeToken(nn.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),o=o.insert(x,V),(function(U,L,z){return U.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=SC?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(w,V,b)&&m.push(s.Pi.updateTargetData(u,V))}));let g=_i(),y=Ut();if(t.documentUpdates.forEach((b=>{t.resolvedLimboDocuments.has(b)&&m.push(s.persistence.referenceDelegate.updateLimboDocument(u,b))})),m.push(jC(u,c,t.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!r.isEqual(Nt.min())){const b=s.Pi.getLastRemoteSnapshotVersion(u).next((x=>s.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(b)}return lt.waitFor(m).next((()=>c.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(s.Ms=o,u)))}function jC(n,t,s){let r=Ut(),o=Ut();return s.forEach((u=>r=r.add(u))),t.getEntries(n,r).next((u=>{let c=_i();return s.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Nt.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):pt(gg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function DC(n,t){const s=Rt(n);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=sg),s.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function VC(n,t){const s=Rt(n);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,t).next((u=>u?(o=u,lt.resolve(o)):s.Pi.allocateTargetId(r).next((c=>(o=new rr(t,c,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(t,r.targetId)),r}))}async function Tp(n,t,s){const r=Rt(n),o=r.Ms.get(t),u=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Co(c))throw c;pt(gg,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function Lx(n,t,s){const r=Rt(n);let o=Nt.min(),u=Ut();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,y,b){const x=Rt(g),w=x.xs.get(b);return w!==void 0?lt.resolve(x.Ms.get(w)):x.Pi.getTargetData(y,b)})(r,c,Bs(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,s?o:Nt.min(),s?u:Ut()))).next((m=>(MC(r,v4(t),m),{documents:m,Qs:u})))))}function MC(n,t,s){let r=n.Os.get(t)||Nt.min();s.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),n.Os.set(t,r)}class Ux{constructor(){this.activeTargetIds=E4()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class IC{constructor(){this.Mo=new Ux,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,r){}addLocalQueryTarget(t,s=!0){return s&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,s,r){this.xo[t]=s}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Ux,Promise.resolve()}handleUserChange(t,s,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="ConnectivityMonitor";class zx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pt(Bx,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){pt(Bx,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function wp(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="RestConnection",OC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Mh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,s,r,o,u){const c=wp(),m=this.zo(t,s.toUriEncodedString());pt(Pm,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:y}=new URL(m),b=td(y);return this.Jo(t,m,g,r,b).then((x=>(pt(Pm,`Received RPC '${t}' ${c}: `,x),x)),(x=>{throw vo(Pm,`RPC '${t}' ${c} failed with error: `,x,"url: ",m,"request:",r),x}))}Ho(t,s,r,o,u,c){return this.Go(t,s,r,o,u)}jo(t,s,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ao})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,s){const r=OC[t];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class UC extends PC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,s,r,o,u){const c=wp();return new Promise(((m,g)=>{const y=new X_;y.setWithCredentials(!0),y.listenOnce($_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case gh.NO_ERROR:const x=y.getResponseJson();pt(rn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(x)),m(x);break;case gh.TIMEOUT:pt(rn,`RPC '${t}' ${c} timed out`),g(new ft(ot.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const w=y.getStatus();if(pt(rn,`RPC '${t}' ${c} failed with status:`,w,"response text:",y.getResponseText()),w>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const k=V==null?void 0:V.error;if(k&&k.status&&k.message){const U=(function(z){const W=z.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(W)>=0?W:ot.UNKNOWN})(k.status);g(new ft(U,k.message))}else g(new ft(ot.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ft(ot.UNAVAILABLE,"Connection failed."));break;default:St(9055,{l_:t,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{pt(rn,`RPC '${t}' ${c} completed.`)}}));const b=JSON.stringify(o);pt(rn,`RPC '${t}' ${c} sending request:`,o),y.send(s,"POST",b,r,15)}))}T_(t,s,r){const o=wp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=J_(),m=W_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,s,r),g.encodeInitMessageHeaders=!0;const b=u.join("");pt(rn,`Creating RPC '${t}' stream ${o}: ${b}`,g);const x=c.createWebChannel(b,g);this.I_(x);let w=!1,V=!1;const k=new LC({Yo:L=>{V?pt(rn,`Not sending because RPC '${t}' stream ${o} is closed:`,L):(w||(pt(rn,`Opening RPC '${t}' stream ${o} transport.`),x.open(),w=!0),pt(rn,`RPC '${t}' stream ${o} sending:`,L),x.send(L))},Zo:()=>x.close()}),U=(L,z,W)=>{L.listen(z,(K=>{try{W(K)}catch(tt){setTimeout((()=>{throw tt}),0)}}))};return U(x,zl.EventType.OPEN,(()=>{V||(pt(rn,`RPC '${t}' stream ${o} transport opened.`),k.o_())})),U(x,zl.EventType.CLOSE,(()=>{V||(V=!0,pt(rn,`RPC '${t}' stream ${o} transport closed`),k.a_(),this.E_(x))})),U(x,zl.EventType.ERROR,(L=>{V||(V=!0,vo(rn,`RPC '${t}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),k.a_(new ft(ot.UNAVAILABLE,"The operation could not be completed")))})),U(x,zl.EventType.MESSAGE,(L=>{var z;if(!V){const W=L.data[0];Qt(!!W,16349);const K=W,tt=(K==null?void 0:K.error)||((z=K[0])==null?void 0:z.error);if(tt){pt(rn,`RPC '${t}' stream ${o} received error:`,tt);const et=tt.status;let J=(function(A){const N=Me[A];if(N!==void 0)return M2(N)})(et),j=tt.message;J===void 0&&(J=ot.INTERNAL,j="Unknown error status: "+et+" with message "+tt.message),V=!0,k.a_(new ft(J,j)),x.close()}else pt(rn,`RPC '${t}' stream ${o} received:`,W),k.u_(W)}})),U(m,Z_.STAT_EVENT,(L=>{L.stat===cp.PROXY?pt(rn,`RPC '${t}' stream ${o} detected buffering proxy`):L.stat===cp.NOPROXY&&pt(rn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((s=>s===t))}}function Lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n){return new q4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(t,s,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=s,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&pt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="PersistentStream";class Q2{constructor(t,s,r,o,u,c,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new K2(t,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():s&&s.code===ot.RESOURCE_EXHAUSTED?(xi(s.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===ot.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(s)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{t((()=>{const o=new ft(ot.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,s){const r=this.W_(this.D_);this.stream=this.j_(t,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return pt(Fx,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return s=>{this.Mi.enqueueAndForget((()=>this.D_===t?s():(pt(Fx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BC extends Q2{constructor(t,s,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,c),this.serializer=u}j_(t,s){return this.connection.T_("Listen",t,s)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const s=Y4(this.serializer,t),r=(function(u){if(!("targetChange"in u))return Nt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Nt.min():c.readTime?zs(c.readTime):Nt.min()})(t);return this.listener.H_(s,r)}Y_(t){const s={};s.database=_p(this.serializer),s.addTarget=(function(u,c){let m;const g=c.target;if(m=pp(g)?{documents:X4(u,g)}:{query:$4(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=O2(u,c.resumeToken);const y=vp(u,c.expectedCount);y!==null&&(m.expectedCount=y)}else if(c.snapshotVersion.compareTo(Nt.min())>0){m.readTime=Uh(u,c.snapshotVersion.toTimestamp());const y=vp(u,c.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,t);const r=W4(this.serializer,t);r&&(s.labels=r),this.q_(s)}Z_(t){const s={};s.database=_p(this.serializer),s.removeTarget=t,this.q_(s)}}class zC extends Q2{constructor(t,s,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,s){return this.connection.T_("Write",t,s)}J_(t){return Qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const s=Q4(t.writeResults,t.commitTime),r=zs(t.commitTime);return this.listener.na(r,s)}ra(){const t={};t.database=_p(this.serializer),this.q_(t)}ea(t){const s={streamToken:this.lastStreamToken,writes:t.map((r=>K4(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{}class qC extends FC{constructor(t,s,r,o){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ft(ot.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,bp(s,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ft(ot.UNKNOWN,u.toString())}))}Ho(t,s,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,bp(s,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(ot.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class HC{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xi(s),this.aa=!1):pt("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="RemoteStore";class GC{constructor(t,s,r,o,u){this.localStore=t,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{da(this)&&(pt(ua,"Restarting streams for network reachability change."),await(async function(g){const y=Rt(g);y.Ea.add(4),await _u(y),y.Ra.set("Unknown"),y.Ea.delete(4),await dd(y)})(this))}))})),this.Ra=new HC(r,o)}}async function dd(n){if(da(n))for(const t of n.da)await t(!0)}async function _u(n){for(const t of n.da)await t(!1)}function X2(n,t){const s=Rt(n);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),xg(s)?bg(s):Ro(s).O_()&&vg(s,t))}function yg(n,t){const s=Rt(n),r=Ro(s);s.Ia.delete(t),r.O_()&&$2(s,t),s.Ia.size===0&&(r.O_()?r.L_():da(s)&&s.Ra.set("Unknown"))}function vg(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Nt.min())>0){const s=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Ro(n).Y_(t)}function $2(n,t){n.Va.Ue(t),Ro(n).Z_(t)}function bg(n){n.Va=new U4({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Ro(n).start(),n.Ra.ua()}function xg(n){return da(n)&&!Ro(n).x_()&&n.Ia.size>0}function da(n){return Rt(n).Ea.size===0}function Z2(n){n.Va=void 0}async function YC(n){n.Ra.set("Online")}async function KC(n){n.Ia.forEach(((t,s)=>{vg(n,t)}))}async function QC(n,t){Z2(n),xg(n)?(n.Ra.ha(t),bg(n)):n.Ra.set("Unknown")}async function XC(n,t,s){if(n.Ra.set("Online"),t instanceof k2&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(n,t)}catch(r){pt(ua,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await zh(n,r)}else if(t instanceof xh?n.Va.Ze(t):t instanceof I2?n.Va.st(t):n.Va.tt(t),!s.isEqual(Nt.min()))try{const r=await Y2(n.localStore);s.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(nn.EMPTY_BYTE_STRING,b.snapshotVersion)),$2(u,g);const x=new rr(b.target,g,y,b.sequenceNumber);vg(u,x)})),u.remoteSyncer.applyRemoteEvent(m)})(n,s)}catch(r){pt(ua,"Failed to raise snapshot:",r),await zh(n,r)}}async function zh(n,t,s){if(!Co(t))throw t;n.Ea.add(1),await _u(n),n.Ra.set("Offline"),s||(s=()=>Y2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pt(ua,"Retrying IndexedDB access"),await s(),n.Ea.delete(1),await dd(n)}))}function W2(n,t){return t().catch((s=>zh(n,s,t)))}async function fd(n){const t=Rt(n),s=pr(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:sg;for(;$C(t);)try{const o=await DC(t.localStore,r);if(o===null){t.Ta.length===0&&s.L_();break}r=o.batchId,ZC(t,o)}catch(o){await zh(t,o)}J2(t)&&tT(t)}function $C(n){return da(n)&&n.Ta.length<10}function ZC(n,t){n.Ta.push(t);const s=pr(n);s.O_()&&s.X_&&s.ea(t.mutations)}function J2(n){return da(n)&&!pr(n).x_()&&n.Ta.length>0}function tT(n){pr(n).start()}async function WC(n){pr(n).ra()}async function JC(n){const t=pr(n);for(const s of n.Ta)t.ea(s.mutations)}async function tR(n,t,s){const r=n.Ta.shift(),o=cg.from(r,t,s);await W2(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await fd(n)}async function eR(n,t){t&&pr(n).X_&&await(async function(r,o){if((function(c){return O4(c)&&c!==ot.ABORTED})(o.code)){const u=r.Ta.shift();pr(r).B_(),await W2(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await fd(r)}})(n,t),J2(n)&&tT(n)}async function qx(n,t){const s=Rt(n);s.asyncQueue.verifyOperationInProgress(),pt(ua,"RemoteStore received new credentials");const r=da(s);s.Ea.add(3),await _u(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await dd(s)}async function nR(n,t){const s=Rt(n);t?(s.Ea.delete(2),await dd(s)):t||(s.Ea.add(2),await _u(s),s.Ra.set("Unknown"))}function Ro(n){return n.ma||(n.ma=(function(s,r,o){const u=Rt(s);return u.sa(),new BC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Xo:YC.bind(null,n),t_:KC.bind(null,n),r_:QC.bind(null,n),H_:XC.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),xg(n)?bg(n):n.Ra.set("Unknown")):(await n.ma.stop(),Z2(n))}))),n.ma}function pr(n){return n.fa||(n.fa=(function(s,r,o){const u=Rt(s);return u.sa(),new zC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:WC.bind(null,n),r_:eR.bind(null,n),ta:JC.bind(null,n),na:tR.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await fd(n)):(await n.fa.stop(),n.Ta.length>0&&(pt(ua,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(t,s,r,o,u){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,r,o,u){const c=Date.now()+r,m=new _g(t,s,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(ot.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(n,t){if(xi("AsyncQueue",`${t}: ${n}`),Co(n))return new ft(ot.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{static emptySet(t){return new po(t.comparator)}constructor(t){this.comparator=t?(s,r)=>t(s,r)||_t.comparator(s.key,r.key):(s,r)=>_t.comparator(s.key,r.key),this.keyedMap=Fl(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,r)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof po)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const r=new po;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.ga=new fe(_t.comparator)}track(t){const s=t.doc.key,r=this.ga.get(s);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(s,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(s):t.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):St(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(s,t)}ya(){const t=[];return this.ga.inorderTraversal(((s,r)=>{t.push(r)})),t}}class wo{constructor(t,s,r,o,u,c,m,g,y){this.query=t,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,s,r,o,u){const c=[];return s.forEach((m=>{c.push({type:0,doc:m})})),new wo(t,s,po.emptySet(s),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ad(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,r=t.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class iR{constructor(){this.queries=Gx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=Rt(s),u=o.queries;o.queries=Gx(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new ft(ot.ABORTED,"Firestore shutting down"))}}function Gx(){return new ha((n=>_2(n)),ad)}async function wg(n,t){const s=Rt(n);let r=3;const o=t.query;let u=s.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new sR,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await s.onListen(o,!0);break;case 1:u.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(c){const m=Tg(c,`Initialization of query '${ro(t.query)}' failed`);return void t.onError(m)}s.queries.set(o,u),u.Sa.push(t),t.va(s.onlineState),u.wa&&t.Fa(u.wa)&&Sg(s)}async function Eg(n,t){const s=Rt(n),r=t.query;let o=3;const u=s.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function rR(n,t){const s=Rt(n);let r=!1;for(const o of t){const u=o.query,c=s.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&Sg(s)}function aR(n,t,s){const r=Rt(n),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(s);r.queries.delete(t)}function Sg(n){n.Ca.forEach((t=>{t.next()}))}var Ep,Yx;(Yx=Ep||(Ep={})).Ma="default",Yx.Cache="cache";class Ag{constructor(t,s,r){this.query=t,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new wo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),s=!0):this.La(t,this.onlineState)&&(this.ka(t),s=!0),this.Na=t,s}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),s=!0),s}La(t,s){if(!t.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(t){t=wo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t){this.key=t}}class nT{constructor(t){this.key=t}}class oR{constructor(t,s){this.query=t,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ut(),this.mutatedKeys=Ut(),this.eu=T2(t),this.tu=new po(this.eu)}get nu(){return this.Ya}ru(t,s){const r=s?s.iu:new Hx,o=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((b,x)=>{const w=o.get(b),V=od(this.query,x)?x:null,k=!!w&&this.mutatedKeys.has(w.key),U=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let L=!1;w&&V?w.data.isEqual(V.data)?k!==U&&(r.track({type:3,doc:V}),L=!0):this.su(w,V)||(r.track({type:2,doc:V}),L=!0,(g&&this.eu(V,g)>0||y&&this.eu(V,y)<0)&&(m=!0)):!w&&V?(r.track({type:0,doc:V}),L=!0):w&&!V&&(r.track({type:1,doc:w}),L=!0,(g||y)&&(m=!0)),L&&(V?(c=c.add(V),u=U?u.add(b):u.delete(b)):(c=c.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((b,x)=>(function(V,k){const U=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St(20277,{Rt:L})}};return U(V)-U(k)})(b.type,x.type)||this.eu(b.doc,x.doc))),this.ou(r),o=o??!1;const m=s&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,c.length!==0||y?{snapshot:new wo(this.query,t.tu,u,c,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ut(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return t.forEach((r=>{this.Xa.has(r)||s.push(new nT(r))})),this.Xa.forEach((r=>{t.has(r)||s.push(new eT(r))})),s}cu(t){this.Ya=t.Qs,this.Xa=Ut();const s=this.ru(t.documents);return this.applyChanges(s,!0)}lu(){return wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ng="SyncEngine";class lR{constructor(t,s,r){this.query=t,this.targetId=s,this.view=r}}class uR{constructor(t){this.key=t,this.hu=!1}}class cR{constructor(t,s,r,o,u,c){this.localStore=t,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ha((m=>_2(m)),ad),this.Iu=new Map,this.Eu=new Set,this.du=new fe(_t.comparator),this.Au=new Map,this.Ru=new fg,this.Vu={},this.mu=new Map,this.fu=To.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hR(n,t,s=!0){const r=lT(n);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await sT(r,t,s,!0),o}async function dR(n,t){const s=lT(n);await sT(s,t,!0,!1)}async function sT(n,t,s,r){const o=await VC(n.localStore,Bs(t)),u=o.targetId,c=n.sharedClientState.addLocalQueryTarget(u,s);let m;return r&&(m=await fR(n,t,u,c==="current",o.resumeToken)),n.isPrimaryClient&&s&&X2(n.remoteStore,o),m}async function fR(n,t,s,r,o){n.pu=(x,w,V)=>(async function(U,L,z,W){let K=L.view.ru(z);K.Cs&&(K=await Lx(U.localStore,L.query,!1).then((({documents:j})=>L.view.ru(j,K))));const tt=W&&W.targetChanges.get(L.targetId),et=W&&W.targetMismatches.get(L.targetId)!=null,J=L.view.applyChanges(K,U.isPrimaryClient,tt,et);return Qx(U,L.targetId,J.au),J.snapshot})(n,x,w,V);const u=await Lx(n.localStore,t,!0),c=new oR(t,u.Qs),m=c.ru(u.documents),g=xu.createSynthesizedTargetChangeForCurrentChange(s,r&&n.onlineState!=="Offline",o),y=c.applyChanges(m,n.isPrimaryClient,g);Qx(n,s,y.au);const b=new lR(t,s,c);return n.Tu.set(t,b),n.Iu.has(s)?n.Iu.get(s).push(t):n.Iu.set(s,[t]),y.snapshot}async function mR(n,t,s){const r=Rt(n),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!ad(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Tp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&yg(r.remoteStore,o.targetId),Sp(r,o.targetId)})).catch(No)):(Sp(r,o.targetId),await Tp(r.localStore,o.targetId,!0))}async function pR(n,t){const s=Rt(n),r=s.Tu.get(t),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),yg(s.remoteStore,r.targetId))}async function gR(n,t,s){const r=wR(n);try{const o=await(function(c,m){const g=Rt(c),y=le.now(),b=m.reduce(((V,k)=>V.add(k.key)),Ut());let x,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let k=_i(),U=Ut();return g.Ns.getEntries(V,b).next((L=>{k=L,k.forEach(((z,W)=>{W.isValidDocument()||(U=U.add(z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(V,k))).next((L=>{x=L;const z=[];for(const W of m){const K=D4(W,x.get(W.key).overlayedDocument);K!=null&&z.push(new br(W.key,K,f2(K.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(V,y,z,m)})).next((L=>{w=L;const z=L.applyToLocalDocumentSet(x,U);return g.documentOverlayCache.saveOverlays(V,L.batchId,z)}))})).then((()=>({batchId:w.batchId,changes:E2(x)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let y=c.Vu[c.currentUser.toKey()];y||(y=new fe(Lt)),y=y.insert(m,g),c.Vu[c.currentUser.toKey()]=y})(r,o.batchId,s),await Tu(r,o.changes),await fd(r.remoteStore)}catch(o){const u=Tg(o,"Failed to persist write");s.reject(u)}}async function iT(n,t){const s=Rt(n);try{const r=await RC(s.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=s.Au.get(u);c&&(Qt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Qt(c.hu,14607):o.removedDocuments.size>0&&(Qt(c.hu,42227),c.hu=!1))})),await Tu(s,r,t)}catch(r){await No(r)}}function Kx(n,t,s){const r=Rt(n);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=Rt(c);g.onlineState=m;let y=!1;g.queries.forEach(((b,x)=>{for(const w of x.Sa)w.va(m)&&(y=!0)})),y&&Sg(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function yR(n,t,s){const r=Rt(n);r.sharedClientState.updateQueryState(t,"rejected",s);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new fe(_t.comparator);c=c.insert(u,on.newNoDocument(u,Nt.min()));const m=Ut().add(u),g=new cd(Nt.min(),new Map,new fe(Lt),c,m);await iT(r,g),r.du=r.du.remove(u),r.Au.delete(t),Cg(r)}else await Tp(r.localStore,t,!1).then((()=>Sp(r,t,s))).catch(No)}async function vR(n,t){const s=Rt(n),r=t.batch.batchId;try{const o=await CC(s.localStore,t);aT(s,r,null),rT(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Tu(s,o)}catch(o){await No(o)}}async function bR(n,t,s){const r=Rt(n);try{const o=await(function(c,m){const g=Rt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,m).next((x=>(Qt(x!==null,37113),b=x.keys(),g.mutationQueue.removeMutationBatch(y,x)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(r.localStore,t);aT(r,t,s),rT(r,t),r.sharedClientState.updateMutationState(t,"rejected",s),await Tu(r,o)}catch(o){await No(o)}}function rT(n,t){(n.mu.get(t)||[]).forEach((s=>{s.resolve()})),n.mu.delete(t)}function aT(n,t,s){const r=Rt(n);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(s?u.reject(s):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function Sp(n,t,s=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),s&&n.Pu.yu(r,s);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((r=>{n.Ru.containsKey(r)||oT(n,r)}))}function oT(n,t){n.Eu.delete(t.path.canonicalString());const s=n.du.get(t);s!==null&&(yg(n.remoteStore,s),n.du=n.du.remove(t),n.Au.delete(s),Cg(n))}function Qx(n,t,s){for(const r of s)r instanceof eT?(n.Ru.addReference(r.key,t),xR(n,r)):r instanceof nT?(pt(Ng,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||oT(n,r.key)):St(19791,{wu:r})}function xR(n,t){const s=t.key,r=s.path.canonicalString();n.du.get(s)||n.Eu.has(r)||(pt(Ng,"New document in limbo: "+s),n.Eu.add(r),Cg(n))}function Cg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const s=new _t(ie.fromString(t)),r=n.fu.next();n.Au.set(r,new uR(s)),n.du=n.du.insert(s,r),X2(n.remoteStore,new rr(Bs(rd(s.path)),r,"TargetPurposeLimboResolution",nd.ce))}}async function Tu(n,t,s){const r=Rt(n),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,s).then((y=>{var b;if((y||s)&&r.isPrimaryClient){const x=y?!y.fromCache:(b=s==null?void 0:s.targetChanges.get(g.targetId))==null?void 0:b.current;r.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){o.push(y);const x=pg.As(g.targetId,y);u.push(x)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,y){const b=Rt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>lt.forEach(y,(w=>lt.forEach(w.Es,(V=>b.persistence.referenceDelegate.addReference(x,w.targetId,V))).next((()=>lt.forEach(w.ds,(V=>b.persistence.referenceDelegate.removeReference(x,w.targetId,V)))))))))}catch(x){if(!Co(x))throw x;pt(gg,"Failed to update sequence numbers: "+x)}for(const x of y){const w=x.targetId;if(!x.fromCache){const V=b.Ms.get(w),k=V.snapshotVersion,U=V.withLastLimboFreeSnapshotVersion(k);b.Ms=b.Ms.insert(w,U)}}})(r.localStore,u))}async function _R(n,t){const s=Rt(n);if(!s.currentUser.isEqual(t)){pt(Ng,"User change. New user:",t.toKey());const r=await G2(s.localStore,t);s.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new ft(ot.CANCELLED,c))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Tu(s,r.Ls)}}function TR(n,t){const s=Rt(n),r=s.Au.get(t);if(r&&r.hu)return Ut().add(r.key);{let o=Ut();const u=s.Iu.get(t);if(!u)return o;for(const c of u){const m=s.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function lT(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=iT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=TR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yR.bind(null,t),t.Pu.H_=rR.bind(null,t.eventManager),t.Pu.yu=aR.bind(null,t.eventManager),t}function wR(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bR.bind(null,t),t}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=hd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,s){return null}Mu(t,s){return null}vu(t){return NC(this.persistence,new EC,t.initialUser,this.serializer)}Cu(t){return new H2(mg.mi,this.serializer)}Du(t){return new IC}async terminate(){var t,s;(t=this.gcScheduler)==null||t.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class ER extends Fh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,s){Qt(this.persistence.referenceDelegate instanceof Bh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uC(r,t.asyncQueue,s)}Cu(t){const s=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new H2((r=>Bh.mi(r,s)),this.serializer)}}class Ap{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_R.bind(null,this.syncEngine),await nR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new iR})()}createDatastore(t){const s=hd(t.databaseInfo.databaseId),r=(function(u){return new UC(u)})(t.databaseInfo);return(function(u,c,m,g){return new qC(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,s)}createRemoteStore(t){return(function(r,o,u,c,m){return new GC(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(s=>Kx(this.syncEngine,s,0)),(function(){return zx.v()?new zx:new kC})())}createSyncEngine(t,s){return(function(o,u,c,m,g,y,b){const x=new cR(o,u,c,m,g,y);return b&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await(async function(o){const u=Rt(o);pt(ua,"RemoteStore shutting down."),u.Ea.add(5),await _u(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(s=this.eventManager)==null||s.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):xi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="FirestoreClient";class SR{constructor(t,s,r,o,u){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{pt(gr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(pt(gr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const r=Tg(s,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Um(n,t){n.asyncQueue.verifyOperationInProgress(),pt(gr,"Initializing OfflineComponentProvider");const s=n.configuration;await t.initialize(s);let r=s.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await G2(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function Xx(n,t){n.asyncQueue.verifyOperationInProgress();const s=await AR(n);pt(gr,"Initializing OnlineComponentProvider"),await t.initialize(s,n.configuration),n.setCredentialChangeListener((r=>qx(t.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>qx(t.remoteStore,o))),n._onlineComponents=t}async function AR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pt(gr,"Using user provided OfflineComponentProvider");try{await Um(n,n._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(o){return o.name==="FirebaseError"?o.code===ot.FAILED_PRECONDITION||o.code===ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;vo("Error using user provided cache. Falling back to memory cache: "+s),await Um(n,new Fh)}}else pt(gr,"Using default OfflineComponentProvider"),await Um(n,new ER(void 0));return n._offlineComponents}async function uT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pt(gr,"Using user provided OnlineComponentProvider"),await Xx(n,n._uninitializedComponentsProvider._online)):(pt(gr,"Using default OnlineComponentProvider"),await Xx(n,new Ap))),n._onlineComponents}function NR(n){return uT(n).then((t=>t.syncEngine))}async function qh(n){const t=await uT(n),s=t.eventManager;return s.onListen=hR.bind(null,t.syncEngine),s.onUnlisten=mR.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=dR.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=pR.bind(null,t.syncEngine),s}function CR(n,t,s={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,y){const b=new Rg({next:w=>{b.Nu(),c.enqueueAndForget((()=>Eg(u,x)));const V=w.docs.has(m);!V&&w.fromCache?y.reject(new ft(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&w.fromCache&&g&&g.source==="server"?y.reject(new ft(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),x=new Ag(rd(m.path),b,{includeMetadataChanges:!0,qa:!0});return wg(u,x)})(await qh(n),n.asyncQueue,t,s,r))),r.promise}function RR(n,t,s={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,y){const b=new Rg({next:w=>{b.Nu(),c.enqueueAndForget((()=>Eg(u,x))),w.fromCache&&g.source==="server"?y.reject(new ft(ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),x=new Ag(m,b,{includeMetadataChanges:!0,qa:!0});return wg(u,x)})(await qh(n),n.asyncQueue,t,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firestore.googleapis.com",Zx=!0;class Wx{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ft(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hT,this.ssl=Zx}else this.host=t.host,this.ssl=t.ssl??Zx;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=q2;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<oC)throw new ft(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}GN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cT(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ft(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ft(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ft(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class md{constructor(t,s,r,o){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wx(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new kN;switch(r.type){case"firstParty":return new UN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ft(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=$x.get(s);r&&(pt("ComponentProvider","Removing Datastore"),$x.delete(s),r.terminate())})(this),Promise.resolve()}}function jR(n,t,s,r={}){var y;n=wn(n,md);const o=td(t),u=n._getSettings(),c={...u,emulatorOptions:n._getEmulatorOptions()},m=`${t}:${s}`;o&&(I_(`https://${m}`),O_("Firestore",!0)),u.host!==hT&&u.host!==m&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!jh(g,c)&&(n._setSettings(g),r.mockUserToken)){let b,x;if(typeof r.mockUserToken=="string")b=r.mockUserToken,x=an.MOCK_USER;else{b=k_(r.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ft(ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new an(w)}n._authCredentials=new ON(new e2(b,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new fa(this.firestore,t,this._query)}}class ve{constructor(t,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ve(this.firestore,t,this._key)}toJSON(){return{type:ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,s,r){if(yu(s,ve._jsonSchema))return new ve(t,r||null,new _t(ie.fromString(s.referencePath)))}}ve._jsonSchemaVersion="firestore/documentReference/1.0",ve._jsonSchema={type:Oe("string",ve._jsonSchemaVersion),referencePath:Oe("string")};class cr extends fa{constructor(t,s,r){super(t,s,rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ve(this.firestore,null,new _t(t))}withConverter(t){return new cr(this.firestore,t,this._path)}}function Zs(n,t,...s){if(n=ms(n),n2("collection","path",t),n instanceof md){const r=ie.fromString(t,...s);return hx(r),new cr(n,null,r)}{if(!(n instanceof ve||n instanceof cr))throw new ft(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ie.fromString(t,...s));return hx(r),new cr(n.firestore,null,r)}}function Sn(n,t,...s){if(n=ms(n),arguments.length===1&&(t=ng.newId()),n2("doc","path",t),n instanceof md){const r=ie.fromString(t,...s);return cx(r),new ve(n,null,new _t(r))}{if(!(n instanceof ve||n instanceof cr))throw new ft(ot.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ie.fromString(t,...s));return cx(r),new ve(n.firestore,n instanceof cr?n.converter:null,new _t(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="AsyncQueue";class t1{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new K2(this,"async_queue_retry"),this._c=()=>{const r=Lm();r&&pt(Jx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const s=Lm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const s=Lm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new vi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Co(t))throw t;pt(Jx,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const s=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,xi("INTERNAL UNHANDLED ERROR: ",e1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(t,s,r){this.uc(),this.oc.indexOf(t)>-1&&(s=0);const o=_g.createAndSchedule(this,t,s,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&St(47125,{Pc:e1(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const s of this.tc)if(s.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const s=this.tc.indexOf(t);this.tc.splice(s,1)}}function e1(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(n){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(n,["next","error","complete"])}class Ti extends md{constructor(t,s,r,o){super(t,s,r,o),this.type="firestore",this._queue=new t1,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new t1(t),this._firestoreClient=void 0,await t}}}function DR(n,t){const s=typeof n=="object"?n:G_(),r=typeof n=="string"?n:Mh,o=z_(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=V_("firestore");u&&jR(o,...u)}return o}function pd(n){if(n._terminated)throw new ft(ot.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VR(n),n._firestoreClient}function VR(n){var r,o,u;const t=n._freezeSettings(),s=(function(m,g,y,b){return new n4(m,g,y,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,cT(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new SR(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $n(nn.fromBase64String(t))}catch(s){throw new ft(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new $n(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(yu(t,$n._jsonSchema))return $n.fromBase64String(t.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Oe("string",$n._jsonSchemaVersion),bytes:Oe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new ft(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new ft(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new ft(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Lt(this._lat,t._lat)||Lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fs._jsonSchemaVersion}}static fromJSON(t){if(yu(t,Fs._jsonSchema))return new Fs(t.latitude,t.longitude)}}Fs._jsonSchemaVersion="firestore/geoPoint/1.0",Fs._jsonSchema={type:Oe("string",Fs._jsonSchemaVersion),latitude:Oe("number"),longitude:Oe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(yu(t,qs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((s=>typeof s=="number")))return new qs(t.vectorValues);throw new ft(ot.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qs._jsonSchemaVersion="firestore/vectorValue/1.0",qs._jsonSchema={type:Oe("string",qs._jsonSchemaVersion),vectorValues:Oe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=/^__.*__$/;class IR{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return this.fieldMask!==null?new br(t,this.data,this.fieldMask,s,this.fieldTransforms):new bu(t,this.data,s,this.fieldTransforms)}}class dT{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return new br(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function fT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St(40011,{Ac:n})}}class Dg{constructor(t,s,r,o,u,c){this.settings=t,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Dg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const s=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:s,fc:!1});return r.gc(t),r}yc(t){var o;const s=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Hh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(fT(this.Ac)&&MR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class kR{constructor(t,s,r){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=r||hd(t)}Cc(t,s,r,o=!1){return new Dg({Ac:t,methodName:s,Dc:r,path:tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yd(n){const t=n._freezeSettings(),s=hd(n._databaseId);return new kR(n._databaseId,!!t.ignoreUndefinedProperties,s)}function mT(n,t,s,r,o,u={}){const c=n.Cc(u.merge||u.mergeFields?2:0,t,s,o);Vg("Data must be an object, but it was:",c,r);const m=pT(r,c);let g,y;if(u.merge)g=new kn(c.fieldMask),y=c.fieldTransforms;else if(u.mergeFields){const b=[];for(const x of u.mergeFields){const w=Np(t,x,s);if(!c.contains(w))throw new ft(ot.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);yT(b,w)||b.push(w)}g=new kn(b),y=c.fieldTransforms.filter((x=>g.covers(x.field)))}else g=null,y=c.fieldTransforms;return new IR(new _n(m),g,y)}class vd extends jg{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vd}}function OR(n,t,s,r){const o=n.Cc(1,t,s);Vg("Data must be an object, but it was:",o,r);const u=[],c=_n.empty();vr(r,((g,y)=>{const b=Mg(t,g,s);y=ms(y);const x=o.yc(b);if(y instanceof vd)u.push(b);else{const w=wu(y,x);w!=null&&(u.push(b),c.set(b,w))}}));const m=new kn(u);return new dT(c,m,o.fieldTransforms)}function PR(n,t,s,r,o,u){const c=n.Cc(1,t,s),m=[Np(t,r,s)],g=[o];if(u.length%2!=0)throw new ft(ot.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(Np(t,u[w])),g.push(u[w+1]);const y=[],b=_n.empty();for(let w=m.length-1;w>=0;--w)if(!yT(y,m[w])){const V=m[w];let k=g[w];k=ms(k);const U=c.yc(V);if(k instanceof vd)y.push(V);else{const L=wu(k,U);L!=null&&(y.push(V),b.set(V,L))}}const x=new kn(y);return new dT(b,x,c.fieldTransforms)}function LR(n,t,s,r=!1){return wu(s,n.Cc(r?4:3,t))}function wu(n,t){if(gT(n=ms(n)))return Vg("Unsupported field value:",t,n),pT(n,t);if(n instanceof jg)return(function(r,o){if(!fT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=wu(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(n,t)}return(function(r,o){if((r=ms(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return S4(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=le.fromDate(r);return{timestampValue:Uh(o.serializer,u)}}if(r instanceof le){const u=new le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uh(o.serializer,u)}}if(r instanceof Fs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:O2(o.serializer,r._byteString)};if(r instanceof ve){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:dg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof qs)return(function(c,m){return{mapValue:{fields:{[h2]:{stringValue:d2},[Ih]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return lg(m.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${ed(r)}`)})(n,t)}function pT(n,t){const s={};return r2(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vr(n,((r,o)=>{const u=wu(o,t.mc(r));u!=null&&(s[r]=u)})),{mapValue:{fields:s}}}function gT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof le||n instanceof Fs||n instanceof $n||n instanceof ve||n instanceof jg||n instanceof qs)}function Vg(n,t,s){if(!gT(s)||!s2(s)){const r=ed(s);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function Np(n,t,s){if((t=ms(t))instanceof gd)return t._internalPath;if(typeof t=="string")return Mg(n,t);throw Hh("Field path arguments must be of type string or ",n,!1,void 0,s)}const UR=new RegExp("[~\\*/\\[\\]]");function Mg(n,t,s){if(t.search(UR)>=0)throw Hh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,s);try{return new gd(...t.split("."))._internalPath}catch{throw Hh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,s)}}function Hh(n,t,s,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;s&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new ft(ot.INVALID_ARGUMENT,m+n+g)}function yT(n,t){return n.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,s,r,o,u){this._firestore=t,this._userDataWriter=s,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new BR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const s=this._document.data.field(Ig("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class BR extends vT{data(){return super.data()}}function Ig(n,t){return typeof t=="string"?Mg(n,t):t instanceof gd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ft(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class zR extends kg{}function bd(n,t,...s){let r=[];t instanceof kg&&r.push(t),r=r.concat(s),(function(u){const c=u.filter((g=>g instanceof Og)).length,m=u.filter((g=>g instanceof xd)).length;if(c>1||c>0&&m>0)throw new ft(ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)n=o._apply(n);return n}class xd extends zR{constructor(t,s,r){super(),this._field=t,this._op=s,this._value=r,this.type="where"}static _create(t,s,r){return new xd(t,s,r)}_apply(t){const s=this._parse(t);return _T(t._query,s),new fa(t.firestore,t.converter,gp(t._query,s))}_parse(t){const s=yd(t.firestore);return(function(u,c,m,g,y,b,x){let w;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ft(ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){i1(x,b);const k=[];for(const U of x)k.push(s1(g,u,U));w={arrayValue:{values:k}}}else w=s1(g,u,x)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||i1(x,b),w=LR(m,c,x,b==="in"||b==="not-in");return ke.create(y,b,w)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}function xT(n,t,s){const r=t,o=Ig("where",n);return xd._create(o,r,s)}class Og extends kg{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new Og(t,s)}_parse(t){const s=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:ps.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)_T(c,g),c=gp(c,g)})(t._query,s),new fa(t.firestore,t.converter,gp(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function s1(n,t,s){if(typeof(s=ms(s))=="string"){if(s==="")throw new ft(ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x2(t)&&s.indexOf("/")!==-1)throw new ft(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=t.path.child(ie.fromString(s));if(!_t.isDocumentKey(r))throw new ft(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bx(n,new _t(r))}if(s instanceof ve)return bx(n,s._key);throw new ft(ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(s)}.`)}function i1(n,t){if(!Array.isArray(n)||n.length===0)throw new ft(ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function _T(n,t){const s=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new ft(ot.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ft(ot.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}class FR{convertValue(t,s="none"){switch(mr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return we(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw St(62114,{value:t})}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const r={};return vr(t,((o,u)=>{r[o]=this.convertValue(u,s)})),r}convertVectorValue(t){var r,o,u;const s=(u=(o=(r=t.fields)==null?void 0:r[Ih].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>we(c.doubleValue)));return new qs(s)}convertGeoPoint(t){return new Fs(we(t.latitude),we(t.longitude))}convertArray(t,s){return(t.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const r=id(t);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(ru(t));default:return null}}convertTimestamp(t){const s=dr(t);return new le(s.seconds,s.nanos)}convertDocumentKey(t,s){const r=ie.fromString(t);Qt(F2(r),9688,{name:t});const o=new au(r.get(1),r.get(3)),u=new _t(r.popFirst(5));return o.isEqual(s)||xi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(n,t,s){let r;return r=n?n.toFirestore(t):t,r}class Hl{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ia extends vT{constructor(t,s,r,o,u,c){super(t,s,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const r=this._document.data.field(Ig("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(ot.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,s={};return s.type=ia._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",ia._jsonSchema={type:Oe("string",ia._jsonSchemaVersion),bundleSource:Oe("string","DocumentSnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class _h extends ia{data(t={}){return super.data(t)}}class ra{constructor(t,s,r,o){this._firestore=t,this._userDataWriter=s,this._snapshot=o,this.metadata=new Hl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((r=>{t.call(s,new _h(this._firestore,this._userDataWriter,r.key,r,new Hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new ft(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return m.type!==0&&(y=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),b=c.indexOf(m.doc.key)),{type:qR(m.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(ot.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ra._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function qR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n){n=wn(n,ve);const t=wn(n.firestore,Ti);return CR(pd(t),n._key).then((s=>AT(t,n,s)))}ra._jsonSchemaVersion="firestore/querySnapshot/1.0",ra._jsonSchema={type:Oe("string",ra._jsonSchemaVersion),bundleSource:Oe("string","QuerySnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class Pg extends FR{constructor(t){super(),this.firestore=t}convertBytes(t){return new $n(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new ve(this.firestore,null,s)}}function wT(n){n=wn(n,fa);const t=wn(n.firestore,Ti),s=pd(t),r=new Pg(t);return bT(n._query),RR(s,n._query).then((o=>new ra(t,r,n,o)))}function ET(n,t,s){n=wn(n,ve);const r=wn(n.firestore,Ti),o=TT(n.converter,t);return _d(r,[mT(yd(r),"setDoc",n._key,o,n.converter!==null,s).toMutation(n._key,Wn.none())])}function cu(n,t,s,...r){n=wn(n,ve);const o=wn(n.firestore,Ti),u=yd(o);let c;return c=typeof(t=ms(t))=="string"||t instanceof gd?PR(u,"updateDoc",n._key,t,s,r):OR(u,"updateDoc",n._key,t),_d(o,[c.toMutation(n._key,Wn.exists(!0))])}function ST(n){return _d(wn(n.firestore,Ti),[new ug(n._key,Wn.none())])}function Eu(n,t){const s=wn(n.firestore,Ti),r=Sn(n),o=TT(n.converter,t);return _d(s,[mT(yd(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Wn.exists(!1))]).then((()=>r))}function Su(n,...t){var g,y,b;n=ms(n);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||n1(t[r])||(s=t[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(n1(t[r])){const x=t[r];t[r]=(g=x.next)==null?void 0:g.bind(x),t[r+1]=(y=x.error)==null?void 0:y.bind(x),t[r+2]=(b=x.complete)==null?void 0:b.bind(x)}let u,c,m;if(n instanceof ve)c=wn(n.firestore,Ti),m=rd(n._key.path),u={next:x=>{t[r]&&t[r](AT(c,n,x))},error:t[r+1],complete:t[r+2]};else{const x=wn(n,fa);c=wn(x.firestore,Ti),m=x._query;const w=new Pg(c);u={next:V=>{t[r]&&t[r](new ra(c,w,x,V))},error:t[r+1],complete:t[r+2]},bT(n._query)}return(function(w,V,k,U){const L=new Rg(U),z=new Ag(V,L,k);return w.asyncQueue.enqueueAndForget((async()=>wg(await qh(w),z))),()=>{L.Nu(),w.asyncQueue.enqueueAndForget((async()=>Eg(await qh(w),z)))}})(pd(c),m,o,u)}function _d(n,t){return(function(r,o){const u=new vi;return r.asyncQueue.enqueueAndForget((async()=>gR(await NR(r),o,u))),u.promise})(pd(n),t)}function AT(n,t,s){const r=s.docs.get(t._key),o=new Pg(n);return new ia(n,o,t._key,r,new Hl(s.hasPendingWrites,s.fromCache),t.converter)}(function(t,s=!0){(function(o){Ao=o})(q_),nu(new yo("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new Ti(new PN(r.getProvider("auth-internal")),new BN(c,r.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ft(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(y.options.projectId,b)})(c,o),c);return u={useFetchStreams:s,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),lr(ax,ox,t),lr(ax,ox,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firebasestorage.googleapis.com",HR="storageBucket",GR=120*1e3,YR=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends ca{constructor(t,s,r=0){super(Bm(t),`Firebase Storage: ${s} (${Bm(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ws.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Bm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ks;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ks||(Ks={}));function Bm(n){return"storage/"+n}function KR(){const n="An unknown error occurred, please check the error payload for server response.";return new Ws(Ks.UNKNOWN,n)}function QR(){return new Ws(Ks.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XR(){return new Ws(Ks.CANCELED,"User canceled the upload/download.")}function $R(n){return new Ws(Ks.INVALID_URL,"Invalid URL '"+n+"'.")}function ZR(n){return new Ws(Ks.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function r1(n){return new Ws(Ks.INVALID_ARGUMENT,n)}function CT(){return new Ws(Ks.APP_DELETED,"The Firebase app was deleted.")}function WR(n){return new Ws(Ks.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(t,s){this.bucket=t,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,s){let r;try{r=fs.makeFromUrl(t,s)}catch{return new fs(t,"")}if(r.path==="")return r;throw ZR(t)}static makeFromUrl(t,s){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(tt){tt.path.charAt(tt.path.length-1)==="/"&&(tt.path_=tt.path_.slice(0,-1))}const c="(/(.*))?$",m=new RegExp("^gs://"+o+c,"i"),g={bucket:1,path:3};function y(tt){tt.path_=decodeURIComponent(tt.path)}const b="v[A-Za-z0-9_]+",x=s.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",V=new RegExp(`^https?://${x}/${b}/b/${o}/o${w}`,"i"),k={bucket:1,path:3},U=s===NT?"(?:storage.googleapis.com|storage.cloud.google.com)":s,L="([^?#]*)",z=new RegExp(`^https?://${U}/${o}/${L}`,"i"),K=[{regex:m,indices:g,postModify:u},{regex:V,indices:k,postModify:y},{regex:z,indices:{bucket:1,path:2},postModify:y}];for(let tt=0;tt<K.length;tt++){const et=K[tt],J=et.regex.exec(t);if(J){const j=J[et.indices.bucket];let C=J[et.indices.path];C||(C=""),r=new fs(j,C),et.postModify(r);break}}if(r==null)throw $R(t);return r}}class JR{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(n,t,s){let r=1,o=null,u=null,c=!1,m=0;function g(){return m===2}let y=!1;function b(...L){y||(y=!0,t.apply(null,L))}function x(L){o=setTimeout(()=>{o=null,n(V,g())},L)}function w(){u&&clearTimeout(u)}function V(L,...z){if(y){w();return}if(L){w(),b.call(null,L,...z);return}if(g()||c){w(),b.call(null,L,...z);return}r<64&&(r*=2);let K;m===1?(m=2,K=0):K=(r+Math.random())*1e3,x(K)}let k=!1;function U(L){k||(k=!0,w(),!y&&(o!==null?(L||(m=2),clearTimeout(o),x(0)):L||(m=1)))}return x(0),u=setTimeout(()=>{c=!0,U(!0)},s),U}function ej(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(n){return n!==void 0}function a1(n,t,s,r){if(r<t)throw r1(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>s)throw r1(`Invalid value for '${n}'. Expected ${s} or less.`)}function sj(n){const t=encodeURIComponent;let s="?";for(const r in n)if(n.hasOwnProperty(r)){const o=t(r)+"="+t(n[r]);s=s+o+"&"}return s=s.slice(0,-1),s}var Yh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Yh||(Yh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n,t){const s=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,u=t.indexOf(n)!==-1;return s||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(t,s,r,o,u,c,m,g,y,b,x,w=!0,V=!1){this.url_=t,this.method_=s,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=x,this.retry=w,this.isUsingEmulator=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,U)=>{this.resolve_=k,this.reject_=U,this.start_()})}start_(){const t=(r,o)=>{if(o){r(!1,new hh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const c=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const m=u.getErrorCode()===Yh.NO_ERROR,g=u.getStatus();if(!m||ij(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Yh.ABORT;r(!1,new hh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new hh(y,u))})},s=(r,o)=>{const u=this.resolve_,c=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());nj(g)?u(g):u()}catch(g){c(g)}else if(m!==null){const g=KR();g.serverResponse=m.getErrorText(),this.errorCallback_?c(this.errorCallback_(m,g)):c(g)}else if(o.canceled){const g=this.appDelete_?CT():XR();c(g)}else{const g=QR();c(g)}};this.canceled_?s(!1,new hh(!1,null,!0)):this.backoffId_=tj(t,s,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&ej(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hh{constructor(t,s,r){this.wasSuccessCode=t,this.connection=s,this.canceled=!!r}}function aj(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function oj(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function lj(n,t){t&&(n["X-Firebase-GMPID"]=t)}function uj(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function cj(n,t,s,r,o,u,c=!0,m=!1){const g=sj(n.urlParams),y=n.url+g,b=Object.assign({},n.headers);return lj(b,t),aj(b,s),oj(b,u),uj(b,r),new rj(y,n.method,b,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function dj(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(t,s){this._service=t,s instanceof fs?this._location=s:this._location=fs.makeFromUrl(s,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,s){return new Kh(t,s)}get root(){const t=new fs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dj(this._location.path)}get storage(){return this._service}get parent(){const t=hj(this._location.path);if(t===null)return null;const s=new fs(this._location.bucket,t);return new Kh(this._service,s)}_throwIfRoot(t){if(this._location.path==="")throw WR(t)}}function o1(n,t){const s=t==null?void 0:t[HR];return s==null?null:fs.makeFromBucketSpec(s,n)}function fj(n,t,s,r={}){n.host=`${t}:${s}`;const o=td(t);o&&(I_(`https://${n.host}/b`),O_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(n._overrideAuthToken=typeof u=="string"?u:k_(u,n.app.options.projectId))}class mj{constructor(t,s,r,o,u,c=!1){this.app=t,this._authProvider=s,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=c,this._bucket=null,this._host=NT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GR,this._maxUploadRetryTime=YR,this._requests=new Set,o!=null?this._bucket=fs.makeFromBucketSpec(o,this._host):this._bucket=o1(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=fs.makeFromBucketSpec(this._url,t):this._bucket=o1(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){a1("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){a1("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const s=await t.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(F_(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Kh(this,t)}_makeRequest(t,s,r,o,u=!0){if(this._deleted)return new JR(CT());{const c=cj(t,this._appId,r,o,s,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,s){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,s,r,o).getPromise()}}const l1="@firebase/storage",u1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="storage";function pj(n=G_(),t){n=ms(n);const r=z_(n,RT).getImmediate({identifier:t}),o=V_("storage");return o&&gj(r,...o),r}function gj(n,t,s,r={}){fj(n,t,s,r)}function yj(n,{instanceIdentifier:t}){const s=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new mj(s,r,o,t,q_)}function vj(){nu(new yo(RT,yj,"PUBLIC").setMultipleInstances(!0)),lr(l1,u1,""),lr(l1,u1,"esm2020")}vj();var bj="firebase",xj="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(bj,xj,"app");const Gl={apiKey:"AIzaSyDMP1qs_egJbyS2rWiZihynlbA_HBbiMi0",authDomain:"manas-nidar-trip.firebaseapp.com",projectId:"manas-nidar-trip",storageBucket:"manas-nidar-trip.firebasestorage.app",messagingSenderId:"268881524512",appId:"1:268881524512:web:f66e24a451fb51b537c945",measurementId:"G-BVBR6CN7JG"},_j=()=>Gl.apiKey&&!Gl.apiKey.includes("YOUR_")&&Gl.projectId&&!Gl.projectId.includes("YOUR_"),jT=H_(Gl),me=DR(jT);pj(jT);const hu="trips",Lg="expenses",Td="settlements",Qs="ps_boards",Au="products",Tj=async(n,t,s)=>{try{console.log(" Creating trip with:",{name:n,participants:t,hasAvatars:!!s});const r={name:n,participants:t,memberAvatars:s||{},createdAt:Date.now()};console.log(" Sending to Firestore:",r);const o=await Eu(Zs(me,hu),r);return console.log(" Trip created with ID:",o.id),o.id}catch(r){throw console.error(" Create trip error details:",{code:r.code,message:r.message,stack:r.stack}),r}},wj=async(n,t,s,r)=>{try{const o=n.trim();if(!o)throw new Error("Custom ID is required");if(!/^[a-zA-Z0-9_-]+$/.test(o))throw new Error("ID can only contain letters, numbers, hyphens, and underscores");if((await Gh(Sn(me,hu,o))).exists())throw new Error("ID already exists. Choose a different one.");const c={name:t,participants:s,memberAvatars:r||{},createdAt:Date.now()};return await ET(Sn(me,hu,o),c),console.log(" Trip created with custom ID:",o),o}catch(o){throw console.error(" Create trip with custom ID error:",o),o}},Ej=async(n,t,s,r)=>{try{const o=n.trim();if(!o)throw new Error("Custom ID is required");if(!/^[a-zA-Z0-9_-]+$/.test(o))throw new Error("ID can only contain letters, numbers, hyphens, and underscores");if((await Gh(Sn(me,Qs,o))).exists())throw new Error("ID already exists. Choose a different one.");const c={name:t,participants:s,memberAvatars:r||{},createdAt:Date.now()};return await ET(Sn(me,Qs,o),c),console.log(" PS board created with custom ID:",o),o}catch(o){throw console.error(" Create PS board with custom ID error:",o),o}},Sj=async(n,t,s)=>{try{console.log(" Creating PS board with:",{name:n,participants:t,hasAvatars:!!s});const r={name:n,participants:t,memberAvatars:s||{},createdAt:Date.now()},o=await Eu(Zs(me,Qs),r);return console.log(" PS board created with ID:",o.id),o.id}catch(r){throw console.error(" Create PS board error:",r),r}},Aj=(n,t)=>Su(Sn(me,Qs,n),s=>{s.exists()?t({id:s.id,...s.data()}):t(null)},s=>{console.error("PS Board Subscribe Error:",s),t(null)}),Nj=(n,t)=>Su(Sn(me,hu,n),s=>{s.exists()?t({id:s.id,...s.data()}):t(null)},s=>{console.error("Firestore Subscribe Error:",s),t(null)}),Cj=(n,t)=>{const s=bd(Zs(me,Lg),xT("tripId","==",n));return Su(s,r=>{const o=r.docs.map(u=>({id:u.id,...u.data()}));o.sort((u,c)=>c.createdAt-u.createdAt),t(o)},r=>{console.error("Firestore Expenses Subscribe Error:",r),t([])})},Rj=async(n,t)=>{console.log(" Creating expense:",{tripId:n,...t});const s=await Eu(Zs(me,Lg),{...t,tripId:n,createdAt:Date.now()});return console.log(" Expense created with ID:",s.id),s},jj=async(n,t)=>{const s=Sn(me,Lg,n);await cu(s,t),console.log(" Expense updated with ID:",n)},c1=async(n,t,s,r,o)=>(await Eu(Zs(me,Td),{tripId:n,from:t,to:s,amount:r,isPaid:!1,proofImageUrl:null,createdAt:Date.now()})).id,Dj=async(n,t)=>{const s=Sn(me,Td,n),r={isPaid:t,paidAt:t?Date.now():null};await cu(s,r)},Vj=async n=>{const t=Sn(me,Td,n);await ST(t)},h1=async(n,t,s)=>{try{console.log(" Updating members for trip/PS:",n);const r=Sn(me,hu,n);if((await Gh(r)).exists()){const m={participants:t};s&&(m.memberAvatars=s),await cu(r,m),console.log(" Trip members updated successfully");return}const u=Sn(me,Qs,n);if((await Gh(u)).exists()){const m={participants:t};s&&(m.memberAvatars=s),await cu(u,m),console.log(" PS board members updated successfully");return}throw new Error("Trip/PS board not found")}catch(r){throw console.error(" Update members error:",{code:r.code,message:r.message,stack:r.stack}),r}},Mj=(n,t)=>{const s=bd(Zs(me,Td),xT("tripId","==",n));return Su(s,r=>{const o=r.docs.map(u=>({id:u.id,...u.data()}));t(o)},r=>{console.error("Firestore Settlements Subscribe Error:",r),t([])})},Ij=async(n,t)=>{console.log(" Creating product in PS board:",{psId:n,...t});const s={...t,tripId:n,createdAt:Date.now(),updatedAt:Date.now()},r=await Eu(Zs(me,Qs,n,Au),s);return console.log(" Product created in PS board with ID:",r.id),r},kj=(n,t)=>{const s=bd(Zs(me,Qs,n,Au));return Su(s,r=>{const o=r.docs.map(u=>({id:u.id,...u.data()}));o.sort((u,c)=>u.serialNumber.localeCompare(c.serialNumber)),t(o)},r=>{console.error("PS board products subscribe error:",r),t([])})},Cp=async(n,t,s)=>{if(!s)throw new Error("PS Board ID required for product update");const r=Sn(me,Qs,s,Au,n);await cu(r,{...t,updatedAt:Date.now()}),console.log(" Product updated in PS board with ID:",n)},Oj=async(n,t)=>{if(!t)throw new Error("PS Board ID required for product deletion");const s=Sn(me,Qs,t,Au,n);await ST(s),console.log(" Product deleted from PS board with ID:",n)},Pj=async n=>(await wT(bd(Zs(me,Qs,n,Au)))).docs.map(s=>({id:s.id,...s.data()})),Lj=async n=>{const t=await Pj(n);let s=0;for(const o of t){const u=/PS-(\d+)/i.exec(o.serialNumber||"");if(u){const c=parseInt(u[1],10);isNaN(c)||(s=Math.max(s,c))}}const r=s+1;return`PS-${String(r).padStart(3,"0")}`},kt="/manas/",en=[{id:"manas",image:`${kt}pics/manas.png`},{id:"avatar1",image:`${kt}pics/Screenshot 2026-01-05 184222.png`},{id:"avatar2",image:`${kt}pics/Screenshot 2026-01-05 184242.png`},{id:"avatar3",image:`${kt}pics/Screenshot 2026-01-05 184251.png`},{id:"avatar4",image:`${kt}pics/Screenshot 2026-01-05 184317.png`},{id:"avatar5",image:`${kt}pics/Screenshot 2026-01-05 184328.png`},{id:"avatar6",image:`${kt}pics/Screenshot 2026-01-05 184347.png`},{id:"avatar7",image:`${kt}pics/Screenshot 2026-01-05 184406.png`},{id:"avatar8",image:`${kt}pics/Screenshot 2026-01-05 184426.png`},{id:"avatar9",image:`${kt}pics/Screenshot 2026-01-05 184453.png`},{id:"avatar10",image:`${kt}pics/Screenshot 2026-01-05 184505.png`},{id:"avatar11",image:`${kt}pics/Screenshot 2026-01-08 150317.png`},{id:"avatar12",image:`${kt}pics/Screenshot 2026-01-08 150327.png`},{id:"avatar13",image:`${kt}pics/Screenshot 2026-01-08 150341.png`},{id:"avatar14",image:`${kt}pics/Screenshot 2026-01-08 150350.png`},{id:"avatar15",image:`${kt}pics/Screenshot 2026-01-08 150401.png`},{id:"avatar16",image:`${kt}pics/Screenshot 2026-01-08 150421.png`},{id:"avatar17",image:`${kt}pics/Screenshot 2026-01-08 150432.png`},{id:"avatar18",image:`${kt}pics/Screenshot 2026-01-08 150443.png`},{id:"avatar19",image:`${kt}pics/Screenshot 2026-01-08 150503.png`},{id:"avatar20",image:`${kt}pics/Screenshot 2026-01-08 150513.png`},{id:"avatar21",image:`${kt}pics/Screenshot 2026-01-08 150524.png`},{id:"avatar22",image:`${kt}pics/Screenshot 2026-01-08 150533.png`},{id:"avatar23",image:`${kt}pics/Screenshot 2026-01-08 150554.png`},{id:"avatar24",image:`${kt}pics/Screenshot 2026-01-08 150604.png`},{id:"avatar25",image:`${kt}pics/Screenshot 2026-01-08 150625.png`},{id:"avatar26",image:`${kt}pics/Screenshot 2026-01-08 150647.png`},{id:"avatar27",image:`${kt}pics/Screenshot 2026-01-08 150703.png`},{id:"avatar28",image:`${kt}pics/Screenshot 2026-01-08 150711.png`},{id:"avatar29",image:`${kt}pics/Screenshot 2026-01-08 150725.png`},{id:"avatar30",image:`${kt}pics/Screenshot 2026-01-08 150735.png`},{id:"avatar31",image:`${kt}pics/Screenshot 2026-01-08 150745.png`},{id:"avatar32",image:`${kt}pics/Screenshot 2026-01-08 150804.png`},{id:"avatar33",image:`${kt}pics/Screenshot 2026-01-08 150834.png`},{id:"avatar34",image:`${kt}pics/Screenshot 2026-01-08 150845.png`},{id:"avatar35",image:`${kt}pics/Screenshot 2026-01-08 150855.png`},{id:"avatar36",image:`${kt}pics/Screenshot 2026-01-08 150908.png`}],oe=({className:n=""})=>f.jsx("i",{className:`fa fa-inr ${n}`}),Uj=({onJoin:n})=>{const[t,s]=q.useState(""),[r,o]=q.useState(!1),u=async c=>{if(c.preventDefault(),!!t.trim()){o(!0);try{localStorage.setItem("trip_user_name",t.trim()),n(t.trim())}catch(m){console.error("Error joining:",m),alert("Error saving your name. Please try again.")}finally{o(!1)}}};return f.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center p-6 z-50",children:f.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-md p-12 text-center border-4 border-[#f49221]",children:[f.jsx("div",{className:"w-24 h-24 bg-[#f49221] rounded-[2rem] flex items-center justify-center mx-auto mb-8 shadow-2xl shadow-[#f49221]/30 rotate-3",children:f.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),f.jsx("h1",{className:"text-4xl font-bold text-black mb-2 font-pt tracking-tighter uppercase",children:"Manas"}),f.jsx("p",{className:"text-gray-500 mb-10 font-medium",children:"Smart expense tracking for your crew."}),f.jsxs("form",{onSubmit:u,className:"space-y-8 text-left",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1",children:"Identify Yourself"}),f.jsx("input",{type:"text",required:!0,value:t,onChange:c=>s(c.target.value),placeholder:"Your Full Name",className:"w-full px-6 py-5 rounded-2xl border-2 border-gray-100 focus:outline-none focus:border-[#f49221] transition-all text-lg font-bold text-black"})]}),f.jsx("button",{type:"submit",disabled:r,className:"w-full bg-[#f49221] hover:bg-[#d97e1a] text-white font-bold py-5 rounded-2xl transition-all shadow-xl shadow-[#f49221]/30 disabled:opacity-50 uppercase tracking-widest",children:r?"Authenticating...":"Enter Dashboard"})]})]})})},Bj=({onTripSelected:n,onBack:t})=>{const[s,r]=q.useState("selection"),[o,u]=q.useState(""),[c,m]=q.useState(["",""]),[g,y]=q.useState(""),[b,x]=q.useState({}),[w,V]=q.useState(null),[k,U]=q.useState(""),[L,z]=q.useState(!1),[W,K]=q.useState(""),tt=async()=>{try{console.log("Testing Firebase connection...");const J=Zs(me,"trips"),j=await wT(J);return console.log(" Firebase connected successfully. Found",j.size,"trips"),{success:!0,error:null}}catch(J){console.error(" Firebase connection error:",J);let j="Unknown error";return J.code==="permission-denied"?j=" PERMISSION DENIED - Firebase security rules are NOT allowing access. Your rules may not have been saved properly.":J.code==="unavailable"?j="Firebase service unavailable. Check your internet connection.":J.message&&(j=J.message),console.error("Detailed error:",J),{success:!1,error:j}}},et=async J=>{J.preventDefault();const j=c.filter(N=>N.trim()!=="");if(!o||j.length<2)return alert("Trip name and 2+ people needed.");K(""),console.log("Creating trip with:",{tripName:o,participants:j});const C=await tt();if(!C.success){K(`Firebase Error: ${C.error}`);return}z(!0);const A=setTimeout(()=>{z(!1),K("Connection timeout after 8 seconds. Firebase security rules may be blocking writes.")},8e3);try{console.log(" Starting trip creation...");const N=g.trim()?await wj(g.trim(),o,j,b):await Tj(o,j,b);clearTimeout(A),console.log(" Trip created successfully with ID:",N),n(N)}catch(N){clearTimeout(A),z(!1),console.error(" Create trip error:",N);let M="Error creating trip: ";N.code==="permission-denied"?M+=" Permission denied. Firebase rules are STILL not set correctly. Please check Firebase Console Firestore Rules.":N.message?M+=N.message:M+="Unknown error. Check browser console (F12) for details.",K(M)}};return s==="create"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"max-w-md mx-auto p-10 bg-white rounded-[2.5rem] shadow-2xl mt-12 border-4 border-black",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8 text-black font-pt uppercase tracking-tight",children:"New Trip"}),W&&f.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-300 rounded-xl text-red-800 text-sm",children:[f.jsx("p",{className:"font-bold mb-2",children:" Error"}),f.jsx("p",{className:"text-xs leading-relaxed",children:W}),W.includes("security rules")&&f.jsxs("p",{className:"mt-3 text-xs",children:[f.jsx("strong",{children:"Fix:"})," Go to Firebase Console  Firestore Database  Rules and set:",f.jsx("br",{}),f.jsx("code",{className:"block mt-1 bg-red-100 p-2 rounded",children:"allow read, write: if true;"})]})]}),f.jsxs("form",{onSubmit:et,className:"space-y-6",children:[f.jsx("input",{required:!0,className:"w-full px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none font-bold text-black placeholder-gray-400",placeholder:"Destination Name",value:o,onChange:J=>u(J.target.value)}),f.jsx("input",{className:"w-full px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none font-bold text-black placeholder-gray-400",placeholder:"Custom Trip ID (optional)",value:g,onChange:J=>y(J.target.value)}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Participants"}),c.map((J,j)=>{var C;return f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex gap-2 items-center",children:[J.trim()&&b[J]&&f.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full overflow-hidden border-2 border-[#f49221]",children:f.jsx("img",{src:((C=en.find(A=>A.id===b[J]))==null?void 0:C.image)||"",alt:J,className:"w-full h-full object-cover"})}),f.jsx("input",{required:!0,className:"flex-1 px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none text-black placeholder-gray-400 font-bold",placeholder:`Friend ${j+1}`,value:J,onChange:A=>{const N=[...c];N[j]=A.target.value,m(N)}})]}),J.trim()&&f.jsx("button",{type:"button",onClick:()=>V(J),className:"ml-2 text-xs text-[#f49221] font-bold hover:underline",children:b[J]?" Change Avatar":"+ Add Avatar (Optional)"})]},j)})]}),f.jsx("button",{type:"button",onClick:()=>m([...c,""]),className:"text-xs text-[#f49221] font-bold uppercase tracking-wider hover:underline ml-1",children:"+ Add Participant"}),f.jsxs("div",{className:"pt-8 flex flex-col gap-4",children:[f.jsx("button",{type:"submit",disabled:L,className:"w-full py-5 bg-[#f49221] text-white rounded-2xl font-bold shadow-xl shadow-[#f49221]/20 uppercase tracking-widest disabled:opacity-50",children:L?"Creating Trip...":"Launch Trip"}),f.jsx("button",{type:"button",onClick:()=>r("selection"),disabled:L,className:"w-full py-4 px-4 border-2 border-black rounded-2xl font-bold text-black uppercase tracking-widest text-xs disabled:opacity-50",children:"Back"})]})]})]}),w&&f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 border-2 border-[#f49221]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-2xl font-bold text-black",children:"Choose Avatar"}),f.jsx("button",{onClick:()=>V(null),className:"text-gray-400 hover:text-gray-600",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:en.map(J=>f.jsx("button",{type:"button",onClick:()=>{x({...b,[w]:J.id}),V(null)},className:"w-full aspect-square rounded-2xl overflow-hidden hover:scale-110 transition-all border-2 border-transparent hover:border-[#f49221]",children:f.jsx("img",{src:J.image,alt:"avatar",className:"w-full h-full object-cover"})},J.id))}),f.jsx("button",{onClick:()=>V(null),className:"w-full py-3 bg-gray-100 text-black rounded-xl font-bold hover:bg-gray-200",children:"Cancel"})]})})]}):s==="join"?f.jsxs("div",{className:"max-w-md mx-auto p-10 bg-white rounded-[2.5rem] shadow-2xl mt-12 border-4 border-black text-center",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8 text-black font-pt uppercase",children:"Join Trip"}),f.jsx("input",{className:"w-full px-6 py-5 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none mb-8 text-center font-mono text-xl text-black placeholder-gray-400",placeholder:"PASTE TRIP ID",value:k,onChange:J=>U(J.target.value)}),f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("button",{onClick:()=>k&&n(k),className:"w-full py-5 bg-black text-white rounded-2xl font-bold shadow-xl uppercase tracking-widest",children:"Connect"}),f.jsx("button",{onClick:()=>r("selection"),className:"w-full py-4 font-bold text-gray-400 uppercase tracking-widest text-xs",children:"Cancel"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"max-w-md mx-auto mt-20 text-center p-12 bg-white rounded-[3.5rem] shadow-2xl border-2 border-gray-50",children:[f.jsx("div",{className:"w-28 h-28 bg-[#f49221] rounded-[2.5rem] flex items-center justify-center mx-auto mb-10 shadow-2xl shadow-[#f49221]/40 -rotate-3 border-4 border-white",children:f.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),f.jsx("h1",{className:"text-5xl font-bold text-black mb-3 font-pt tracking-tighter uppercase",children:"Manas"}),f.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-[0.2em] text-[10px] mb-14",children:"Simplified Group Finance"}),f.jsxs("div",{className:"space-y-5",children:[f.jsx("button",{onClick:()=>r("create"),className:"w-full py-6 bg-[#f49221] text-white rounded-2xl font-bold hover:scale-[1.02] transition-all shadow-2xl shadow-[#f49221]/30 flex items-center justify-center gap-3 uppercase tracking-widest",children:"New Expedition"}),f.jsx("button",{onClick:()=>r("join"),className:"w-full py-6 bg-black text-white rounded-2xl font-bold hover:scale-[1.02] transition-all flex items-center justify-center gap-3 uppercase tracking-widest",children:"Connect to Trip"}),t&&f.jsx("button",{onClick:t,className:"w-full py-4 text-gray-400 hover:text-gray-600 rounded-2xl font-bold transition-all uppercase tracking-widest text-sm border-2 border-gray-200 hover:border-gray-300",children:" Back to Boards"})]})]}),w&&f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 border-2 border-[#f49221]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-2xl font-bold text-black",children:"Choose Avatar"}),f.jsx("button",{onClick:()=>V(null),className:"text-gray-400 hover:text-gray-600",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:en.map(J=>f.jsx("button",{type:"button",onClick:()=>{x({...b,[w]:J.id}),V(null)},className:"w-full aspect-square rounded-2xl overflow-hidden hover:scale-110 transition-all border-2 border-transparent hover:border-[#f49221]",children:f.jsx("img",{src:J.image,alt:"avatar",className:"w-full h-full object-cover"})},J.id))}),f.jsx("button",{onClick:()=>V(null),className:"w-full py-3 bg-gray-100 text-black rounded-xl font-bold hover:bg-gray-200",children:"Cancel"})]})})]})},zj=({onSelect:n})=>f.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-6",children:f.jsxs("div",{className:"w-full max-w-3xl grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl border-4 border-black p-10 text-center",children:[f.jsx("div",{className:"w-20 h-20 bg-[#f49221] rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-xl",children:f.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),f.jsx("h2",{className:"text-3xl font-bold text-black mb-2 font-pt uppercase tracking-tight",children:"Trip"}),f.jsx("p",{className:"text-gray-500 mb-8",children:"Track group expenses, balances and settlements."}),f.jsx("button",{onClick:()=>n("trip"),className:"w-full py-5 bg-black text-white rounded-2xl font-bold uppercase tracking-widest",children:"Go"})]}),f.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl border-4 border-[#f49221] p-10 text-center",children:[f.jsx("div",{className:"w-20 h-20 bg-[#f49221] rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-xl",children:f.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h18v4H3V3zm0 6h18v12H3V9zm4 3h5v6H7v-6z"})})}),f.jsx("h2",{className:"text-3xl font-bold text-black mb-2 font-pt uppercase tracking-tight",children:"Purchase Sheet"}),f.jsx("p",{className:"text-gray-500 mb-8",children:"Track product serials, orders and delivery status."}),f.jsx("button",{onClick:()=>n("ps"),className:"w-full py-5 bg-[#f49221] text-white rounded-2xl font-bold uppercase tracking-widest",children:"Go"})]})]})}),Fj=({onPsSelected:n,onBack:t})=>{const[s,r]=q.useState("selection"),[o,u]=q.useState(""),[c,m]=q.useState(["",""]),[g,y]=q.useState({}),[b,x]=q.useState(""),[w,V]=q.useState(""),[k,U]=q.useState(!1),[L,z]=q.useState(""),[W,K]=q.useState(null),tt=async et=>{et.preventDefault();const J=c.filter(j=>j.trim()!=="");if(!o||J.length<1)return alert("PS name and at least 1 person needed.");try{U(!0),z(""),console.log(" Creating PS board with:",{psName:o,participants:J,customId:b||"auto"});let j;b.trim()?j=await Ej(b.trim(),o,J,g):j=await Sj(o,J,g),console.log(" PS board created:",j),n(j)}catch(j){console.error(" PS board creation error:",j);const C=(j==null?void 0:j.code)||"",A=(j==null?void 0:j.message)||"Unknown error";C==="permission-denied"||A.includes("permission")?z(` Permission Denied

Firestore rules are blocking PS board creation.

 Fix: Go to Firebase Console  Firestore  Rules and add:

match /ps_boards/{psId} {
  allow read, write: if true;
}

Then click Publish.`):z(`Failed to create PS board:
${A}`)}finally{U(!1)}};return s==="create"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"max-w-md mx-auto p-10 bg-white rounded-[2.5rem] shadow-2xl mt-12 border-4 border-[#f49221]",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8 text-black font-pt uppercase tracking-tight",children:"Create Purchase Sheet"}),L&&f.jsx("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-300 rounded-xl text-red-800 text-sm whitespace-pre-wrap",children:L}),f.jsxs("form",{onSubmit:tt,className:"space-y-6",children:[f.jsx("input",{required:!0,className:"w-full px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none font-bold text-black placeholder-gray-400",placeholder:"PS Name (e.g., Sensors Order)",value:o,onChange:et=>u(et.target.value)}),f.jsx("input",{className:"w-full px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none font-bold text-black placeholder-gray-400",placeholder:"Custom PS ID (optional)",value:b,onChange:et=>x(et.target.value)}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"People"}),c.map((et,J)=>{var j;return f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex gap-2 items-center",children:[et.trim()&&g[et]&&f.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full overflow-hidden border-2 border-[#f49221]",children:f.jsx("img",{src:((j=en.find(C=>C.id===g[et]))==null?void 0:j.image)||"",alt:et,className:"w-full h-full object-cover"})}),f.jsx("input",{required:!0,className:"flex-1 px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none text-black placeholder-gray-400 font-bold",placeholder:`Person ${J+1}`,value:et,onChange:C=>{const A=[...c];A[J]=C.target.value,m(A)}})]}),et.trim()&&f.jsx("button",{type:"button",onClick:()=>K(et),className:"ml-2 text-xs text-[#f49221] font-bold hover:underline",children:g[et]?" Change Avatar":"+ Add Avatar (Optional)"})]},J)})]}),f.jsx("button",{type:"button",onClick:()=>m([...c,""]),className:"text-xs text-[#f49221] font-bold uppercase tracking-wider hover:underline ml-1",children:"+ Add Person"}),f.jsxs("div",{className:"pt-8 flex flex-col gap-4",children:[f.jsx("button",{type:"submit",disabled:k,className:"w-full py-5 bg-[#f49221] text-white rounded-2xl font-bold shadow-xl shadow-[#f49221]/20 uppercase tracking-widest disabled:opacity-50",children:k?"Creating PS...":"Create PS"}),f.jsx("button",{type:"button",onClick:()=>r("selection"),disabled:k,className:"w-full py-4 px-4 border-2 border-black rounded-2xl font-bold text-black uppercase tracking-widest text-xs disabled:opacity-50",children:"Back"})]})]})]}),W&&f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 border-2 border-[#f49221]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-2xl font-bold text-black",children:"Choose Avatar"}),f.jsx("button",{onClick:()=>K(null),className:"text-gray-400 hover:text-gray-600",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:en.map(et=>f.jsx("button",{type:"button",onClick:()=>{y({...g,[W]:et.id}),K(null)},className:"w-full aspect-square rounded-2xl overflow-hidden hover:scale-110 transition-all border-2 border-transparent hover:border-[#f49221]",children:f.jsx("img",{src:et.image,alt:"avatar",className:"w-full h-full object-cover"})},et.id))}),f.jsx("button",{onClick:()=>K(null),className:"w-full py-3 bg-gray-100 text-black rounded-xl font-bold hover:bg-gray-200",children:"Cancel"})]})})]}):s==="join"?f.jsxs("div",{className:"max-w-md mx-auto p-10 bg-white rounded-[2.5rem] shadow-2xl mt-12 border-4 border-[#f49221] text-center",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8 text-black font-pt uppercase",children:"Access Purchase Sheet"}),f.jsx("input",{className:"w-full px-6 py-5 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none mb-8 text-center font-mono text-xl text-black placeholder-gray-400",placeholder:"PASTE PS ID",value:w,onChange:et=>V(et.target.value)}),f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("button",{onClick:()=>w&&n(w),className:"w-full py-5 bg-black text-white rounded-2xl font-bold shadow-xl uppercase tracking-widest",children:"Open"}),f.jsx("button",{onClick:()=>r("selection"),className:"w-full py-4 font-bold text-gray-400 uppercase tracking-widest text-xs",children:"Cancel"})]})]}):f.jsxs("div",{className:"max-w-md mx-auto mt-20 text-center p-12 bg-white rounded-[3.5rem] shadow-2xl border-2 border-gray-50",children:[f.jsx("div",{className:"w-28 h-28 bg-[#f49221] rounded-[2.5rem] flex items-center justify-center mx-auto mb-10 shadow-2xl shadow-[#f49221]/40 -rotate-3 border-4 border-white",children:f.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h18v4H3V3zm0 6h18v12H3V9zm4 3h5v6H7v-6z"})})}),f.jsx("h1",{className:"text-5xl font-bold text-black mb-3 font-pt tracking-tighter uppercase",children:"Purchase Sheet"}),f.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-[0.2em] text-[10px] mb-14",children:"Product Serial Tracking"}),f.jsxs("div",{className:"space-y-5",children:[f.jsx("button",{onClick:()=>r("create"),className:"w-full py-6 bg-[#f49221] text-white rounded-2xl font-bold hover:scale-[1.02] transition-all shadow-2xl shadow-[#f49221]/30 uppercase tracking-widest",children:"Create a PS"}),f.jsx("button",{onClick:()=>r("join"),className:"w-full py-6 bg-black text-white rounded-2xl font-bold hover:scale-[1.02] transition-all uppercase tracking-widest",children:"Access a PS"}),t&&f.jsx("button",{onClick:t,className:"w-full py-4 text-gray-400 hover:text-gray-600 rounded-2xl font-bold transition-all uppercase tracking-widest text-sm border-2 border-gray-200 hover:border-gray-300",children:" Back to Boards"})]})]})},qj=({tripId:n,participants:t,trip:s,onClose:r})=>{const o=(A,N="sm")=>{var st;const M=N==="sm"?"w-5 h-5 text-[8px]":"w-6 h-6 text-[10px]",E=N==="sm"?"border":"border-2";if((st=s==null?void 0:s.memberAvatars)!=null&&st[A]){const ut=en.find(B=>B.id===s.memberAvatars[A]);if(ut)return f.jsx("img",{src:ut.image,alt:A,className:`${M} rounded-full object-cover ${E} border-white flex-shrink-0`,onError:B=>{B.currentTarget.style.display="none"}})}const D=A.split(" ").map(ut=>ut[0]).join("").toUpperCase().slice(0,2);return f.jsx("div",{className:`${M} rounded-full bg-[#f49221]/20 flex items-center justify-center font-bold text-[#f49221] flex-shrink-0`,children:D})},[u,c]=q.useState(""),[m,g]=q.useState(""),[y,b]=q.useState(""),[x,w]=q.useState([]),[V,k]=q.useState("fair"),[U,L]=q.useState({}),[z,W]=q.useState("UPI"),[K,tt]=q.useState(!1),et=q.useMemo(()=>{if(V==="custom")return 0;const A=parseFloat(m);return isNaN(A)||x.length===0?0:A/x.length},[m,x,V]),J=q.useMemo(()=>Object.values(U).reduce((A,N)=>A+(parseFloat(N)||0),0),[U]),j=q.useMemo(()=>{const A=parseFloat(m);return isNaN(A)||V!=="custom"?{valid:!0,message:""}:Math.abs(J-A)>.01?{valid:!1,message:`Custom amounts (${J.toFixed(2)}) don't match total (${A})`}:{valid:!0,message:" Custom amounts match total"}},[J,m,V]),C=async A=>{if(A.preventDefault(),!u||!m||!y||x.length===0)return alert("Please fill all required fields.");const N=parseFloat(m);if(isNaN(N)||N<=0)return alert("Please enter a valid amount greater than 0.");if(V==="custom"&&!j.valid)return alert(j.message);tt(!0);try{const M={title:u,amount:N,paidBy:y,splitBetween:x,perPersonAmount:et,splitType:V,paymentMethod:z};V==="custom"&&(M.customSplits=Object.fromEntries(Object.entries(U).map(([E,D])=>[E,parseFloat(D)||0]))),await Rj(n,M),r()}catch(M){console.error("Error creating expense:",M),alert("Failed to save transaction. Check your backend/permissions.")}finally{tt(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:f.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-xl p-10 border-4 border-[#f49221]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-10",children:[f.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:"Add Transaction"}),f.jsx("button",{onClick:r,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:f.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("form",{onSubmit:C,className:"space-y-8",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Expense Item"}),f.jsx("input",{type:"text",placeholder:"e.g. Flight Tickets",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:u,onChange:A=>c(A.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Amount ()"}),f.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:m,onChange:A=>g(A.target.value)})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Who Paid?"}),f.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:y,onChange:A=>b(A.target.value),children:[f.jsx("option",{value:"",children:"Select Member"}),t.map(A=>f.jsx("option",{value:A,children:A},A))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Payment Channel"}),f.jsx("div",{className:"flex bg-gray-100 p-1.5 rounded-2xl",children:["UPI","Cash"].map(A=>f.jsx("button",{type:"button",onClick:()=>W(A),className:`flex-1 py-3 text-xs rounded-xl font-bold transition-all uppercase tracking-widest ${z===A?"bg-white shadow-xl text-[#f49221]":"text-gray-400"}`,children:A},A))})]})]}),f.jsx("div",{children:f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Split Type"}),f.jsxs("div",{className:"flex bg-gray-100 p-1.5 rounded-xl",children:[f.jsx("button",{type:"button",onClick:()=>k("fair"),className:`px-4 py-2 text-[10px] rounded-lg font-bold transition-all uppercase tracking-widest ${V==="fair"?"bg-white shadow-lg text-[#f49221]":"text-gray-400"}`,children:"Fair Split"}),f.jsx("button",{type:"button",onClick:()=>k("custom"),className:`px-4 py-2 text-[10px] rounded-lg font-bold transition-all uppercase tracking-widest ${V==="custom"?"bg-white shadow-lg text-[#f49221]":"text-gray-400"}`,children:"Custom Split"})]})]})}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-end mb-3 ml-1",children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Distributed Among"}),f.jsx("button",{type:"button",onClick:()=>w([...t]),className:"text-[10px] font-bold text-[#f49221] uppercase tracking-widest",children:"Select Everyone"})]}),f.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:t.map(A=>f.jsxs("label",{className:`flex items-center gap-2 p-4 rounded-2xl border-2 cursor-pointer transition-all ${x.includes(A)?"bg-[#f49221]/10 border-[#f49221]":"bg-white border-gray-100"}`,children:[f.jsx("input",{type:"checkbox",className:"hidden",checked:x.includes(A),onChange:()=>w(N=>N.includes(A)?N.filter(M=>M!==A):[...N,A])}),o(A,"sm"),f.jsx("span",{className:`text-xs font-black uppercase tracking-tight ${x.includes(A)?"text-black":"text-gray-400"}`,children:A})]},A))})]}),V==="custom"&&x.length>0&&f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3 block ml-1",children:"Custom Amounts Per Person"}),f.jsx("div",{className:"space-y-3 max-h-52 overflow-y-auto pr-2",children:x.map(A=>f.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl",children:[o(A,"md"),f.jsx("span",{className:"text-sm font-bold text-black flex-1",children:A}),f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:f.jsx(oe,{})}),f.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",className:"w-28 pl-8 pr-3 py-2 rounded-lg border-2 border-gray-200 focus:border-[#f49221] outline-none font-bold text-sm text-black",value:U[A]||"",onChange:N=>L({...U,[A]:N.target.value})})]})]},A))}),f.jsx("div",{className:`mt-3 p-3 rounded-xl text-xs font-bold ${j.valid?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:j.message||`Total: ${J.toFixed(2)} / ${m||"0"}`})]}),f.jsx("button",{type:"submit",disabled:K,className:"w-full bg-[#f49221] text-white font-bold py-6 rounded-2xl shadow-2xl shadow-[#f49221]/40 transition-all uppercase tracking-[0.2em] disabled:opacity-50 text-sm",children:K?"Processing...":"Secure Transaction"})]})]})})},Hj=({expense:n,participants:t,trip:s,onClose:r,onUpdate:o})=>{const[u,c]=q.useState(n.title),[m,g]=q.useState(n.amount.toString()),[y,b]=q.useState(n.paidBy),[x,w]=q.useState(n.splitBetween),[V,k]=q.useState(n.splitType||"fair"),[U,L]=q.useState(n.customSplits?Object.fromEntries(Object.entries(n.customSplits).map(([A,N])=>[A,N.toString()])):{}),[z,W]=q.useState(n.paymentMethod),[K,tt]=q.useState(!1),et=(A,N="sm")=>{var st;const M=N==="sm"?"w-5 h-5 text-[8px]":"w-6 h-6 text-[10px]",E=N==="sm"?"border":"border-2";if((st=s==null?void 0:s.memberAvatars)!=null&&st[A]){const ut=en.find(B=>B.id===s.memberAvatars[A]);if(ut)return f.jsx("img",{src:ut.image,alt:A,className:`${M} rounded-full object-cover ${E} border-white flex-shrink-0`,onError:B=>{B.currentTarget.style.display="none"}})}const D=A.split(" ").map(ut=>ut[0]).join("").toUpperCase().slice(0,2);return f.jsx("div",{className:`${M} rounded-full bg-[#f49221]/20 flex items-center justify-center font-bold text-[#f49221] flex-shrink-0`,children:D})},J=V==="custom"?0:parseFloat(m)/x.length||0,j=(A,N)=>{w(N?[...x,A]:x.filter(M=>M!==A))},C=async A=>{if(A.preventDefault(),!u||!m||!y||x.length===0)return alert("Please fill all required fields.");tt(!0);try{const N=parseFloat(m),M={title:u,amount:N,paidBy:y,splitBetween:x,perPersonAmount:J,splitType:V,paymentMethod:z};V==="custom"&&(M.customSplits=Object.fromEntries(Object.entries(U).map(([E,D])=>[E,parseFloat(D)||0]))),await jj(n.id,M),o(),r()}catch(N){console.error("Error updating expense:",N),alert("Failed to update expense.")}finally{tt(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:f.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-xl p-10 border-4 border-[#f49221]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-10",children:[f.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:"Edit Expense"}),f.jsx("button",{onClick:r,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:f.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("form",{onSubmit:C,className:"space-y-8",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Expense Item"}),f.jsx("input",{type:"text",placeholder:"e.g. Flight Tickets",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:u,onChange:A=>c(A.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Amount ()"}),f.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:m,onChange:A=>g(A.target.value)})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Who Paid?"}),f.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:y,onChange:A=>b(A.target.value),children:[f.jsx("option",{value:"",children:"Select Member"}),t.map(A=>f.jsx("option",{value:A,children:A},A))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Payment Channel"}),f.jsx("div",{className:"flex bg-gray-100 p-1.5 rounded-2xl",children:["UPI","Cash"].map(A=>f.jsx("button",{type:"button",onClick:()=>W(A),className:`flex-1 py-3 text-xs rounded-xl font-bold transition-all uppercase tracking-widest ${z===A?"bg-white shadow-xl text-[#f49221]":"text-gray-400"}`,children:A},A))})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3 block ml-1",children:"Split Between:"}),f.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.map(A=>f.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-all",children:[f.jsx("input",{type:"checkbox",checked:x.includes(A),onChange:N=>j(A,N.target.checked),className:"w-5 h-5 rounded accent-[#f49221]"}),f.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[et(A,"sm"),f.jsx("span",{className:"font-bold text-black",children:A})]})]},A))})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{type:"submit",disabled:K,className:"flex-1 bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50",children:K?"Updating...":"Update Expense"}),f.jsx("button",{type:"button",onClick:r,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all",children:"Cancel"})]})]})]})})},zm=20,Gj=({expenses:n,trip:t,participants:s=[]})=>{const[r,o]=q.useState(null),[u,c]=q.useState(null),[m,g]=q.useState([]),[y,b]=q.useState(1),[x,w]=q.useState(!0),V=q.useRef(null),k=q.useRef(null);q.useEffect(()=>{const z=n.slice(0,zm);g(z),b(1),w(n.length>zm)},[n]);const U=q.useCallback(()=>{if(!x)return;const z=y+1,W=0,K=z*zm,tt=n.slice(W,K);g(tt),b(z),w(K<n.length)},[y,n,x]);q.useEffect(()=>(V.current&&V.current.disconnect(),V.current=new IntersectionObserver(z=>{z[0].isIntersecting&&x&&U()},{threshold:.1}),k.current&&V.current.observe(k.current),()=>{V.current&&V.current.disconnect()}),[U,x]);const L=z=>{var tt;const W=(tt=t==null?void 0:t.memberAvatars)==null?void 0:tt[z],K=en.find(et=>et.id===W);return K!=null&&K.image?f.jsx("img",{src:K.image,alt:z,className:"w-6 h-6 rounded-full object-cover"}):f.jsx("div",{className:"w-6 h-6 bg-[#f49221]/30 rounded-full flex items-center justify-center text-[#f49221] font-bold text-xs",children:z[0]})};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"backdrop-blur-xl bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-3xl overflow-hidden shadow-2xl shadow-[#f49221]/10",children:[f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white backdrop-blur-xl",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Description"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Value"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Paid By"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Split"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Proof"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Action"})]})}),f.jsx("tbody",{className:"divide-y divide-white/5",children:m.map(z=>f.jsxs("tr",{className:"hover:bg-white/10 transition-all border-l-4 border-transparent hover:border-[#f49221] backdrop-blur-sm group",children:[f.jsxs("td",{className:"px-6 py-5",children:[f.jsx("div",{className:"font-bold text-white text-base",children:z.title}),f.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(z.createdAt).toLocaleDateString()})]}),f.jsxs("td",{className:"px-6 py-5 font-bold text-lg text-white",children:[f.jsx(oe,{className:"mr-1"}),z.amount.toFixed(2)]}),f.jsx("td",{className:"px-6 py-5",children:f.jsxs("div",{className:"flex items-center gap-2",children:[L(z.paidBy),f.jsxs("div",{children:[f.jsx("div",{className:"text-gray-300 font-medium",children:z.paidBy}),f.jsxs("div",{className:"text-xs text-gray-600",children:["(",z.paymentMethod,")"]})]})]})}),f.jsxs("td",{className:"px-6 py-5",children:[f.jsxs("div",{className:"text-gray-300 font-medium text-sm",children:[z.splitBetween.length," person",z.splitBetween.length!==1?"s":""]}),z.splitType==="custom"?f.jsx("div",{className:"text-xs text-purple-400 font-bold mt-1",children:"CUSTOM SPLIT"}):f.jsxs("div",{className:"text-xs text-[#f49221] font-bold mt-1",children:[f.jsx(oe,{}),z.perPersonAmount.toFixed(2)," each"]})]}),f.jsx("td",{className:"px-6 py-5",children:z.proofImageUrl?f.jsx("button",{onClick:()=>o(z.proofImageUrl),className:"bg-[#f49221] hover:bg-[#e58515] text-white px-4 py-2 rounded-lg text-xs font-medium transition-colors",children:"View"}):f.jsx("span",{className:"text-gray-600 text-xs",children:"No proof"})}),f.jsx("td",{className:"px-6 py-5",children:f.jsx("button",{onClick:()=>c(z),className:"bg-[#f49221] hover:bg-[#e58515] text-white px-4 py-2 rounded-lg text-xs font-medium transition-colors",children:"Edit"})})]},z.id))})]})}),x&&f.jsx("div",{ref:k,className:"flex justify-center py-8",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-[#f49221] border-t-transparent"})}),!x&&m.length>0&&f.jsxs("div",{className:"text-center py-6 text-gray-400 text-sm",children:["All expenses loaded (",n.length," total)"]})]}),r&&f.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-6 z-[60] backdrop-blur-xl",onClick:()=>o(null),children:f.jsxs("div",{className:"relative max-w-4xl w-full flex flex-col items-center",children:[f.jsx("button",{className:"absolute -top-16 right-0 text-white hover:text-[#f49221] transition-colors p-4",children:f.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),f.jsx("img",{src:r,alt:"Payment Proof",className:"max-h-[80vh] object-contain rounded-3xl shadow-[0_0_100px_rgba(244,146,33,0.3)] border-4 border-white"})]})}),u&&f.jsx(Hj,{expense:u,participants:s,trip:t,onClose:()=>c(null),onUpdate:()=>{c(null)}})]})},Yj=({tripId:n,participants:t,trip:s,onClose:r})=>{const[o,u]=q.useState(""),[c,m]=q.useState(""),[g,y]=q.useState("1"),[b,x]=q.useState(""),[w,V]=q.useState(""),[k,U]=q.useState(""),[L,z]=q.useState("Pending"),[W,K]=q.useState(""),[tt,et]=q.useState(""),[J,j]=q.useState(""),[C,A]=q.useState(!1),N=["PR Sent","Ordered","Delivered","Out of Stock","Pending"],M=["MECH","AI","SNA","MGMT"];q.useEffect(()=>{(async()=>{try{const st=await Lj(n);u(st)}catch(st){console.warn("Unable to fetch next serial, defaulting to PS-001",st),u("PS-001")}})()},[n]),q.useEffect(()=>{const st=parseInt(g)||1,ut=parseFloat(W);!isNaN(ut)&&st>0?et((ut*st).toFixed(2)):W||et("")},[W,g]);const E=(st,ut="sm")=>{var Tt;const B=ut==="sm"?"w-5 h-5 text-[8px]":"w-6 h-6 text-[10px]",X=ut==="sm"?"border":"border-2";if((Tt=s==null?void 0:s.memberAvatars)!=null&&Tt[st]){const Et=en.find(O=>O.id===s.memberAvatars[st]);if(Et)return f.jsx("img",{src:Et.image,alt:st,className:`${B} rounded-full object-cover ${X} border-white flex-shrink-0`,onError:O=>{O.currentTarget.style.display="none"}})}const ct=st.split(" ").map(Et=>Et[0]).join("").toUpperCase().slice(0,2);return f.jsx("div",{className:`${B} rounded-full bg-[#f49221]/20 flex items-center justify-center font-bold text-[#f49221] flex-shrink-0`,children:ct})},D=async st=>{if(st.preventDefault(),!o||!c||!k)return alert("Please fill Item Name and Added By.");A(!0);try{const ut={serialNumber:o,itemName:c,quantity:parseInt(g)||1,addedBy:k,status:L};b&&b.trim()&&(ut.link=b.trim()),w&&w.trim()&&(ut.subsystem=w.trim()),J&&J.trim()&&(ut.comments=J.trim()),W&&(ut.pricePerUnit=parseFloat(W)),tt&&(ut.totalPrice=parseFloat(tt)),console.log(" Submitting product to PS board:",n,ut),await Ij(n,ut),console.log(" Product created successfully"),r()}catch(ut){console.error(" Error creating product:",ut);const B=(ut==null?void 0:ut.message)||(ut==null?void 0:ut.code)||"Unknown error";alert(`Failed to add product to PS board.

Error: ${B}

Make sure your Firestore rules allow:
 Write access to ps_boards/${n}/products

Rule example:
match /ps_boards/{psId}/products/{productId} {
  allow read, write: if true;
}`)}finally{A(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:f.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-2xl p-10 border-4 border-[#f49221]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-10",children:[f.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:"Add Product"}),f.jsx("button",{onClick:r,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:f.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("form",{onSubmit:D,className:"space-y-8",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Serial Number (PS)"}),f.jsx("input",{type:"text",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black bg-gray-50",value:o,readOnly:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Item Name"}),f.jsx("input",{type:"text",placeholder:"e.g. Heat Gun",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:c,onChange:st=>m(st.target.value)})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Quantity"}),f.jsx("input",{type:"number",min:"1",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:g,onChange:st=>y(st.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Status"}),f.jsx("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:L,onChange:st=>z(st.target.value),children:N.map(st=>f.jsx("option",{value:st,children:st},st))})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Added By"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black appearance-none",value:k,onChange:st=>U(st.target.value),children:[f.jsx("option",{value:"",children:"Select Person"}),t.map(st=>f.jsx("option",{value:st,children:st},st))]}),k&&f.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:E(k,"sm")})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Subsystem"}),f.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:w,onChange:st=>V(st.target.value),children:[f.jsx("option",{value:"",children:"Select subsystem"}),M.map(st=>f.jsx("option",{value:st,children:st},st))]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Price Per Unit ()"}),f.jsx("input",{type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:W,onChange:st=>K(st.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Total Price ()"}),f.jsx("input",{type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black bg-gray-50",value:tt,readOnly:!0})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Product Link"}),f.jsx("input",{type:"url",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:b,onChange:st=>x(st.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Comments"}),f.jsx("textarea",{rows:3,className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:J,onChange:st=>j(st.target.value)})]}),f.jsx("button",{type:"submit",disabled:C,className:"w-full bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Adding...":"Add Product"})]})]})})},Kj=({product:n,trip:t,onClose:s,onUpdate:r})=>{var A,N;const[o,u]=q.useState(n.itemName),[c,m]=q.useState(n.quantity.toString()),[g,y]=q.useState(n.link||""),[b,x]=q.useState(n.subsystem||""),[w,V]=q.useState(n.status),[k,U]=q.useState(((A=n.pricePerUnit)==null?void 0:A.toString())||""),[L,z]=q.useState(((N=n.totalPrice)==null?void 0:N.toString())||""),[W,K]=q.useState(n.comments||""),[tt,et]=q.useState(!1),J=["PR Sent","Ordered","Delivered","Out of Stock","Pending"],j=["MECH","AI","SNA","MGMT"];q.useEffect(()=>{const M=parseInt(c)||1,E=parseFloat(k);!isNaN(E)&&M>0&&z((E*M).toFixed(2))},[k,c]);const C=async M=>{M.preventDefault(),et(!0);try{const E={itemName:o,quantity:parseInt(c)||1,status:w};g&&g.trim()&&(E.link=g.trim()),b&&b.trim()&&(E.subsystem=b.trim()),W&&W.trim()&&(E.comments=W.trim()),k&&(E.pricePerUnit=parseFloat(k)),L&&(E.totalPrice=parseFloat(L)),await Cp(n.id,E,t==null?void 0:t.id),r(),s()}catch(E){console.error("Error updating product:",E),alert("Failed to update product.")}finally{et(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:f.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-2xl p-10 border-4 border-[#f49221]",children:[f.jsxs("div",{className:"flex justify-between items-center mb-10",children:[f.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:"Edit Product"}),f.jsx("button",{onClick:s,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:f.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("form",{onSubmit:C,className:"space-y-8",children:[f.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border-2 border-gray-200",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 block",children:"Serial Number (PS)"}),f.jsx("div",{className:"text-lg font-bold text-[#f49221]",children:n.serialNumber})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 block",children:"Added By"}),f.jsx("div",{className:"text-lg font-bold text-black",children:n.addedBy})]})]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-4",children:["Created: ",new Date(n.createdAt).toLocaleString()]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Item Name"}),f.jsx("input",{type:"text",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:o,onChange:M=>u(M.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Quantity"}),f.jsx("input",{type:"number",min:"1",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:c,onChange:M=>m(M.target.value)})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Status"}),f.jsx("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:w,onChange:M=>V(M.target.value),children:J.map(M=>f.jsx("option",{value:M,children:M},M))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Subsystem"}),f.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:b,onChange:M=>x(M.target.value),children:[f.jsx("option",{value:"",children:"Select subsystem"}),j.map(M=>f.jsx("option",{value:M,children:M},M))]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Price Per Unit ()"}),f.jsx("input",{type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:k,onChange:M=>U(M.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Total Price ()"}),f.jsx("input",{type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black bg-gray-50",value:L,readOnly:!0})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Product Link"}),f.jsx("input",{type:"url",placeholder:"https://example.com/product",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:g,onChange:M=>y(M.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Comments"}),f.jsx("textarea",{placeholder:"Add any notes or comments...",rows:3,className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:W,onChange:M=>K(M.target.value)})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{type:"submit",disabled:tt,className:"flex-1 bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:tt?"Updating...":"Update Product"}),f.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all",children:"Cancel"})]})]})]})})},Qj=({products:n,trip:t})=>{const[s,r]=q.useState(null),[o,u]=q.useState("PR Sent"),[c,m]=q.useState(!1),[g,y]=q.useState(null),[b,x]=q.useState("All"),[w,V]=q.useState(null),[k,U]=q.useState(null),[L,z]=q.useState(""),W=["PR Sent","Ordered","Delivered","Out of Stock","Pending"],K=["All","MECH","AI","SNA","MGMT"],tt=b==="All"?n:n.filter(N=>{var M;return((M=N.subsystem)==null?void 0:M.toLowerCase())===b.toLowerCase()}),et=N=>{const M={"PR Sent":"bg-blue-500/20 text-blue-400 border-blue-500",Ordered:"bg-purple-500/20 text-purple-400 border-purple-500",Delivered:"bg-green-500/20 text-green-400 border-green-500","Out of Stock":"bg-red-500/20 text-red-400 border-red-500",Pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500"};return M[N]||M.Pending},J=N=>{var D;const M=(D=t==null?void 0:t.memberAvatars)==null?void 0:D[N],E=en.find(st=>st.id===M);return E!=null&&E.image?f.jsx("img",{src:E.image,alt:N,className:"w-7 h-7 rounded-full object-cover border border-white"}):f.jsx("div",{className:"w-7 h-7 bg-[#f49221]/30 rounded-full flex items-center justify-center text-[#f49221] font-bold text-xs border border-[#f49221]",children:N[0]})},j=async(N,M)=>{m(!0);try{await Cp(N,{status:M},t==null?void 0:t.id),r(null)}catch(E){console.error("Error updating product:",E),alert("Failed to update product status.")}finally{m(!1)}},C=async N=>{if(confirm("Are you sure you want to delete this product?")){m(!0);try{await Oj(N,t==null?void 0:t.id)}catch(M){console.error("Error deleting product:",M),alert("Failed to delete product.")}finally{m(!1)}}},A=async()=>{if(!(!k||!L)){m(!0);try{const N=new Date(L).getTime();await Cp(k.id,{deliveryDate:N},t==null?void 0:t.id),U(null),z("")}catch(N){console.error("Error setting delivery date:",N),alert("Failed to set delivery date.")}finally{m(!1)}}};return n.length===0?f.jsxs("div",{className:"text-center py-16",children:[f.jsx("div",{className:"text-6xl mb-4",children:""}),f.jsx("p",{className:"text-gray-400 text-lg",children:"No products added yet"}),f.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Add your first product to get started tracking"})]}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex gap-3 flex-wrap backdrop-blur-xl bg-white/5 border border-white/20 rounded-2xl p-4",children:[f.jsx("span",{className:"text-gray-300 font-bold text-sm mr-2 flex items-center",children:"Filter by Subsystem:"}),K.map(N=>f.jsx("button",{onClick:()=>x(N),className:`px-4 py-2 rounded-xl font-bold text-xs uppercase tracking-wider transition-all ${b===N?"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white shadow-lg shadow-[#f49221]/50":"bg-white/10 text-gray-300 hover:bg-white/20 border border-white/20"}`,children:N==="All"?`All (${n.length})`:`${N.toUpperCase()} (${n.filter(M=>{var E;return((E=M.subsystem)==null?void 0:E.toLowerCase())===N.toLowerCase()}).length})`},N))]}),f.jsx("div",{className:"backdrop-blur-xl bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-3xl overflow-hidden shadow-2xl shadow-[#f49221]/10",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white backdrop-blur-xl sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"PS"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Item Name"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Qty"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Added By"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Subsystem"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Status"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Price"}),f.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-white/5",children:tt.length===0?f.jsx("tr",{children:f.jsxs("td",{colSpan:8,className:"px-6 py-16 text-center",children:[f.jsxs("div",{className:"text-gray-400 text-lg",children:["No products found in ",b," subsystem"]}),f.jsx("button",{onClick:()=>x("All"),className:"mt-4 px-6 py-2 bg-[#f49221] hover:bg-[#e58515] text-white rounded-xl font-bold text-sm transition-colors",children:"Show All Products"})]})}):tt.map(N=>{var M;return f.jsxs(Ch.Fragment,{children:[f.jsxs("tr",{className:"hover:bg-white/10 transition-all border-l-4 border-transparent hover:border-[#f49221] backdrop-blur-sm group",children:[f.jsx("td",{className:"px-6 py-5",children:f.jsx("div",{className:"font-bold text-[#f49221] bg-[#f49221]/10 px-3 py-1 rounded-lg text-sm border border-[#f49221]/50",children:N.serialNumber})}),f.jsxs("td",{className:"px-6 py-5",children:[f.jsx("div",{className:"font-bold text-white text-base",children:N.itemName}),f.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(N.createdAt).toLocaleDateString(),"  ",new Date(N.createdAt).toLocaleTimeString()]}),N.deliveryDate&&f.jsxs("div",{className:"text-xs text-green-400 mt-1 flex items-center gap-1 font-semibold",children:[f.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Delivery: ",new Date(N.deliveryDate).toLocaleDateString()]})]}),f.jsx("td",{className:"px-6 py-5",children:f.jsx("span",{className:"font-bold text-white text-lg",children:N.quantity})}),f.jsx("td",{className:"px-6 py-5",children:f.jsxs("div",{className:"flex items-center gap-2",children:[J(N.addedBy),f.jsx("span",{className:"text-gray-300 font-medium text-sm",children:N.addedBy})]})}),f.jsx("td",{className:"px-6 py-5",children:f.jsx("span",{className:"text-gray-300 font-medium text-sm",children:N.subsystem||""})}),f.jsx("td",{className:"px-6 py-5",children:s===N.id?f.jsxs("div",{className:"flex gap-2",children:[f.jsx("select",{value:o,onChange:E=>u(E.target.value),className:"px-2 py-1 rounded text-xs bg-black text-white border border-[#f49221] outline-none",children:W.map(E=>f.jsx("option",{value:E,children:E},E))}),f.jsx("button",{onClick:()=>j(N.id,o),disabled:c,className:"px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs font-bold transition-colors disabled:opacity-50",children:""}),f.jsx("button",{onClick:()=>r(null),className:"px-2 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-xs font-bold transition-colors",children:""})]}):f.jsx("button",{onClick:()=>{r(N.id),u(N.status)},className:`px-3 py-1 rounded-lg text-xs font-bold border transition-all cursor-pointer ${et(N.status)}`,children:N.status})}),f.jsx("td",{className:"px-6 py-5",children:f.jsx("div",{className:"text-gray-300 font-medium",children:N.totalPrice?f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx(oe,{className:"mr-1 inline"}),N.totalPrice.toFixed(2)]}),f.jsxs("div",{className:"text-xs text-gray-500",children:["@ ",f.jsx(oe,{className:"mr-1 inline"}),((M=N.pricePerUnit)==null?void 0:M.toFixed(2))||""]})]}):""})}),f.jsx("td",{className:"px-6 py-5",children:f.jsxs("div",{className:"flex gap-2 flex-wrap",children:[f.jsx("button",{onClick:()=>y(N),className:"bg-[#f49221] hover:bg-[#e58515] text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors",children:"Edit"}),N.link&&f.jsx("a",{href:N.link,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors",children:"Link"}),N.comments&&f.jsx("button",{onClick:()=>V(w===N.id?null:N.id),className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors",children:w===N.id?"Hide Note":" Note"}),f.jsxs("button",{onClick:()=>{U(N),z(N.deliveryDate?new Date(N.deliveryDate).toISOString().split("T")[0]:"")},className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors",children:[" ",N.deliveryDate?"Update":"Set"," Date"]}),f.jsx("button",{onClick:()=>C(N.id),disabled:c,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors disabled:opacity-50",children:"Delete"})]})})]}),w===N.id&&N.comments&&f.jsx("tr",{className:"bg-purple-500/10 border-l-4 border-purple-500",children:f.jsx("td",{colSpan:8,className:"px-6 py-4",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"text-purple-400 mt-1",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-purple-300 text-xs font-bold uppercase tracking-wider mb-1",children:"Product Note"}),f.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:N.comments})]})]})})})]},N.id)})})]})})}),g&&f.jsx(Kj,{product:g,trip:t,onClose:()=>y(null),onUpdate:()=>{y(null)}}),k&&f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 border-4 border-green-500",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-2xl font-bold text-black",children:" Set Delivery Date"}),f.jsx("button",{onClick:()=>{U(null),z("")},className:"p-2 hover:bg-gray-100 rounded-xl transition-all",children:f.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 mb-6 border-2 border-gray-200",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("span",{className:"font-bold text-[#f49221] text-sm",children:k.serialNumber}),f.jsx("span",{className:"font-bold text-black",children:k.itemName})]}),k.deliveryDate&&f.jsxs("div",{className:"text-xs text-gray-600",children:["Current: ",new Date(k.deliveryDate).toLocaleDateString()]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block",children:"Expected Delivery Date"}),f.jsx("input",{type:"date",value:L,onChange:N=>z(N.target.value),className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-200 focus:border-green-500 outline-none font-bold text-black"})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:A,disabled:c||!L,className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:shadow-lg hover:shadow-green-500/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Saving...":"Save Date"}),f.jsx("button",{onClick:()=>{U(null),z("")},className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all",children:"Cancel"})]})]})})]})},Ug=(n,t)=>{const s=new Map;n.forEach(u=>{const c=u.paidBy,m=g=>u.splitType==="custom"&&u.customSplits?u.customSplits[g]??0:u.perPersonAmount;u.splitBetween.forEach(g=>{if(g===c)return;const y=m(g);if(y>.009){const b=`${g}__${c}`;s.set(b,(s.get(b)||0)+y)}})}),t.forEach(u=>{const c=`${u.from}__${u.to}`;if(!s.has(c))return;const m=(s.get(c)||0)-u.amount;s.set(c,m>.009?m:0)});const r=new Map;s.forEach((u,c)=>{if(u<=.009)return;const[m,g]=c.split("__"),y=m<g?m:g,b=m<g?g:m,x=`${y}__${b}`,w=m===y?u:-u;r.set(x,(r.get(x)||0)+w)});const o=[];return r.forEach((u,c)=>{if(Math.abs(u)<=.009)return;const[m,g]=c.split("__");u>0?o.push({from:m,to:g,amount:u}):o.push({from:g,to:m,amount:Math.abs(u)})}),o.sort((u,c)=>c.amount-u.amount)},Xj=({tripId:n,trackedSettlements:t,participants:s,trip:r,expenses:o})=>{const[u,c]=q.useState(null),[m,g]=q.useState(!1),[y,b]=q.useState(""),[x,w]=q.useState(""),[V,k]=q.useState(""),[U,L]=q.useState(!1),[z,W]=q.useState(null),K=q.useMemo(()=>Ug(o,t),[o,t]),tt=t.filter(E=>!E.isPaid),et=t.filter(E=>E.isPaid),J=E=>{var ut;const D=(ut=r==null?void 0:r.memberAvatars)==null?void 0:ut[E],st=en.find(B=>B.id===D);return st!=null&&st.image?f.jsx("img",{src:st.image,alt:E,className:"w-10 h-10 rounded-lg object-cover"}):f.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:E[0]})},j=async E=>{const D=`${E.from}-${E.to}`;c(D);try{await c1(n,E.from,E.to,E.amount)}catch(st){console.error("Error creating settlement",st),alert("Failed to track this payment.")}finally{c(null)}},C=async(E,D)=>{W(E);try{await Dj(E,D)}catch(st){console.error("Error updating paid status",st),alert("Failed to update status.")}finally{W(null)}},A=async E=>{try{await Vj(E)}catch(D){console.error("Error moving payment back to suggested",D),alert("Failed to move payment back.")}},N=async E=>{E.preventDefault();const D=parseFloat(V);if(!y||!x||Number.isNaN(D)||D<=0){alert("Please fill all fields with a valid amount.");return}if(y===x){alert("Payer and receiver cannot be the same.");return}L(!0);try{await c1(n,y,x,D),g(!1),b(""),w(""),k("")}catch(st){console.error("Error creating custom settlement",st),alert("Failed to record payment.")}finally{L(!1)}};return K.length===0&&tt.length===0&&et.length===0?f.jsxs("div",{className:"mt-8 bg-gradient-to-br from-green-900 to-green-950 rounded-3xl p-8 text-center border-2 border-green-700",children:[f.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),f.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:"All Settled!"}),f.jsx("p",{className:"text-green-300 text-sm",children:"Everyone is balanced. No payments needed."})]}):f.jsxs("div",{className:"mt-8 space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-white text-2xl font-bold",children:"Settlements"}),f.jsxs("button",{onClick:()=>g(E=>!E),className:"bg-[#f49221] hover:bg-[#e58515] text-white px-4 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition-colors",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v12M6 12h12"})}),"Record Payment"]})]}),m&&f.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-[#f49221] rounded-2xl p-6 shadow-2xl shadow-[#f49221]/20",children:[f.jsx("h4",{className:"text-white font-bold text-lg mb-4",children:"Record a Payment"}),f.jsxs("form",{onSubmit:N,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-gray-400 text-sm font-medium mb-2 block",children:"Who Paid"}),f.jsxs("select",{value:y,onChange:E=>b(E.target.value),className:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-[#f49221] outline-none",required:!0,children:[f.jsx("option",{value:"",children:"Select person"}),s.map(E=>f.jsx("option",{value:E,children:E},E))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-gray-400 text-sm font-medium mb-2 block",children:"Paid To"}),f.jsxs("select",{value:x,onChange:E=>w(E.target.value),className:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-[#f49221] outline-none",required:!0,children:[f.jsx("option",{value:"",children:"Select person"}),s.map(E=>f.jsx("option",{value:E,children:E},E))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-gray-400 text-sm font-medium mb-2 block",children:"Amount ()"}),f.jsx("input",{type:"number",step:"0.01",min:"0.01",value:V,onChange:E=>k(E.target.value),placeholder:"0.00",className:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-[#f49221] outline-none",required:!0})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{type:"submit",disabled:U,className:"bg-[#f49221] hover:bg-[#e58515] text-white px-6 py-3 rounded-lg font-medium transition-colors disabled:opacity-50 flex-1",children:U?"Saving...":"Save Payment"}),f.jsx("button",{type:"button",onClick:()=>g(!1),className:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})]}),tt.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-white text-xl font-bold",children:"Tracked Payments"}),f.jsxs("span",{className:"bg-red-900 text-red-200 text-xs font-bold px-3 py-1 rounded-full",children:[tt.length," Pending"]})]}),f.jsx("div",{className:"space-y-3",children:tt.map(E=>f.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-5 border-2 border-red-800",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[J(E.from),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-white font-bold",children:E.from}),f.jsx("div",{className:"text-red-300 text-xs",children:"should pay"})]})]}),f.jsx("div",{className:"px-6",children:f.jsx("svg",{className:"w-8 h-8 text-[#f49221]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("div",{className:"text-white font-bold",children:E.to}),f.jsx("div",{className:"text-red-300 text-xs",children:"receives"})]}),J(E.to)]}),f.jsxs("div",{className:"ml-6 flex items-center gap-3",children:[f.jsxs("div",{className:"bg-[#f49221] text-white font-bold px-4 py-2 rounded-xl text-lg",children:[f.jsx(oe,{className:"mr-1"}),E.amount.toFixed(2)]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:()=>C(E.id,!0),disabled:z===E.id,className:"w-24 h-9 rounded-full flex items-center px-1 transition-all bg-red-700 text-white text-xs font-bold justify-between",title:"Mark as paid",children:[f.jsx("span",{className:"ml-2",children:"Unpaid"}),f.jsx("span",{className:"w-6 h-6 bg-white rounded-full shadow"})]}),f.jsx("button",{onClick:()=>A(E.id),className:"px-3 py-2 rounded-lg text-xs font-bold bg-gray-700 text-white hover:bg-gray-600 transition-colors",title:"Move back to suggested",children:"Move to Suggested"})]})]})]})},E.id))})]}),K.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-white text-xl font-bold",children:"Suggested Settlements"}),f.jsxs("span",{className:"bg-[#f49221] text-white text-xs font-bold px-3 py-1 rounded-full",children:[K.length," Suggested"]})]}),f.jsx("div",{className:"space-y-3",children:K.map((E,D)=>{const st=`${E.from}-${E.to}`;return f.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-5 border-2 border-[#f49221]/30 hover:border-[#f49221] transition-all hover:shadow-xl hover:shadow-[#f49221]/20",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[J(E.from),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-white font-bold",children:E.from}),f.jsx("div",{className:"text-gray-400 text-xs",children:"should pay"})]})]}),f.jsx("div",{className:"px-6",children:f.jsx("svg",{className:"w-8 h-8 text-[#f49221]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("div",{className:"text-white font-bold",children:E.to}),f.jsx("div",{className:"text-gray-400 text-xs",children:"receives"})]}),J(E.to)]}),f.jsxs("div",{className:"ml-6 flex items-center gap-3",children:[f.jsxs("div",{className:"bg-[#f49221] text-white font-bold px-4 py-2 rounded-xl text-lg",children:[f.jsx(oe,{className:"mr-1"}),E.amount.toFixed(2)]}),f.jsx("button",{onClick:()=>j(E),disabled:u===st,className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-xl font-bold text-sm transition-colors disabled:opacity-50",title:"Track this payment",children:u===st?"Adding...":"Track"})]})]})},st||D)})})]}),et.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-white text-xl font-bold",children:"Completed Payments"}),f.jsxs("span",{className:"bg-green-900 text-green-300 text-xs font-bold px-3 py-1 rounded-full",children:[et.length," Completed"]})]}),f.jsx("div",{className:"space-y-3",children:et.map(E=>f.jsx("div",{className:"bg-gradient-to-r from-green-950 to-green-900 rounded-2xl p-5 border-2 border-green-800 opacity-80",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[J(E.from),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-white font-bold",children:E.from}),f.jsx("div",{className:"text-green-300 text-xs",children:"paid"})]})]}),f.jsx("div",{className:"px-6",children:f.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("div",{className:"text-white font-bold",children:E.to}),f.jsx("div",{className:"text-green-300 text-xs",children:"received"})]}),J(E.to)]}),f.jsxs("div",{className:"ml-6 flex items-center gap-3",children:[f.jsxs("div",{className:"bg-green-700 text-white font-bold px-4 py-2 rounded-xl text-lg",children:[f.jsx(oe,{className:"mr-1"}),E.amount.toFixed(2)]}),f.jsxs("button",{onClick:()=>C(E.id,!1),disabled:z===E.id,className:"w-24 h-9 rounded-full flex items-center px-1 transition-all bg-green-700 text-white text-xs font-bold justify-between",title:"Mark as unpaid",children:[f.jsx("span",{className:"ml-2",children:"Paid"}),f.jsx("span",{className:"w-6 h-6 bg-white rounded-full shadow"})]})]})]})},E.id))})]})]})},Fm=15,$j=({person:n,balances:t,expenses:s,settlements:r,trip:o,onClose:u})=>{var M;const c=t.find(E=>E.name===n),m=Ch.useMemo(()=>Ug(s,r).filter(E=>E.from===n||E.to===n),[s,r,n]),g=m.filter(E=>E.from===n),y=m.filter(E=>E.to===n),b=Ch.useMemo(()=>{const E=g.reduce((st,ut)=>st+ut.amount,0),D=y.reduce((st,ut)=>st+ut.amount,0);return E-D},[g,y]),x=s.filter(E=>E.paidBy===n||E.splitBetween.includes(n)),[w,V]=q.useState([]),[k,U]=q.useState(1),[L,z]=q.useState(!0),W=q.useRef(null),K=q.useRef(null),[tt,et]=q.useState(null),[J,j]=q.useState(!1);q.useEffect(()=>{const E=x.slice(0,Fm);V(E),U(1),z(x.length>Fm)},[x.length]);const C=q.useCallback(()=>{if(!L)return;const E=k+1,D=0,st=E*Fm,ut=x.slice(D,st);V(ut),U(E),z(st<x.length)},[k,x,L]);q.useEffect(()=>(W.current&&W.current.disconnect(),W.current=new IntersectionObserver(E=>{E[0].isIntersecting&&L&&C()},{threshold:.1}),K.current&&W.current.observe(K.current),()=>{W.current&&W.current.disconnect()}),[C,L]);const A=E=>{const D=s.filter(X=>X.paidBy===n&&X.splitBetween.includes(E)||X.paidBy===E&&X.splitBetween.includes(n)),st=r.filter(X=>X.from===n&&X.to===E||X.from===E&&X.to===n);let ut=0,B=0;return D.forEach(X=>{var ct,Tt;if(X.paidBy===n&&X.splitBetween.includes(E)){const Et=X.splitType==="custom"&&((ct=X.customSplits)!=null&&ct[E])?X.customSplits[E]:X.perPersonAmount;B+=Et}else if(X.paidBy===E&&X.splitBetween.includes(n)){const Et=X.splitType==="custom"&&((Tt=X.customSplits)!=null&&Tt[n])?X.customSplits[n]:X.perPersonAmount;ut+=Et}}),st.forEach(X=>{X.from===n&&X.to===E?ut-=X.amount:X.from===E&&X.to===n&&(B-=X.amount)}),{expenses:D,settlements:st,personOwes:ut,personReceives:B,net:ut-B}},N=E=>{et(E),j(!0)};return f.jsxs("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center p-4 z-50 overflow-y-auto",children:[f.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl w-full max-w-4xl border-4 border-[#f49221] relative",children:[f.jsx("div",{className:"bg-gradient-to-r from-[#f49221] to-[#e58515] p-8 rounded-t-3xl",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[o.memberAvatars&&o.memberAvatars[n]?f.jsx("img",{src:((M=en.find(E=>E.id===o.memberAvatars[n]))==null?void 0:M.image)||"",alt:n,className:"w-16 h-16 rounded-full object-cover border-4 border-white shadow-lg"}):f.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center text-[#f49221] font-bold text-2xl border-4 border-white shadow-lg",children:n[0]}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-bold text-white",children:n}),f.jsx("p",{className:"text-white/80 text-sm",children:"Payment Dashboard"})]})]}),f.jsx("button",{onClick:u,className:"p-3 hover:bg-white/20 rounded-2xl transition-all",children:f.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),f.jsx("div",{className:"p-8 border-b border-gray-700",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-blue-900/50 to-blue-800/50 rounded-2xl p-6 border border-blue-700/50",children:[f.jsx("div",{className:"text-blue-300 text-xs font-bold uppercase tracking-widest mb-2",children:"Total Paid"}),f.jsxs("div",{className:"text-4xl font-black text-white",children:[f.jsx(oe,{className:"mr-2"}),c==null?void 0:c.paid.toFixed(2)]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-purple-900/50 to-purple-800/50 rounded-2xl p-6 border border-purple-700/50",children:[f.jsx("div",{className:"text-purple-300 text-xs font-bold uppercase tracking-widest mb-2",children:"Fair Share"}),f.jsxs("div",{className:"text-4xl font-black text-white",children:[f.jsx(oe,{className:"mr-2"}),c==null?void 0:c.owed.toFixed(2)]})]}),f.jsxs("div",{className:`bg-gradient-to-br ${b>0?"from-red-900/50 to-red-800/50 border-red-700/50":b<0?"from-green-900/50 to-green-800/50 border-green-700/50":"from-gray-700/50 to-gray-600/50 border-gray-600/50"} rounded-2xl p-6 border`,children:[f.jsx("div",{className:`text-xs font-bold uppercase tracking-widest mb-2 ${b>0?"text-red-300":b<0?"text-green-300":"text-gray-400"}`,children:b>0?"You Owe":b<0?"You Get Back":"Status"}),f.jsx("div",{className:`text-4xl font-black ${b>0?"text-red-400":b<0?"text-green-400":"text-gray-400"}`,children:Math.abs(b)>.01?f.jsxs(f.Fragment,{children:[f.jsx(oe,{className:"mr-2"}),Math.abs(b).toFixed(2)]}):"Settled"})]})]})}),f.jsxs("div",{className:"p-8 space-y-6 max-h-[60vh] overflow-y-auto",children:[g.length>0&&f.jsxs("div",{children:[f.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),"You Should Pay"]}),f.jsx("div",{className:"space-y-3",children:g.map((E,D)=>{var st;return f.jsx("div",{className:"bg-gradient-to-r from-red-950/50 to-gray-800/50 rounded-2xl p-5 border-2 border-red-700/50 hover:border-red-500/70 transition-all cursor-pointer",onClick:()=>N(E.to),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"bg-red-500/20 p-3 rounded-xl",children:f.jsx("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),f.jsxs("div",{className:"flex items-center gap-3",children:[o.memberAvatars&&o.memberAvatars[E.to]?f.jsx("img",{src:((st=en.find(ut=>ut.id===o.memberAvatars[E.to]))==null?void 0:st.image)||"",alt:E.to,className:"w-10 h-10 rounded-full object-cover border-2 border-green-500/50"}):f.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center text-green-400 font-bold border-2 border-green-500/50",children:E.to[0]}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-white font-bold text-lg",children:["Pay ",E.to]}),f.jsx("div",{className:"text-red-300 text-xs",children:"Settlement Required"})]})]})]}),f.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white font-black px-6 py-3 rounded-xl text-2xl shadow-lg",children:[f.jsx(oe,{className:"mr-2"}),E.amount.toFixed(2)]})]})},D)})})]}),y.length>0&&f.jsxs("div",{children:[f.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"You Should Receive"]}),f.jsx("div",{className:"space-y-3",children:y.map((E,D)=>{var st;return f.jsx("div",{className:"bg-gradient-to-r from-green-950/50 to-gray-800/50 rounded-2xl p-5 border-2 border-green-700/50 hover:border-green-500/70 transition-all cursor-pointer",onClick:()=>N(E.from),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"bg-green-500/20 p-3 rounded-xl",children:f.jsx("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})})}),f.jsxs("div",{className:"flex items-center gap-3",children:[o.memberAvatars&&o.memberAvatars[E.from]?f.jsx("img",{src:((st=en.find(ut=>ut.id===o.memberAvatars[E.from]))==null?void 0:st.image)||"",alt:E.from,className:"w-10 h-10 rounded-full object-cover border-2 border-red-500/50"}):f.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center text-red-400 font-bold border-2 border-red-500/50",children:E.from[0]}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-white font-bold text-lg",children:["From ",E.from]}),f.jsx("div",{className:"text-green-300 text-xs",children:"Pending Payment"})]})]})]}),f.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white font-black px-6 py-3 rounded-xl text-2xl shadow-lg",children:[f.jsx(oe,{className:"mr-2"}),E.amount.toFixed(2)]})]})},D)})})]}),g.length===0&&y.length===0&&f.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/30 rounded-2xl p-8 text-center border-2 border-green-700/50",children:[f.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),f.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:"All Settled!"}),f.jsx("p",{className:"text-green-300 text-sm",children:"You're all balanced. No payments needed."})]}),x.length>0&&f.jsxs("div",{className:"mt-8",children:[f.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-[#f49221] rounded-full"}),"Your Expense Activity"]}),f.jsxs("div",{className:"bg-gray-800/50 rounded-2xl border border-gray-700 overflow-hidden",children:[f.jsx("div",{className:"divide-y divide-gray-700",children:w.map((E,D)=>f.jsx("div",{className:"p-4 hover:bg-gray-700/30 transition-colors",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("span",{className:"text-white font-bold",children:E.title}),E.paidBy===n&&f.jsx("span",{className:"bg-blue-500/20 text-blue-300 text-xs px-2 py-0.5 rounded font-bold",children:"You Paid"}),E.splitBetween.includes(n)&&E.paidBy!==n&&f.jsx("span",{className:"bg-purple-500/20 text-purple-300 text-xs px-2 py-0.5 rounded font-bold",children:"You Split"})]}),f.jsxs("div",{className:"text-gray-400 text-xs",children:[new Date(E.createdAt).toLocaleDateString(),"  Paid by ",E.paidBy]})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-white font-bold",children:[f.jsx(oe,{className:"mr-1"}),E.amount.toFixed(2)]}),E.splitBetween.includes(n)&&f.jsxs("div",{className:"text-[#f49221] text-xs font-bold",children:["Your share: ",f.jsx(oe,{className:"mr-1"}),(E.splitType==="custom"&&E.customSplits&&E.customSplits[n]?E.customSplits[n]:E.perPersonAmount).toFixed(2)]})]})]})},D))}),L&&f.jsx("div",{ref:K,className:"flex justify-center py-6 bg-gray-900/30",children:f.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-3 border-[#f49221] border-t-transparent"})}),!L&&w.length>0&&f.jsxs("div",{className:"text-center py-4 text-gray-400 text-xs bg-gray-900/30",children:["All ",x.length," expenses loaded"]})]})]})]}),f.jsx("div",{className:"p-6 bg-gray-900/50 rounded-b-3xl border-t border-gray-700",children:f.jsx("button",{onClick:u,className:"w-full bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white font-bold py-4 rounded-xl transition-all shadow-lg hover:shadow-xl",children:"Close"})})]}),J&&tt&&(()=>{const E=A(tt);return f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>j(!1),children:f.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl w-full max-w-2xl m-4 border-4 border-[#f49221] max-h-[80vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[f.jsx("div",{className:"bg-gradient-to-r from-[#f49221] to-[#e58515] p-6 rounded-t-3xl sticky top-0 z-10",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-2xl font-bold text-white",children:"Transaction Details"}),f.jsxs("p",{className:"text-white/80 text-sm",children:["Between ",n," and ",tt]})]}),f.jsx("button",{onClick:()=>j(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-all",children:f.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),f.jsxs("div",{className:"p-6 space-y-6",children:[(()=>{const D=E.expenses.filter(ut=>ut.paidBy===n&&ut.splitBetween.includes(tt)),st=D.reduce((ut,B)=>{var ct;const X=B.splitType==="custom"&&((ct=B.customSplits)!=null&&ct[tt])?B.customSplits[tt]:B.perPersonAmount;return ut+X},0);return D.length===0?null:f.jsxs("div",{children:[f.jsxs("h4",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"You Paid for ",tt," (",D.length,")"]}),f.jsx("div",{className:"space-y-2 mb-3",children:D.map(ut=>{var X;const B=ut.splitType==="custom"&&((X=ut.customSplits)!=null&&X[tt])?ut.customSplits[tt]:ut.perPersonAmount;return f.jsxs("div",{className:"bg-green-900/20 rounded-xl p-4 border border-green-700/50",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-white font-bold",children:ut.title}),f.jsx("div",{className:"text-gray-400 text-xs",children:new Date(ut.createdAt).toLocaleDateString()})]}),f.jsxs("div",{className:"text-right ml-4",children:[f.jsxs("div",{className:"text-white font-bold",children:[f.jsx(oe,{className:"mr-1"}),ut.amount.toFixed(2)]}),f.jsx("div",{className:"text-gray-400 text-xs",children:"Total"})]})]}),f.jsx("div",{className:"pt-2 border-t border-green-700/50",children:f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-gray-400",children:"Paid by: "}),f.jsx("span",{className:"font-bold text-blue-400",children:"You"}),f.jsx("span",{className:"text-gray-400 ml-4",children:"They owe you: "}),f.jsxs("span",{className:"font-bold text-green-400",children:[f.jsx(oe,{className:"mr-1"}),B.toFixed(2)]})]})})]},ut.id)})}),f.jsx("div",{className:"bg-green-900/30 rounded-xl p-4 border-2 border-green-700/70",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("span",{className:"text-green-300 font-bold",children:["Total ",tt," owes you:"]}),f.jsxs("span",{className:"text-2xl font-black text-green-400",children:[f.jsx(oe,{className:"mr-1"}),st.toFixed(2)]})]})})]})})(),(()=>{const D=E.expenses.filter(ut=>ut.paidBy===tt&&ut.splitBetween.includes(n)),st=D.reduce((ut,B)=>{var ct;const X=B.splitType==="custom"&&((ct=B.customSplits)!=null&&ct[n])?B.customSplits[n]:B.perPersonAmount;return ut+X},0);return D.length===0?null:f.jsxs("div",{children:[f.jsxs("h4",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),tt," Paid for You (",D.length,")"]}),f.jsx("div",{className:"space-y-2 mb-3",children:D.map(ut=>{var X;const B=ut.splitType==="custom"&&((X=ut.customSplits)!=null&&X[n])?ut.customSplits[n]:ut.perPersonAmount;return f.jsxs("div",{className:"bg-red-900/20 rounded-xl p-4 border border-red-700/50",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-white font-bold",children:ut.title}),f.jsx("div",{className:"text-gray-400 text-xs",children:new Date(ut.createdAt).toLocaleDateString()})]}),f.jsxs("div",{className:"text-right ml-4",children:[f.jsxs("div",{className:"text-white font-bold",children:[f.jsx(oe,{className:"mr-1"}),ut.amount.toFixed(2)]}),f.jsx("div",{className:"text-gray-400 text-xs",children:"Total"})]})]}),f.jsx("div",{className:"pt-2 border-t border-red-700/50",children:f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-gray-400",children:"Paid by: "}),f.jsx("span",{className:"font-bold text-purple-400",children:tt}),f.jsx("span",{className:"text-gray-400 ml-4",children:"You owe them: "}),f.jsxs("span",{className:"font-bold text-red-400",children:[f.jsx(oe,{className:"mr-1"}),B.toFixed(2)]})]})})]},ut.id)})}),f.jsx("div",{className:"bg-red-900/30 rounded-xl p-4 border-2 border-red-700/70",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("span",{className:"text-red-300 font-bold",children:["Total you owe ",tt,":"]}),f.jsxs("span",{className:"text-2xl font-black text-red-400",children:[f.jsx(oe,{className:"mr-1"}),st.toFixed(2)]})]})})]})})(),E.settlements.length>0&&f.jsxs("div",{children:[f.jsxs("h4",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Recorded Payments (",E.settlements.length,")"]}),f.jsx("div",{className:"space-y-2",children:E.settlements.map(D=>{const st=D.from===n;return f.jsx("div",{className:`rounded-xl p-4 border ${st?"bg-blue-900/20 border-blue-700/50":"bg-yellow-900/20 border-yellow-700/50"}`,children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-white font-bold",children:st?`You paid ${tt}`:`${tt} paid you`}),f.jsxs("div",{className:"text-gray-400 text-xs",children:[D.isPaid?"Completed":"Pending","  ",new Date(D.createdAt).toLocaleDateString()]})]}),f.jsxs("div",{className:`text-2xl font-bold ${st?"text-blue-400":"text-yellow-400"}`,children:[f.jsx(oe,{className:"mr-1"}),D.amount.toFixed(2)]})]})},D.id)})})]}),f.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/30 rounded-2xl p-6 border-2 border-purple-700/50",children:[f.jsx("h4",{className:"text-purple-300 font-bold text-sm uppercase tracking-widest mb-4",children:"Final Settlement"}),f.jsx("div",{className:`text-center py-4 text-4xl font-black ${E.net>0?"text-red-400":E.net<0?"text-green-400":"text-gray-400"}`,children:Math.abs(E.net)>.01?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-2",children:[f.jsx(oe,{className:"mr-2"}),Math.abs(E.net).toFixed(2)]}),f.jsx("div",{className:"text-sm text-purple-300 font-normal",children:E.net>0?`You need to pay ${tt}`:`${tt} needs to pay you`})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mb-2",children:"Settled "}),f.jsx("div",{className:"text-sm text-purple-300 font-normal",children:"No outstanding balance"})]})})]}),E.expenses.length===0&&E.settlements.length===0&&f.jsx("div",{className:"text-center py-8 text-gray-400",children:f.jsxs("p",{children:["No transactions found between you and ",tt]})})]}),f.jsx("div",{className:"p-4 bg-gray-900/50 rounded-b-3xl border-t border-gray-700 sticky bottom-0",children:f.jsx("button",{onClick:()=>j(!1),className:"w-full bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white font-bold py-3 rounded-xl transition-all",children:"Close"})})]})})})()]})},DT=q.createContext({});function VT(n){const t=q.useRef(null);return t.current===null&&(t.current=n()),t.current}const Bg=typeof window<"u",MT=Bg?q.useLayoutEffect:q.useEffect,zg=q.createContext(null);function Fg(n,t){n.indexOf(t)===-1&&n.push(t)}function qg(n,t){const s=n.indexOf(t);s>-1&&n.splice(s,1)}const Xs=(n,t,s)=>s>t?t:s<n?n:s;let du=()=>{};const wi={},IT=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function kT(n){return typeof n=="object"&&n!==null}const OT=n=>/^0[^.\s]+$/u.test(n);function Hg(n){let t;return()=>(t===void 0&&(t=n()),t)}const En=n=>n,Zj=(n,t)=>s=>t(n(s)),Nu=(...n)=>n.reduce(Zj),Eo=(n,t,s)=>{const r=t-n;return r===0?1:(s-n)/r};class Gg{constructor(){this.subscriptions=[]}add(t){return Fg(this.subscriptions,t),()=>qg(this.subscriptions,t)}notify(t,s,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,s,r);else for(let u=0;u<o;u++){const c=this.subscriptions[u];c&&c(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hs=n=>n*1e3,Zn=n=>n/1e3;function Yg(n,t){return t?n*(1e3/t):0}const PT=(n,t,s)=>(((1-3*s+3*t)*n+(3*s-6*t))*n+3*t)*n,Wj=1e-7,Jj=12;function tD(n,t,s,r,o){let u,c,m=0;do c=t+(s-t)/2,u=PT(c,r,o)-n,u>0?s=c:t=c;while(Math.abs(u)>Wj&&++m<Jj);return c}function Cu(n,t,s,r){if(n===t&&s===r)return En;const o=u=>tD(u,0,1,n,s);return u=>u===0||u===1?u:PT(o(u),t,r)}const LT=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,UT=n=>t=>1-n(1-t),BT=Cu(.33,1.53,.69,.99),Kg=UT(BT),zT=LT(Kg),FT=n=>(n*=2)<1?.5*Kg(n):.5*(2-Math.pow(2,-10*(n-1))),Qg=n=>1-Math.sin(Math.acos(n)),qT=UT(Qg),HT=LT(Qg),eD=Cu(.42,0,1,1),nD=Cu(0,0,.58,1),GT=Cu(.42,0,.58,1),sD=n=>Array.isArray(n)&&typeof n[0]!="number",YT=n=>Array.isArray(n)&&typeof n[0]=="number",iD={linear:En,easeIn:eD,easeInOut:GT,easeOut:nD,circIn:Qg,circInOut:HT,circOut:qT,backIn:Kg,backInOut:zT,backOut:BT,anticipate:FT},rD=n=>typeof n=="string",d1=n=>{if(YT(n)){du(n.length===4);const[t,s,r,o]=n;return Cu(t,s,r,o)}else if(rD(n))return iD[n];return n},dh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aD(n,t){let s=new Set,r=new Set,o=!1,u=!1;const c=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1};function g(b){c.has(b)&&(y.schedule(b),n()),b(m)}const y={schedule:(b,x=!1,w=!1)=>{const k=w&&o?s:r;return x&&c.add(b),k.has(b)||k.add(b),b},cancel:b=>{r.delete(b),c.delete(b)},process:b=>{if(m=b,o){u=!0;return}o=!0,[s,r]=[r,s],s.forEach(g),s.clear(),o=!1,u&&(u=!1,y.process(b))}};return y}const oD=40;function KT(n,t){let s=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=()=>s=!0,c=dh.reduce((K,tt)=>(K[tt]=aD(u),K),{}),{setup:m,read:g,resolveKeyframes:y,preUpdate:b,update:x,preRender:w,render:V,postRender:k}=c,U=()=>{const K=wi.useManualTiming?o.timestamp:performance.now();s=!1,wi.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(K-o.timestamp,oD),1)),o.timestamp=K,o.isProcessing=!0,m.process(o),g.process(o),y.process(o),b.process(o),x.process(o),w.process(o),V.process(o),k.process(o),o.isProcessing=!1,s&&t&&(r=!1,n(U))},L=()=>{s=!0,r=!0,o.isProcessing||n(U)};return{schedule:dh.reduce((K,tt)=>{const et=c[tt];return K[tt]=(J,j=!1,C=!1)=>(s||L(),et.schedule(J,j,C)),K},{}),cancel:K=>{for(let tt=0;tt<dh.length;tt++)c[dh[tt]].cancel(K)},state:o,steps:c}}const{schedule:ne,cancel:$s,state:Ge,steps:qm}=KT(typeof requestAnimationFrame<"u"?requestAnimationFrame:En,!0);let Th;function lD(){Th=void 0}const Tn={now:()=>(Th===void 0&&Tn.set(Ge.isProcessing||wi.useManualTiming?Ge.timestamp:performance.now()),Th),set:n=>{Th=n,queueMicrotask(lD)}},QT=n=>t=>typeof t=="string"&&t.startsWith(n),XT=QT("--"),uD=QT("var(--"),Xg=n=>uD(n)?cD.test(n.split("/*")[0].trim()):!1,cD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},fu={...jo,transform:n=>Xs(0,1,n)},fh={...jo,default:1},Wl=n=>Math.round(n*1e5)/1e5,$g=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hD(n){return n==null}const dD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zg=(n,t)=>s=>!!(typeof s=="string"&&dD.test(s)&&s.startsWith(n)||t&&!hD(s)&&Object.prototype.hasOwnProperty.call(s,t)),$T=(n,t,s)=>r=>{if(typeof r!="string")return r;const[o,u,c,m]=r.match($g);return{[n]:parseFloat(o),[t]:parseFloat(u),[s]:parseFloat(c),alpha:m!==void 0?parseFloat(m):1}},fD=n=>Xs(0,255,n),Hm={...jo,transform:n=>Math.round(fD(n))},na={test:Zg("rgb","red"),parse:$T("red","green","blue"),transform:({red:n,green:t,blue:s,alpha:r=1})=>"rgba("+Hm.transform(n)+", "+Hm.transform(t)+", "+Hm.transform(s)+", "+Wl(fu.transform(r))+")"};function mD(n){let t="",s="",r="",o="";return n.length>5?(t=n.substring(1,3),s=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(t=n.substring(1,2),s=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),t+=t,s+=s,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Rp={test:Zg("#"),parse:mD,transform:na.transform},Ru=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),sr=Ru("deg"),Gs=Ru("%"),gt=Ru("px"),pD=Ru("vh"),gD=Ru("vw"),f1={...Gs,parse:n=>Gs.parse(n)/100,transform:n=>Gs.transform(n*100)},lo={test:Zg("hsl","hue"),parse:$T("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(n)+", "+Gs.transform(Wl(t))+", "+Gs.transform(Wl(s))+", "+Wl(fu.transform(r))+")"},Ie={test:n=>na.test(n)||Rp.test(n)||lo.test(n),parse:n=>na.test(n)?na.parse(n):lo.test(n)?lo.parse(n):Rp.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?na.transform(n):lo.transform(n),getAnimatableNone:n=>{const t=Ie.parse(n);return t.alpha=0,Ie.transform(t)}},yD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vD(n){var t,s;return isNaN(n)&&typeof n=="string"&&(((t=n.match($g))==null?void 0:t.length)||0)+(((s=n.match(yD))==null?void 0:s.length)||0)>0}const ZT="number",WT="color",bD="var",xD="var(",m1="${}",_D=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mu(n){const t=n.toString(),s=[],r={color:[],number:[],var:[]},o=[];let u=0;const m=t.replace(_D,g=>(Ie.test(g)?(r.color.push(u),o.push(WT),s.push(Ie.parse(g))):g.startsWith(xD)?(r.var.push(u),o.push(bD),s.push(g)):(r.number.push(u),o.push(ZT),s.push(parseFloat(g))),++u,m1)).split(m1);return{values:s,split:m,indexes:r,types:o}}function JT(n){return mu(n).values}function tw(n){const{split:t,types:s}=mu(n),r=t.length;return o=>{let u="";for(let c=0;c<r;c++)if(u+=t[c],o[c]!==void 0){const m=s[c];m===ZT?u+=Wl(o[c]):m===WT?u+=Ie.transform(o[c]):u+=o[c]}return u}}const TD=n=>typeof n=="number"?0:Ie.test(n)?Ie.getAnimatableNone(n):n;function wD(n){const t=JT(n);return tw(n)(t.map(TD))}const yr={test:vD,parse:JT,createTransformer:tw,getAnimatableNone:wD};function Gm(n,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?n+(t-n)*6*s:s<1/2?t:s<2/3?n+(t-n)*(2/3-s)*6:n}function ED({hue:n,saturation:t,lightness:s,alpha:r}){n/=360,t/=100,s/=100;let o=0,u=0,c=0;if(!t)o=u=c=s;else{const m=s<.5?s*(1+t):s+t-s*t,g=2*s-m;o=Gm(g,m,n+1/3),u=Gm(g,m,n),c=Gm(g,m,n-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(c*255),alpha:r}}function Qh(n,t){return s=>s>0?t:n}const de=(n,t,s)=>n+(t-n)*s,Ym=(n,t,s)=>{const r=n*n,o=s*(t*t-r)+r;return o<0?0:Math.sqrt(o)},SD=[Rp,na,lo],AD=n=>SD.find(t=>t.test(n));function p1(n){const t=AD(n);if(!t)return!1;let s=t.parse(n);return t===lo&&(s=ED(s)),s}const g1=(n,t)=>{const s=p1(n),r=p1(t);if(!s||!r)return Qh(n,t);const o={...s};return u=>(o.red=Ym(s.red,r.red,u),o.green=Ym(s.green,r.green,u),o.blue=Ym(s.blue,r.blue,u),o.alpha=de(s.alpha,r.alpha,u),na.transform(o))},jp=new Set(["none","hidden"]);function ND(n,t){return jp.has(n)?s=>s<=0?n:t:s=>s>=1?t:n}function CD(n,t){return s=>de(n,t,s)}function Wg(n){return typeof n=="number"?CD:typeof n=="string"?Xg(n)?Qh:Ie.test(n)?g1:DD:Array.isArray(n)?ew:typeof n=="object"?Ie.test(n)?g1:RD:Qh}function ew(n,t){const s=[...n],r=s.length,o=n.map((u,c)=>Wg(u)(u,t[c]));return u=>{for(let c=0;c<r;c++)s[c]=o[c](u);return s}}function RD(n,t){const s={...n,...t},r={};for(const o in s)n[o]!==void 0&&t[o]!==void 0&&(r[o]=Wg(n[o])(n[o],t[o]));return o=>{for(const u in r)s[u]=r[u](o);return s}}function jD(n,t){const s=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const u=t.types[o],c=n.indexes[u][r[u]],m=n.values[c]??0;s[o]=m,r[u]++}return s}const DD=(n,t)=>{const s=yr.createTransformer(t),r=mu(n),o=mu(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?jp.has(n)&&!o.values.length||jp.has(t)&&!r.values.length?ND(n,t):Nu(ew(jD(r,o),o.values),s):Qh(n,t)};function nw(n,t,s){return typeof n=="number"&&typeof t=="number"&&typeof s=="number"?de(n,t,s):Wg(n)(n,t)}const VD=n=>{const t=({timestamp:s})=>n(s);return{start:(s=!0)=>ne.update(t,s),stop:()=>$s(t),now:()=>Ge.isProcessing?Ge.timestamp:Tn.now()}},sw=(n,t,s=10)=>{let r="";const o=Math.max(Math.round(t/s),2);for(let u=0;u<o;u++)r+=Math.round(n(u/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Xh=2e4;function Jg(n){let t=0;const s=50;let r=n.next(t);for(;!r.done&&t<Xh;)t+=s,r=n.next(t);return t>=Xh?1/0:t}function MD(n,t=100,s){const r=s({...n,keyframes:[0,t]}),o=Math.min(Jg(r),Xh);return{type:"keyframes",ease:u=>r.next(o*u).value/t,duration:Zn(o)}}const ID=5;function iw(n,t,s){const r=Math.max(t-ID,0);return Yg(s-n(r),t-r)}const ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Km=.001;function kD({duration:n=ye.duration,bounce:t=ye.bounce,velocity:s=ye.velocity,mass:r=ye.mass}){let o,u,c=1-t;c=Xs(ye.minDamping,ye.maxDamping,c),n=Xs(ye.minDuration,ye.maxDuration,Zn(n)),c<1?(o=y=>{const b=y*c,x=b*n,w=b-s,V=Dp(y,c),k=Math.exp(-x);return Km-w/V*k},u=y=>{const x=y*c*n,w=x*s+s,V=Math.pow(c,2)*Math.pow(y,2)*n,k=Math.exp(-x),U=Dp(Math.pow(y,2),c);return(-o(y)+Km>0?-1:1)*((w-V)*k)/U}):(o=y=>{const b=Math.exp(-y*n),x=(y-s)*n+1;return-Km+b*x},u=y=>{const b=Math.exp(-y*n),x=(s-y)*(n*n);return b*x});const m=5/n,g=PD(o,u,m);if(n=Hs(n),isNaN(g))return{stiffness:ye.stiffness,damping:ye.damping,duration:n};{const y=Math.pow(g,2)*r;return{stiffness:y,damping:c*2*Math.sqrt(r*y),duration:n}}}const OD=12;function PD(n,t,s){let r=s;for(let o=1;o<OD;o++)r=r-n(r)/t(r);return r}function Dp(n,t){return n*Math.sqrt(1-t*t)}const LD=["duration","bounce"],UD=["stiffness","damping","mass"];function y1(n,t){return t.some(s=>n[s]!==void 0)}function BD(n){let t={velocity:ye.velocity,stiffness:ye.stiffness,damping:ye.damping,mass:ye.mass,isResolvedFromDuration:!1,...n};if(!y1(n,UD)&&y1(n,LD))if(n.visualDuration){const s=n.visualDuration,r=2*Math.PI/(s*1.2),o=r*r,u=2*Xs(.05,1,1-(n.bounce||0))*Math.sqrt(o);t={...t,mass:ye.mass,stiffness:o,damping:u}}else{const s=kD(n);t={...t,...s,mass:ye.mass},t.isResolvedFromDuration=!0}return t}function $h(n=ye.visualDuration,t=ye.bounce){const s=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:o}=s;const u=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],m={done:!1,value:u},{stiffness:g,damping:y,mass:b,duration:x,velocity:w,isResolvedFromDuration:V}=BD({...s,velocity:-Zn(s.velocity||0)}),k=w||0,U=y/(2*Math.sqrt(g*b)),L=c-u,z=Zn(Math.sqrt(g/b)),W=Math.abs(L)<5;r||(r=W?ye.restSpeed.granular:ye.restSpeed.default),o||(o=W?ye.restDelta.granular:ye.restDelta.default);let K;if(U<1){const et=Dp(z,U);K=J=>{const j=Math.exp(-U*z*J);return c-j*((k+U*z*L)/et*Math.sin(et*J)+L*Math.cos(et*J))}}else if(U===1)K=et=>c-Math.exp(-z*et)*(L+(k+z*L)*et);else{const et=z*Math.sqrt(U*U-1);K=J=>{const j=Math.exp(-U*z*J),C=Math.min(et*J,300);return c-j*((k+U*z*L)*Math.sinh(C)+et*L*Math.cosh(C))/et}}const tt={calculatedDuration:V&&x||null,next:et=>{const J=K(et);if(V)m.done=et>=x;else{let j=et===0?k:0;U<1&&(j=et===0?Hs(k):iw(K,et,J));const C=Math.abs(j)<=r,A=Math.abs(c-J)<=o;m.done=C&&A}return m.value=m.done?c:J,m},toString:()=>{const et=Math.min(Jg(tt),Xh),J=sw(j=>tt.next(et*j).value,et,30);return et+"ms "+J},toTransition:()=>{}};return tt}$h.applyToOptions=n=>{const t=MD(n,100,$h);return n.ease=t.ease,n.duration=Hs(t.duration),n.type="keyframes",n};function Vp({keyframes:n,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:c,min:m,max:g,restDelta:y=.5,restSpeed:b}){const x=n[0],w={done:!1,value:x},V=C=>m!==void 0&&C<m||g!==void 0&&C>g,k=C=>m===void 0?g:g===void 0||Math.abs(m-C)<Math.abs(g-C)?m:g;let U=s*t;const L=x+U,z=c===void 0?L:c(L);z!==L&&(U=z-x);const W=C=>-U*Math.exp(-C/r),K=C=>z+W(C),tt=C=>{const A=W(C),N=K(C);w.done=Math.abs(A)<=y,w.value=w.done?z:N};let et,J;const j=C=>{V(w.value)&&(et=C,J=$h({keyframes:[w.value,k(w.value)],velocity:iw(K,C,w.value),damping:o,stiffness:u,restDelta:y,restSpeed:b}))};return j(0),{calculatedDuration:null,next:C=>{let A=!1;return!J&&et===void 0&&(A=!0,tt(C),j(C)),et!==void 0&&C>=et?J.next(C-et):(!A&&tt(C),w)}}}function zD(n,t,s){const r=[],o=s||wi.mix||nw,u=n.length-1;for(let c=0;c<u;c++){let m=o(n[c],n[c+1]);if(t){const g=Array.isArray(t)?t[c]||En:t;m=Nu(g,m)}r.push(m)}return r}function rw(n,t,{clamp:s=!0,ease:r,mixer:o}={}){const u=n.length;if(du(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const c=n[0]===n[1];n[0]>n[u-1]&&(n=[...n].reverse(),t=[...t].reverse());const m=zD(t,r,o),g=m.length,y=b=>{if(c&&b<n[0])return t[0];let x=0;if(g>1)for(;x<n.length-2&&!(b<n[x+1]);x++);const w=Eo(n[x],n[x+1],b);return m[x](w)};return s?b=>y(Xs(n[0],n[u-1],b)):y}function FD(n,t){const s=n[n.length-1];for(let r=1;r<=t;r++){const o=Eo(0,t,r);n.push(de(s,1,o))}}function aw(n){const t=[0];return FD(t,n.length-1),t}function qD(n,t){return n.map(s=>s*t)}function HD(n,t){return n.map(()=>t||GT).splice(0,n.length-1)}function Jl({duration:n=300,keyframes:t,times:s,ease:r="easeInOut"}){const o=sD(r)?r.map(d1):d1(r),u={done:!1,value:t[0]},c=qD(s&&s.length===t.length?s:aw(t),n),m=rw(c,t,{ease:Array.isArray(o)?o:HD(t,o)});return{calculatedDuration:n,next:g=>(u.value=m(g),u.done=g>=n,u)}}const GD=n=>n!==null;function ty(n,{repeat:t,repeatType:s="loop"},r,o=1){const u=n.filter(GD),m=o<0||t&&s!=="loop"&&t%2===1?0:u.length-1;return!m||r===void 0?u[m]:r}const YD={decay:Vp,inertia:Vp,tween:Jl,keyframes:Jl,spring:$h};function ow(n){typeof n.type=="string"&&(n.type=YD[n.type])}class ey{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const KD=n=>n/100;class ny extends ey{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,o;const{motionValue:s}=this.options;s&&s.updatedAt!==Tn.now()&&this.tick(Tn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ow(t);const{type:s=Jl,repeat:r=0,repeatDelay:o=0,repeatType:u,velocity:c=0}=t;let{keyframes:m}=t;const g=s||Jl;g!==Jl&&typeof m[0]!="number"&&(this.mixKeyframes=Nu(KD,nw(m[0],m[1])),m=[0,100]);const y=g({...t,keyframes:m});u==="mirror"&&(this.mirroredGenerator=g({...t,keyframes:[...m].reverse(),velocity:-c})),y.calculatedDuration===null&&(y.calculatedDuration=Jg(y));const{calculatedDuration:b}=y;this.calculatedDuration=b,this.resolvedDuration=b+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=y}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:o,mixKeyframes:u,mirroredGenerator:c,resolvedDuration:m,calculatedDuration:g}=this;if(this.startTime===null)return r.next(0);const{delay:y=0,keyframes:b,repeat:x,repeatType:w,repeatDelay:V,type:k,onUpdate:U,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const z=this.currentTime-y*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?z<0:z>o;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let K=this.currentTime,tt=r;if(x){const C=Math.min(this.currentTime,o)/m;let A=Math.floor(C),N=C%1;!N&&C>=1&&(N=1),N===1&&A--,A=Math.min(A,x+1),!!(A%2)&&(w==="reverse"?(N=1-N,V&&(N-=V/m)):w==="mirror"&&(tt=c)),K=Xs(0,1,N)*m}const et=W?{done:!1,value:b[0]}:tt.next(K);u&&(et.value=u(et.value));let{done:J}=et;!W&&g!==null&&(J=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return j&&k!==Vp&&(et.value=ty(b,this.options,L,this.speed)),U&&U(et.value),j&&this.finish(),et}then(t,s){return this.finished.then(t,s)}get duration(){return Zn(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Zn(t)}get time(){return Zn(this.currentTime)}set time(t){var s;t=Hs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Tn.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=Zn(this.currentTime))}play(){var o,u;if(this.isStopped)return;const{driver:t=VD,startTime:s}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(u=(o=this.options).onPlay)==null||u.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function QD(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const sa=n=>n*180/Math.PI,Mp=n=>{const t=sa(Math.atan2(n[1],n[0]));return Ip(t)},XD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Mp,rotateZ:Mp,skewX:n=>sa(Math.atan(n[1])),skewY:n=>sa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Ip=n=>(n=n%360,n<0&&(n+=360),n),v1=Mp,b1=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),x1=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),$D={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:b1,scaleY:x1,scale:n=>(b1(n)+x1(n))/2,rotateX:n=>Ip(sa(Math.atan2(n[6],n[5]))),rotateY:n=>Ip(sa(Math.atan2(-n[2],n[0]))),rotateZ:v1,rotate:v1,skewX:n=>sa(Math.atan(n[4])),skewY:n=>sa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function kp(n){return n.includes("scale")?1:0}function Op(n,t){if(!n||n==="none")return kp(t);const s=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(s)r=$D,o=s;else{const m=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=XD,o=m}if(!o)return kp(t);const u=r[t],c=o[1].split(",").map(WD);return typeof u=="function"?u(c):c[u]}const ZD=(n,t)=>{const{transform:s="none"}=getComputedStyle(n);return Op(s,t)};function WD(n){return parseFloat(n.trim())}const Do=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vo=new Set(Do),_1=n=>n===jo||n===gt,JD=new Set(["x","y","z"]),tV=Do.filter(n=>!JD.has(n));function eV(n){const t=[];return tV.forEach(s=>{const r=n.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}const aa={width:({x:n},{paddingLeft:t="0",paddingRight:s="0"})=>n.max-n.min-parseFloat(t)-parseFloat(s),height:({y:n},{paddingTop:t="0",paddingBottom:s="0"})=>n.max-n.min-parseFloat(t)-parseFloat(s),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Op(t,"x"),y:(n,{transform:t})=>Op(t,"y")};aa.translateX=aa.x;aa.translateY=aa.y;const oa=new Set;let Pp=!1,Lp=!1,Up=!1;function lw(){if(Lp){const n=Array.from(oa).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),s=new Map;t.forEach(r=>{const o=eV(r);o.length&&(s.set(r,o),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=s.get(r);o&&o.forEach(([u,c])=>{var m;(m=r.getValue(u))==null||m.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Lp=!1,Pp=!1,oa.forEach(n=>n.complete(Up)),oa.clear()}function uw(){oa.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Lp=!0)})}function nV(){Up=!0,uw(),lw(),Up=!1}class sy{constructor(t,s,r,o,u,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=r,this.motionValue=o,this.element=u,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(oa.add(this),Pp||(Pp=!0,ne.read(uw),ne.resolveKeyframes(lw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:r,motionValue:o}=this;if(t[0]===null){const u=o==null?void 0:o.get(),c=t[t.length-1];if(u!==void 0)t[0]=u;else if(r&&s){const m=r.readValue(s,c);m!=null&&(t[0]=m)}t[0]===void 0&&(t[0]=c),o&&u===void 0&&o.set(t[0])}QD(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),oa.delete(this)}cancel(){this.state==="scheduled"&&(oa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sV=n=>n.startsWith("--");function iV(n,t,s){sV(t)?n.style.setProperty(t,s):n.style[t]=s}const cw=Hg(()=>window.ScrollTimeline!==void 0),rV={};function aV(n,t){const s=Hg(n);return()=>rV[t]??s()}const hw=aV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yl=([n,t,s,r])=>`cubic-bezier(${n}, ${t}, ${s}, ${r})`,T1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yl([0,.65,.55,1]),circOut:Yl([.55,0,1,.45]),backIn:Yl([.31,.01,.66,-.59]),backOut:Yl([.33,1.53,.69,.99])};function dw(n,t){if(n)return typeof n=="function"?hw()?sw(n,t):"ease-out":YT(n)?Yl(n):Array.isArray(n)?n.map(s=>dw(s,t)||T1.easeOut):T1[n]}function oV(n,t,s,{delay:r=0,duration:o=300,repeat:u=0,repeatType:c="loop",ease:m="easeOut",times:g}={},y=void 0){const b={[t]:s};g&&(b.offset=g);const x=dw(m,o);Array.isArray(x)&&(b.easing=x);const w={delay:r,duration:o,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:u+1,direction:c==="reverse"?"alternate":"normal"};return y&&(w.pseudoElement=y),n.animate(b,w)}function fw(n){return typeof n=="function"&&"applyToOptions"in n}function lV({type:n,...t}){return fw(n)&&hw()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class uV extends ey{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:r,keyframes:o,pseudoElement:u,allowFlatten:c=!1,finalKeyframe:m,onComplete:g}=t;this.isPseudoElement=!!u,this.allowFlatten=c,this.options=t,du(typeof t.type!="string");const y=lV(t);this.animation=oV(s,r,o,y,u),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const b=ty(o,this.options,m,this.speed);this.updateMotionValue?this.updateMotionValue(b):iV(s,r,b),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,r;const t=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return Zn(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Zn(t)}get time(){return Zn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Hs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&cw()?(this.animation.timeline=t,En):s(this)}}const mw={anticipate:FT,backInOut:zT,circInOut:HT};function cV(n){return n in mw}function hV(n){typeof n.ease=="string"&&cV(n.ease)&&(n.ease=mw[n.ease])}const w1=10;class dV extends uV{constructor(t){hV(t),ow(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:r,onComplete:o,element:u,...c}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const m=new ny({...c,autoplay:!1}),g=Hs(this.finishedTime??this.time);s.setWithVelocity(m.sample(g-w1).value,m.sample(g).value,w1),m.stop()}}const E1=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(yr.test(n)||n==="0")&&!n.startsWith("url("));function fV(n){const t=n[0];if(n.length===1)return!0;for(let s=0;s<n.length;s++)if(n[s]!==t)return!0}function mV(n,t,s,r){const o=n[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const u=n[n.length-1],c=E1(o,t),m=E1(u,t);return!c||!m?!1:fV(n)||(s==="spring"||fw(s))&&r}function Bp(n){n.duration=0,n.type="keyframes"}const pV=new Set(["opacity","clipPath","filter","transform"]),gV=Hg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yV(n){var b;const{motionValue:t,name:s,repeatDelay:r,repeatType:o,damping:u,type:c}=n;if(!(((b=t==null?void 0:t.owner)==null?void 0:b.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:y}=t.owner.getProps();return gV()&&s&&pV.has(s)&&(s!=="transform"||!y)&&!g&&!r&&o!=="mirror"&&u!==0&&c!=="inertia"}const vV=40;class bV extends ey{constructor({autoplay:t=!0,delay:s=0,type:r="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:c="loop",keyframes:m,name:g,motionValue:y,element:b,...x}){var k;super(),this.stop=()=>{var U,L;this._animation&&(this._animation.stop(),(U=this.stopTimeline)==null||U.call(this)),(L=this.keyframeResolver)==null||L.cancel()},this.createdAt=Tn.now();const w={autoplay:t,delay:s,type:r,repeat:o,repeatDelay:u,repeatType:c,name:g,motionValue:y,element:b,...x},V=(b==null?void 0:b.KeyframeResolver)||sy;this.keyframeResolver=new V(m,(U,L,z)=>this.onKeyframesResolved(U,L,w,!z),g,y,b),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(t,s,r,o){this.keyframeResolver=void 0;const{name:u,type:c,velocity:m,delay:g,isHandoff:y,onUpdate:b}=r;this.resolvedAt=Tn.now(),mV(t,u,c,m)||((wi.instantAnimations||!g)&&(b==null||b(ty(t,r,s))),t[0]=t[t.length-1],Bp(r),r.repeat=0);const w={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>vV?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:t},V=!y&&yV(w)?new dV({...w,element:w.motionValue.owner.current}):new ny(w);V.finished.then(()=>this.notifyFinished()).catch(En),this.pendingTimeline&&(this.stopTimeline=V.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=V}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),nV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const xV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _V(n){const t=xV.exec(n);if(!t)return[,];const[,s,r,o]=t;return[`--${s??r}`,o]}function pw(n,t,s=1){const[r,o]=_V(n);if(!r)return;const u=window.getComputedStyle(t).getPropertyValue(r);if(u){const c=u.trim();return IT(c)?parseFloat(c):c}return Xg(o)?pw(o,t,s+1):o}function iy(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const gw=new Set(["width","height","top","left","right","bottom",...Do]),TV={test:n=>n==="auto",parse:n=>n},yw=n=>t=>t.test(n),vw=[jo,gt,Gs,sr,gD,pD,TV],S1=n=>vw.find(yw(n));function wV(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||OT(n):!0}const EV=new Set(["brightness","contrast","saturate","opacity"]);function SV(n){const[t,s]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=s.match($g)||[];if(!r)return n;const o=s.replace(r,"");let u=EV.has(t)?1:0;return r!==s&&(u*=100),t+"("+u+o+")"}const AV=/\b([a-z-]*)\(.*?\)/gu,zp={...yr,getAnimatableNone:n=>{const t=n.match(AV);return t?t.map(SV).join(" "):n}},A1={...jo,transform:Math.round},NV={rotate:sr,rotateX:sr,rotateY:sr,rotateZ:sr,scale:fh,scaleX:fh,scaleY:fh,scaleZ:fh,skew:sr,skewX:sr,skewY:sr,distance:gt,translateX:gt,translateY:gt,translateZ:gt,x:gt,y:gt,z:gt,perspective:gt,transformPerspective:gt,opacity:fu,originX:f1,originY:f1,originZ:gt},ry={borderWidth:gt,borderTopWidth:gt,borderRightWidth:gt,borderBottomWidth:gt,borderLeftWidth:gt,borderRadius:gt,radius:gt,borderTopLeftRadius:gt,borderTopRightRadius:gt,borderBottomRightRadius:gt,borderBottomLeftRadius:gt,width:gt,maxWidth:gt,height:gt,maxHeight:gt,top:gt,right:gt,bottom:gt,left:gt,inset:gt,insetBlock:gt,insetBlockStart:gt,insetBlockEnd:gt,insetInline:gt,insetInlineStart:gt,insetInlineEnd:gt,padding:gt,paddingTop:gt,paddingRight:gt,paddingBottom:gt,paddingLeft:gt,paddingBlock:gt,paddingBlockStart:gt,paddingBlockEnd:gt,paddingInline:gt,paddingInlineStart:gt,paddingInlineEnd:gt,margin:gt,marginTop:gt,marginRight:gt,marginBottom:gt,marginLeft:gt,marginBlock:gt,marginBlockStart:gt,marginBlockEnd:gt,marginInline:gt,marginInlineStart:gt,marginInlineEnd:gt,backgroundPositionX:gt,backgroundPositionY:gt,...NV,zIndex:A1,fillOpacity:fu,strokeOpacity:fu,numOctaves:A1},CV={...ry,color:Ie,backgroundColor:Ie,outlineColor:Ie,fill:Ie,stroke:Ie,borderColor:Ie,borderTopColor:Ie,borderRightColor:Ie,borderBottomColor:Ie,borderLeftColor:Ie,filter:zp,WebkitFilter:zp},bw=n=>CV[n];function xw(n,t){let s=bw(n);return s!==zp&&(s=yr),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const RV=new Set(["auto","none","0"]);function jV(n,t,s){let r=0,o;for(;r<n.length&&!o;){const u=n[r];typeof u=="string"&&!RV.has(u)&&mu(u).values.length&&(o=n[r]),r++}if(o&&s)for(const u of t)n[u]=xw(s,o)}class DV extends sy{constructor(t,s,r,o,u){super(t,s,r,o,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let y=t[g];if(typeof y=="string"&&(y=y.trim(),Xg(y))){const b=pw(y,s.current);b!==void 0&&(t[g]=b),g===t.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!gw.has(r)||t.length!==2)return;const[o,u]=t,c=S1(o),m=S1(u);if(c!==m)if(_1(c)&&_1(m))for(let g=0;g<t.length;g++){const y=t[g];typeof y=="string"&&(t[g]=parseFloat(y))}else aa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,r=[];for(let o=0;o<t.length;o++)(t[o]===null||wV(t[o]))&&r.push(o);r.length&&jV(t,r,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=aa[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const o=s[s.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var m;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(s);o&&o.jump(this.measuredOrigin,!1);const u=r.length-1,c=r[u];r[u]=aa[s](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(m=this.removedTransforms)!=null&&m.length&&this.removedTransforms.forEach(([g,y])=>{t.getValue(g).set(y)}),this.resolveNoneKeyframes()}}function _w(n,t,s){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const o=document.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}const Tw=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function ww(n){return kT(n)&&"offsetHeight"in n}const N1=30,VV=n=>!isNaN(parseFloat(n));class MV{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var u;const o=Tn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Tn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=VV(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Gg);const r=this.events[t].add(s);return t==="change"?()=>{r(),ne.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Tn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>N1)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,N1);return Yg(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Us(n,t){return new MV(n,t)}const{schedule:ay}=KT(queueMicrotask,!1),ds={x:!1,y:!1};function Ew(){return ds.x||ds.y}function IV(n){return n==="x"||n==="y"?ds[n]?null:(ds[n]=!0,()=>{ds[n]=!1}):ds.x||ds.y?null:(ds.x=ds.y=!0,()=>{ds.x=ds.y=!1})}function Sw(n,t){const s=_w(n),r=new AbortController,o={passive:!0,...t,signal:r.signal};return[s,o,()=>r.abort()]}function C1(n){return!(n.pointerType==="touch"||Ew())}function kV(n,t,s={}){const[r,o,u]=Sw(n,s),c=m=>{if(!C1(m))return;const{target:g}=m,y=t(g,m);if(typeof y!="function"||!g)return;const b=x=>{C1(x)&&(y(x),g.removeEventListener("pointerleave",b))};g.addEventListener("pointerleave",b,o)};return r.forEach(m=>{m.addEventListener("pointerenter",c,o)}),u}const Aw=(n,t)=>t?n===t?!0:Aw(n,t.parentElement):!1,oy=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,OV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function PV(n){return OV.has(n.tagName)||n.tabIndex!==-1}const wh=new WeakSet;function R1(n){return t=>{t.key==="Enter"&&n(t)}}function Qm(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const LV=(n,t)=>{const s=n.currentTarget;if(!s)return;const r=R1(()=>{if(wh.has(s))return;Qm(s,"down");const o=R1(()=>{Qm(s,"up")}),u=()=>Qm(s,"cancel");s.addEventListener("keyup",o,t),s.addEventListener("blur",u,t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)};function j1(n){return oy(n)&&!Ew()}function UV(n,t,s={}){const[r,o,u]=Sw(n,s),c=m=>{const g=m.currentTarget;if(!j1(m))return;wh.add(g);const y=t(g,m),b=(V,k)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",w),wh.has(g)&&wh.delete(g),j1(V)&&typeof y=="function"&&y(V,{success:k})},x=V=>{b(V,g===window||g===document||s.useGlobalTarget||Aw(g,V.target))},w=V=>{b(V,!1)};window.addEventListener("pointerup",x,o),window.addEventListener("pointercancel",w,o)};return r.forEach(m=>{(s.useGlobalTarget?window:m).addEventListener("pointerdown",c,o),ww(m)&&(m.addEventListener("focus",y=>LV(y,o)),!PV(m)&&!m.hasAttribute("tabindex")&&(m.tabIndex=0))}),u}function ly(n){return kT(n)&&"ownerSVGElement"in n}const Eh=new WeakMap;let ir;const Nw=(n,t,s)=>(r,o)=>o&&o[0]?o[0][n+"Size"]:ly(r)&&"getBBox"in r?r.getBBox()[t]:r[s],BV=Nw("inline","width","offsetWidth"),zV=Nw("block","height","offsetHeight");function FV({target:n,borderBoxSize:t}){var s;(s=Eh.get(n))==null||s.forEach(r=>{r(n,{get width(){return BV(n,t)},get height(){return zV(n,t)}})})}function qV(n){n.forEach(FV)}function HV(){typeof ResizeObserver>"u"||(ir=new ResizeObserver(qV))}function GV(n,t){ir||HV();const s=_w(n);return s.forEach(r=>{let o=Eh.get(r);o||(o=new Set,Eh.set(r,o)),o.add(t),ir==null||ir.observe(r)}),()=>{s.forEach(r=>{const o=Eh.get(r);o==null||o.delete(t),o!=null&&o.size||ir==null||ir.unobserve(r)})}}const Sh=new Set;let uo;function YV(){uo=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};Sh.forEach(t=>t(n))},window.addEventListener("resize",uo)}function KV(n){return Sh.add(n),uo||YV(),()=>{Sh.delete(n),!Sh.size&&typeof uo=="function"&&(window.removeEventListener("resize",uo),uo=void 0)}}function QV(n,t){return typeof n=="function"?KV(n):GV(n,t)}function Cw(n,t){let s;const r=()=>{const{currentTime:o}=t,c=(o===null?0:o.value)/100;s!==c&&n(c),s=c};return ne.preUpdate(r,!0),()=>$s(r)}function XV(n){return ly(n)&&n.tagName==="svg"}const ln=n=>!!(n&&n.getVelocity),$V=[...vw,Ie,yr],ZV=n=>$V.find(yw(n)),Rw=q.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function WV(n=!0){const t=q.useContext(zg);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:o}=t,u=q.useId();q.useEffect(()=>{if(n)return o(u)},[n]);const c=q.useCallback(()=>n&&r&&r(u),[u,r,n]);return!s&&r?[!1,c]:[!0]}const jw=q.createContext({strict:!1}),D1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},So={};for(const n in D1)So[n]={isEnabled:t=>D1[n].some(s=>!!t[s])};function JV(n){for(const t in n)So[t]={...So[t],...n[t]}}const t6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||t6.has(n)}let Dw=n=>!Zh(n);function e6(n){typeof n=="function"&&(Dw=t=>t.startsWith("on")?!Zh(t):n(t))}try{e6(require("@emotion/is-prop-valid").default)}catch{}function n6(n,t,s){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||(Dw(o)||s===!0&&Zh(o)||!t&&!Zh(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}const wd=q.createContext({});function Ed(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function pu(n){return typeof n=="string"||Array.isArray(n)}const uy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cy=["initial",...uy];function Sd(n){return Ed(n.animate)||cy.some(t=>pu(n[t]))}function Vw(n){return!!(Sd(n)||n.variants)}function s6(n,t){if(Sd(n)){const{initial:s,animate:r}=n;return{initial:s===!1||pu(s)?s:void 0,animate:pu(r)?r:void 0}}return n.inherit!==!1?t:{}}function i6(n){const{initial:t,animate:s}=s6(n,q.useContext(wd));return q.useMemo(()=>({initial:t,animate:s}),[V1(t),V1(s)])}function V1(n){return Array.isArray(n)?n.join(" "):n}function M1(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Ul={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(gt.test(n))n=parseFloat(n);else return n;const s=M1(n,t.target.x),r=M1(n,t.target.y);return`${s}% ${r}%`}},r6={correct:(n,{treeScale:t,projectionDelta:s})=>{const r=n,o=yr.parse(n);if(o.length>5)return r;const u=yr.createTransformer(n),c=typeof o[0]!="number"?1:0,m=s.x.scale*t.x,g=s.y.scale*t.y;o[0+c]/=m,o[1+c]/=g;const y=de(m,g,.5);return typeof o[2+c]=="number"&&(o[2+c]/=y),typeof o[3+c]=="number"&&(o[3+c]/=y),u(o)}},Fp={borderRadius:{...Ul,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ul,borderTopRightRadius:Ul,borderBottomLeftRadius:Ul,borderBottomRightRadius:Ul,boxShadow:r6};function Mw(n,{layout:t,layoutId:s}){return Vo.has(n)||n.startsWith("origin")||(t||s!==void 0)&&(!!Fp[n]||n==="opacity")}const a6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},o6=Do.length;function l6(n,t,s){let r="",o=!0;for(let u=0;u<o6;u++){const c=Do[u],m=n[c];if(m===void 0)continue;let g=!0;if(typeof m=="number"?g=m===(c.startsWith("scale")?1:0):g=parseFloat(m)===0,!g||s){const y=Tw(m,ry[c]);if(!g){o=!1;const b=a6[c]||c;r+=`${b}(${y}) `}s&&(t[c]=y)}}return r=r.trim(),s?r=s(t,o?"":r):o&&(r="none"),r}function hy(n,t,s){const{style:r,vars:o,transformOrigin:u}=n;let c=!1,m=!1;for(const g in t){const y=t[g];if(Vo.has(g)){c=!0;continue}else if(XT(g)){o[g]=y;continue}else{const b=Tw(y,ry[g]);g.startsWith("origin")?(m=!0,u[g]=b):r[g]=b}}if(t.transform||(c||s?r.transform=l6(t,n.transform,s):r.transform&&(r.transform="none")),m){const{originX:g="50%",originY:y="50%",originZ:b=0}=u;r.transformOrigin=`${g} ${y} ${b}`}}const dy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Iw(n,t,s){for(const r in t)!ln(t[r])&&!Mw(r,s)&&(n[r]=t[r])}function u6({transformTemplate:n},t){return q.useMemo(()=>{const s=dy();return hy(s,t,n),Object.assign({},s.vars,s.style)},[t])}function c6(n,t){const s=n.style||{},r={};return Iw(r,s,n),Object.assign(r,u6(n,t)),r}function h6(n,t){const s={},r=c6(n,t);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=r,s}const d6={offset:"stroke-dashoffset",array:"stroke-dasharray"},f6={offset:"strokeDashoffset",array:"strokeDasharray"};function m6(n,t,s=1,r=0,o=!0){n.pathLength=1;const u=o?d6:f6;n[u.offset]=gt.transform(-r);const c=gt.transform(t),m=gt.transform(s);n[u.array]=`${c} ${m}`}function kw(n,{attrX:t,attrY:s,attrScale:r,pathLength:o,pathSpacing:u=1,pathOffset:c=0,...m},g,y,b){if(hy(n,m,y),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:x,style:w}=n;x.transform&&(w.transform=x.transform,delete x.transform),(w.transform||x.transformOrigin)&&(w.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),w.transform&&(w.transformBox=(b==null?void 0:b.transformBox)??"fill-box",delete x.transformBox),t!==void 0&&(x.x=t),s!==void 0&&(x.y=s),r!==void 0&&(x.scale=r),o!==void 0&&m6(x,o,u,c,!1)}const Ow=()=>({...dy(),attrs:{}}),Pw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function p6(n,t,s,r){const o=q.useMemo(()=>{const u=Ow();return kw(u,t,Pw(r),n.transformTemplate,n.style),{...u.attrs,style:{...u.style}}},[t]);if(n.style){const u={};Iw(u,n.style,n),o.style={...u,...o.style}}return o}const g6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fy(n){return typeof n!="string"||n.includes("-")?!1:!!(g6.indexOf(n)>-1||/[A-Z]/u.test(n))}function y6(n,t,s,{latestValues:r},o,u=!1,c){const g=(c??fy(n)?p6:h6)(t,r,o,n),y=n6(t,typeof n=="string",u),b=n!==q.Fragment?{...y,...g,ref:s}:{},{children:x}=t,w=q.useMemo(()=>ln(x)?x.get():x,[x]);return q.createElement(n,{...b,children:w})}function I1(n){const t=[{},{}];return n==null||n.values.forEach((s,r)=>{t[0][r]=s.get(),t[1][r]=s.getVelocity()}),t}function my(n,t,s,r){if(typeof t=="function"){const[o,u]=I1(r);t=t(s!==void 0?s:n.custom,o,u)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[o,u]=I1(r);t=t(s!==void 0?s:n.custom,o,u)}return t}function Ah(n){return ln(n)?n.get():n}function v6({scrapeMotionValuesFromProps:n,createRenderState:t},s,r,o){return{latestValues:b6(s,r,o,n),renderState:t()}}function b6(n,t,s,r){const o={},u=r(n,{});for(const w in u)o[w]=Ah(u[w]);let{initial:c,animate:m}=n;const g=Sd(n),y=Vw(n);t&&y&&!g&&n.inherit!==!1&&(c===void 0&&(c=t.initial),m===void 0&&(m=t.animate));let b=s?s.initial===!1:!1;b=b||c===!1;const x=b?m:c;if(x&&typeof x!="boolean"&&!Ed(x)){const w=Array.isArray(x)?x:[x];for(let V=0;V<w.length;V++){const k=my(n,w[V]);if(k){const{transitionEnd:U,transition:L,...z}=k;for(const W in z){let K=z[W];if(Array.isArray(K)){const tt=b?K.length-1:0;K=K[tt]}K!==null&&(o[W]=K)}for(const W in U)o[W]=U[W]}}}return o}const Lw=n=>(t,s)=>{const r=q.useContext(wd),o=q.useContext(zg),u=()=>v6(n,t,r,o);return s?u():VT(u)};function py(n,t,s){var u;const{style:r}=n,o={};for(const c in r)(ln(r[c])||t.style&&ln(t.style[c])||Mw(c,n)||((u=s==null?void 0:s.getValue(c))==null?void 0:u.liveStyle)!==void 0)&&(o[c]=r[c]);return o}const x6=Lw({scrapeMotionValuesFromProps:py,createRenderState:dy});function Uw(n,t,s){const r=py(n,t,s);for(const o in n)if(ln(n[o])||ln(t[o])){const u=Do.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[u]=n[o]}return r}const _6=Lw({scrapeMotionValuesFromProps:Uw,createRenderState:Ow}),T6=Symbol.for("motionComponentSymbol");function co(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function w6(n,t,s){return q.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):co(s)&&(s.current=r))},[t])}const gy=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),E6="framerAppearId",Bw="data-"+gy(E6),zw=q.createContext({});function S6(n,t,s,r,o,u){var L,z;const{visualElement:c}=q.useContext(wd),m=q.useContext(jw),g=q.useContext(zg),y=q.useContext(Rw).reducedMotion,b=q.useRef(null);r=r||m.renderer,!b.current&&r&&(b.current=r(n,{visualState:t,parent:c,props:s,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:y,isSVG:u}));const x=b.current,w=q.useContext(zw);x&&!x.projection&&o&&(x.type==="html"||x.type==="svg")&&A6(b.current,s,o,w);const V=q.useRef(!1);q.useInsertionEffect(()=>{x&&V.current&&x.update(s,g)});const k=s[Bw],U=q.useRef(!!k&&!((L=window.MotionHandoffIsComplete)!=null&&L.call(window,k))&&((z=window.MotionHasOptimisedAnimation)==null?void 0:z.call(window,k)));return MT(()=>{x&&(V.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),U.current&&x.animationState&&x.animationState.animateChanges())}),q.useEffect(()=>{x&&(!U.current&&x.animationState&&x.animationState.animateChanges(),U.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)==null||W.call(window,k)}),U.current=!1),x.enteringChildren=void 0)}),x}function A6(n,t,s,r){const{layoutId:o,layout:u,drag:c,dragConstraints:m,layoutScroll:g,layoutRoot:y,layoutCrossfade:b}=t;n.projection=new s(n.latestValues,t["data-framer-portal-id"]?void 0:Fw(n.parent)),n.projection.setOptions({layoutId:o,layout:u,alwaysMeasureLayout:!!c||m&&co(m),visualElement:n,animationType:typeof u=="string"?u:"both",initialPromotionConfig:r,crossfade:b,layoutScroll:g,layoutRoot:y})}function Fw(n){if(n)return n.options.allowProjection!==!1?n.projection:Fw(n.parent)}function Xm(n,{forwardMotionProps:t=!1,type:s}={},r,o){r&&JV(r);const u=s?s==="svg":fy(n),c=u?_6:x6;function m(y,b){let x;const w={...q.useContext(Rw),...y,layoutId:N6(y)},{isStatic:V}=w,k=i6(y),U=c(y,V);if(!V&&Bg){C6();const L=R6(w);x=L.MeasureLayout,k.visualElement=S6(n,U,w,o,L.ProjectionNode,u)}return f.jsxs(wd.Provider,{value:k,children:[x&&k.visualElement?f.jsx(x,{visualElement:k.visualElement,...w}):null,y6(n,y,w6(U,k.visualElement,b),U,V,t,u)]})}m.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const g=q.forwardRef(m);return g[T6]=n,g}function N6({layoutId:n}){const t=q.useContext(DT).id;return t&&n!==void 0?t+"-"+n:n}function C6(n,t){q.useContext(jw).strict}function R6(n){const{drag:t,layout:s}=So;if(!t&&!s)return{};const r={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(n)||s!=null&&s.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function j6(n,t){if(typeof Proxy>"u")return Xm;const s=new Map,r=(u,c)=>Xm(u,c,n,t),o=(u,c)=>r(u,c);return new Proxy(o,{get:(u,c)=>c==="create"?r:(s.has(c)||s.set(c,Xm(c,void 0,n,t)),s.get(c))})}function qw({top:n,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:n,max:r}}}function D6({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function V6(n,t){if(!t)return n;const s=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function $m(n){return n===void 0||n===1}function qp({scale:n,scaleX:t,scaleY:s}){return!$m(n)||!$m(t)||!$m(s)}function ta(n){return qp(n)||Hw(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Hw(n){return k1(n.x)||k1(n.y)}function k1(n){return n&&n!=="0%"}function Wh(n,t,s){const r=n-s,o=t*r;return s+o}function O1(n,t,s,r,o){return o!==void 0&&(n=Wh(n,o,r)),Wh(n,s,r)+t}function Hp(n,t=0,s=1,r,o){n.min=O1(n.min,t,s,r,o),n.max=O1(n.max,t,s,r,o)}function Gw(n,{x:t,y:s}){Hp(n.x,t.translate,t.scale,t.originPoint),Hp(n.y,s.translate,s.scale,s.originPoint)}const P1=.999999999999,L1=1.0000000000001;function M6(n,t,s,r=!1){const o=s.length;if(!o)return;t.x=t.y=1;let u,c;for(let m=0;m<o;m++){u=s[m],c=u.projectionDelta;const{visualElement:g}=u.options;g&&g.props.style&&g.props.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&fo(n,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,Gw(n,c)),r&&ta(u.latestValues)&&fo(n,u.latestValues))}t.x<L1&&t.x>P1&&(t.x=1),t.y<L1&&t.y>P1&&(t.y=1)}function ho(n,t){n.min=n.min+t,n.max=n.max+t}function U1(n,t,s,r,o=.5){const u=de(n.min,n.max,o);Hp(n,t,s,u,r)}function fo(n,t){U1(n.x,t.x,t.scaleX,t.scale,t.originX),U1(n.y,t.y,t.scaleY,t.scale,t.originY)}function Yw(n,t){return qw(V6(n.getBoundingClientRect(),t))}function I6(n,t,s){const r=Yw(n,s),{scroll:o}=t;return o&&(ho(r.x,o.offset.x),ho(r.y,o.offset.y)),r}const B1=()=>({translate:0,scale:1,origin:0,originPoint:0}),mo=()=>({x:B1(),y:B1()}),z1=()=>({min:0,max:0}),Be=()=>({x:z1(),y:z1()}),Gp={current:null},Kw={current:!1};function k6(){if(Kw.current=!0,!!Bg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Gp.current=n.matches;n.addEventListener("change",t),t()}else Gp.current=!1}const O6=new WeakMap;function P6(n,t,s){for(const r in t){const o=t[r],u=s[r];if(ln(o))n.addValue(r,o);else if(ln(u))n.addValue(r,Us(o,{owner:n}));else if(u!==o)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=n.getStaticValue(r);n.addValue(r,Us(c!==void 0?c:o,{owner:n}))}}for(const r in s)t[r]===void 0&&n.removeValue(r);return t}const F1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class L6{scrapeMotionValuesFromProps(t,s,r){return{}}constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:u,visualState:c},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Tn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,ne.render(this.render,!1,!0))};const{latestValues:g,renderState:y}=c;this.latestValues=g,this.baseTarget={...g},this.initialValues=s.initial?{...g}:{},this.renderState=y,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=m,this.blockInitialAnimation=!!u,this.isControllingVariants=Sd(s),this.isVariantNode=Vw(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:b,...x}=this.scrapeMotionValuesFromProps(s,{},this);for(const w in x){const V=x[w];g[w]!==void 0&&ln(V)&&V.set(g[w])}}mount(t){var s;this.current=t,O6.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,o)=>this.bindToMotionValue(o,r)),Kw.current||k6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gp.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),$s(this.notifyUpdate),$s(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Vo.has(t);r&&this.onBindTransform&&this.onBindTransform();const o=s.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&ne.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{o(),u&&u(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in So){const s=So[t];if(!s)continue;const{isEnabled:r,Feature:o}=s;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Be()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<F1.length;r++){const o=F1[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u="on"+o,c=t[u];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=P6(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const r=this.values.get(t);s!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=Us(s===null?void 0:s,{owner:this}),this.addValue(t,r)),r}readValue(t,s){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(IT(r)||OT(r))?r=parseFloat(r):!ZV(r)&&yr.test(s)&&(r=xw(t,s)),this.setBaseTarget(t,ln(r)?r.get():r)),ln(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var u;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const c=my(this.props,s,(u=this.presenceContext)==null?void 0:u.custom);c&&(r=c[t])}if(s&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!ln(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Gg),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){ay.render(this.render)}}class Qw extends L6{constructor(){super(...arguments),this.KeyframeResolver=DV}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ln(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Xw(n,{style:t,vars:s},r,o){const u=n.style;let c;for(c in t)u[c]=t[c];o==null||o.applyProjectionStyles(u,r);for(c in s)u.setProperty(c,s[c])}function U6(n){return window.getComputedStyle(n)}class B6 extends Qw{constructor(){super(...arguments),this.type="html",this.renderInstance=Xw}readValueFromInstance(t,s){var r;if(Vo.has(s))return(r=this.projection)!=null&&r.isProjecting?kp(s):ZD(t,s);{const o=U6(t),u=(XT(s)?o.getPropertyValue(s):o[s])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:s}){return Yw(t,s)}build(t,s,r){hy(t,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,s,r){return py(t,s,r)}}const $w=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function z6(n,t,s,r){Xw(n,t,void 0,r);for(const o in t.attrs)n.setAttribute($w.has(o)?o:gy(o),t.attrs[o])}class F6 extends Qw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Be}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Vo.has(s)){const r=bw(s);return r&&r.default||0}return s=$w.has(s)?s:gy(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,r){return Uw(t,s,r)}build(t,s,r){kw(t,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,s,r,o){z6(t,s,r,o)}mount(t){this.isSVGTag=Pw(t.tagName),super.mount(t)}}const q6=(n,t)=>t.isSVG??fy(n)?new F6(t):new B6(t,{allowProjection:n!==q.Fragment});function go(n,t,s){const r=n.getProps();return my(r,t,s!==void 0?s:r.custom,n)}const Yp=n=>Array.isArray(n);function H6(n,t,s){n.hasValue(t)?n.getValue(t).set(s):n.addValue(t,Us(s))}function G6(n){return Yp(n)?n[n.length-1]||0:n}function Y6(n,t){const s=go(n,t);let{transitionEnd:r={},transition:o={},...u}=s||{};u={...u,...r};for(const c in u){const m=G6(u[c]);H6(n,c,m)}}function K6(n){return!!(ln(n)&&n.add)}function Kp(n,t){const s=n.getValue("willChange");if(K6(s))return s.add(t);if(!s&&wi.WillChange){const r=new wi.WillChange("auto");n.addValue("willChange",r),r.add(t)}}function Zw(n){return n.props[Bw]}const Q6=n=>n!==null;function X6(n,{repeat:t,repeatType:s="loop"},r){const o=n.filter(Q6),u=t&&s!=="loop"&&t%2===1?0:o.length-1;return o[u]}const $6={type:"spring",stiffness:500,damping:25,restSpeed:10},Z6=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),W6={type:"keyframes",duration:.8},J6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tM=(n,{keyframes:t})=>t.length>2?W6:Vo.has(n)?n.startsWith("scale")?Z6(t[1]):$6:J6;function eM({when:n,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:o,repeat:u,repeatType:c,repeatDelay:m,from:g,elapsed:y,...b}){return!!Object.keys(b).length}const yy=(n,t,s,r={},o,u)=>c=>{const m=iy(r,n)||{},g=m.delay||r.delay||0;let{elapsed:y=0}=r;y=y-Hs(g);const b={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...m,delay:-y,onUpdate:w=>{t.set(w),m.onUpdate&&m.onUpdate(w)},onComplete:()=>{c(),m.onComplete&&m.onComplete()},name:n,motionValue:t,element:u?void 0:o};eM(m)||Object.assign(b,tM(n,b)),b.duration&&(b.duration=Hs(b.duration)),b.repeatDelay&&(b.repeatDelay=Hs(b.repeatDelay)),b.from!==void 0&&(b.keyframes[0]=b.from);let x=!1;if((b.type===!1||b.duration===0&&!b.repeatDelay)&&(Bp(b),b.delay===0&&(x=!0)),(wi.instantAnimations||wi.skipAnimations)&&(x=!0,Bp(b),b.delay=0),b.allowFlatten=!m.type&&!m.ease,x&&!u&&t.get()!==void 0){const w=X6(b.keyframes,m);if(w!==void 0){ne.update(()=>{b.onUpdate(w),b.onComplete()});return}}return m.isSync?new ny(b):new bV(b)};function nM({protectedKeys:n,needsAnimating:t},s){const r=n.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function Ww(n,t,{delay:s=0,transitionOverride:r,type:o}={}){let{transition:u=n.getDefaultTransition(),transitionEnd:c,...m}=t;r&&(u=r);const g=[],y=o&&n.animationState&&n.animationState.getState()[o];for(const b in m){const x=n.getValue(b,n.latestValues[b]??null),w=m[b];if(w===void 0||y&&nM(y,b))continue;const V={delay:s,...iy(u||{},b)},k=x.get();if(k!==void 0&&!x.isAnimating&&!Array.isArray(w)&&w===k&&!V.velocity)continue;let U=!1;if(window.MotionHandoffAnimation){const z=Zw(n);if(z){const W=window.MotionHandoffAnimation(z,b,ne);W!==null&&(V.startTime=W,U=!0)}}Kp(n,b),x.start(yy(b,x,w,n.shouldReduceMotion&&gw.has(b)?{type:!1}:V,n,U));const L=x.animation;L&&g.push(L)}return c&&Promise.all(g).then(()=>{ne.update(()=>{c&&Y6(n,c)})}),g}function Jw(n,t,s,r=0,o=1){const u=Array.from(n).sort((y,b)=>y.sortNodePosition(b)).indexOf(t),c=n.size,m=(c-1)*r;return typeof s=="function"?s(u,c):o===1?u*r:m-u*r}function Qp(n,t,s={}){var g;const r=go(n,t,s.type==="exit"?(g=n.presenceContext)==null?void 0:g.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(o=s.transitionOverride);const u=r?()=>Promise.all(Ww(n,r,s)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(y=0)=>{const{delayChildren:b=0,staggerChildren:x,staggerDirection:w}=o;return sM(n,t,y,b,x,w,s)}:()=>Promise.resolve(),{when:m}=o;if(m){const[y,b]=m==="beforeChildren"?[u,c]:[c,u];return y().then(()=>b())}else return Promise.all([u(),c(s.delay)])}function sM(n,t,s=0,r=0,o=0,u=1,c){const m=[];for(const g of n.variantChildren)g.notify("AnimationStart",t),m.push(Qp(g,t,{...c,delay:s+(typeof r=="function"?0:r)+Jw(n.variantChildren,g,r,o,u)}).then(()=>g.notify("AnimationComplete",t)));return Promise.all(m)}function iM(n,t,s={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(u=>Qp(n,u,s));r=Promise.all(o)}else if(typeof t=="string")r=Qp(n,t,s);else{const o=typeof t=="function"?go(n,t,s.custom):t;r=Promise.all(Ww(n,o,s))}return r.then(()=>{n.notify("AnimationComplete",t)})}function tE(n,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==n.length)return!1;for(let r=0;r<s;r++)if(t[r]!==n[r])return!1;return!0}const rM=cy.length;function eE(n){if(!n)return;if(!n.isControllingVariants){const s=n.parent?eE(n.parent)||{}:{};return n.props.initial!==void 0&&(s.initial=n.props.initial),s}const t={};for(let s=0;s<rM;s++){const r=cy[s],o=n.props[r];(pu(o)||o===!1)&&(t[r]=o)}return t}const aM=[...uy].reverse(),oM=uy.length;function lM(n){return t=>Promise.all(t.map(({animation:s,options:r})=>iM(n,s,r)))}function uM(n){let t=lM(n),s=q1(),r=!0;const o=g=>(y,b)=>{var w;const x=go(n,b,g==="exit"?(w=n.presenceContext)==null?void 0:w.custom:void 0);if(x){const{transition:V,transitionEnd:k,...U}=x;y={...y,...U,...k}}return y};function u(g){t=g(n)}function c(g){const{props:y}=n,b=eE(n.parent)||{},x=[],w=new Set;let V={},k=1/0;for(let L=0;L<oM;L++){const z=aM[L],W=s[z],K=y[z]!==void 0?y[z]:b[z],tt=pu(K),et=z===g?W.isActive:null;et===!1&&(k=L);let J=K===b[z]&&K!==y[z]&&tt;if(J&&r&&n.manuallyAnimateOnMount&&(J=!1),W.protectedKeys={...V},!W.isActive&&et===null||!K&&!W.prevProp||Ed(K)||typeof K=="boolean")continue;const j=cM(W.prevProp,K);let C=j||z===g&&W.isActive&&!J&&tt||L>k&&tt,A=!1;const N=Array.isArray(K)?K:[K];let M=N.reduce(o(z),{});et===!1&&(M={});const{prevResolvedValues:E={}}=W,D={...E,...M},st=X=>{C=!0,w.has(X)&&(A=!0,w.delete(X)),W.needsAnimating[X]=!0;const ct=n.getValue(X);ct&&(ct.liveStyle=!1)};for(const X in D){const ct=M[X],Tt=E[X];if(V.hasOwnProperty(X))continue;let Et=!1;Yp(ct)&&Yp(Tt)?Et=!tE(ct,Tt):Et=ct!==Tt,Et?ct!=null?st(X):w.add(X):ct!==void 0&&w.has(X)?st(X):W.protectedKeys[X]=!0}W.prevProp=K,W.prevResolvedValues=M,W.isActive&&(V={...V,...M}),r&&n.blockInitialAnimation&&(C=!1);const ut=J&&j;C&&(!ut||A)&&x.push(...N.map(X=>{const ct={type:z};if(typeof X=="string"&&r&&!ut&&n.manuallyAnimateOnMount&&n.parent){const{parent:Tt}=n,Et=go(Tt,X);if(Tt.enteringChildren&&Et){const{delayChildren:O}=Et.transition||{};ct.delay=Jw(Tt.enteringChildren,n,O)}}return{animation:X,options:ct}}))}if(w.size){const L={};if(typeof y.initial!="boolean"){const z=go(n,Array.isArray(y.initial)?y.initial[0]:y.initial);z&&z.transition&&(L.transition=z.transition)}w.forEach(z=>{const W=n.getBaseTarget(z),K=n.getValue(z);K&&(K.liveStyle=!0),L[z]=W??null}),x.push({animation:L})}let U=!!x.length;return r&&(y.initial===!1||y.initial===y.animate)&&!n.manuallyAnimateOnMount&&(U=!1),r=!1,U?t(x):Promise.resolve()}function m(g,y){var x;if(s[g].isActive===y)return Promise.resolve();(x=n.variantChildren)==null||x.forEach(w=>{var V;return(V=w.animationState)==null?void 0:V.setActive(g,y)}),s[g].isActive=y;const b=c(g);for(const w in s)s[w].protectedKeys={};return b}return{animateChanges:c,setActive:m,setAnimateFunction:u,getState:()=>s,reset:()=>{s=q1()}}}function cM(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!tE(t,n):!1}function Wr(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function q1(){return{animate:Wr(!0),whileInView:Wr(),whileHover:Wr(),whileTap:Wr(),whileDrag:Wr(),whileFocus:Wr(),exit:Wr()}}class xr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class hM extends xr{constructor(t){super(t),t.animationState||(t.animationState=uM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ed(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let dM=0;class fM extends xr{constructor(){super(...arguments),this.id=dM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);s&&!t&&o.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const mM={animation:{Feature:hM},exit:{Feature:fM}};function gu(n,t,s,r={passive:!0}){return n.addEventListener(t,s,r),()=>n.removeEventListener(t,s)}function ju(n){return{point:{x:n.pageX,y:n.pageY}}}const pM=n=>t=>oy(t)&&n(t,ju(t));function tu(n,t,s,r){return gu(n,t,pM(s),r)}const nE=1e-4,gM=1-nE,yM=1+nE,sE=.01,vM=0-sE,bM=0+sE;function dn(n){return n.max-n.min}function xM(n,t,s){return Math.abs(n-t)<=s}function H1(n,t,s,r=.5){n.origin=r,n.originPoint=de(t.min,t.max,n.origin),n.scale=dn(s)/dn(t),n.translate=de(s.min,s.max,n.origin)-n.originPoint,(n.scale>=gM&&n.scale<=yM||isNaN(n.scale))&&(n.scale=1),(n.translate>=vM&&n.translate<=bM||isNaN(n.translate))&&(n.translate=0)}function eu(n,t,s,r){H1(n.x,t.x,s.x,r?r.originX:void 0),H1(n.y,t.y,s.y,r?r.originY:void 0)}function G1(n,t,s){n.min=s.min+t.min,n.max=n.min+dn(t)}function _M(n,t,s){G1(n.x,t.x,s.x),G1(n.y,t.y,s.y)}function Y1(n,t,s){n.min=t.min-s.min,n.max=n.min+dn(t)}function Jh(n,t,s){Y1(n.x,t.x,s.x),Y1(n.y,t.y,s.y)}function Xn(n){return[n("x"),n("y")]}const iE=({current:n})=>n?n.ownerDocument.defaultView:null,K1=(n,t)=>Math.abs(n-t);function TM(n,t){const s=K1(n.x,t.x),r=K1(n.y,t.y);return Math.sqrt(s**2+r**2)}class rE{constructor(t,s,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:u=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Wm(this.lastMoveEventInfo,this.history),V=this.startEvent!==null,k=TM(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!V&&!k)return;const{point:U}=w,{timestamp:L}=Ge;this.history.push({...U,timestamp:L});const{onStart:z,onMove:W}=this.handlers;V||(z&&z(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,w)},this.handlePointerMove=(w,V)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Zm(V,this.transformPagePoint),ne.update(this.updatePoint,!0)},this.handlePointerUp=(w,V)=>{this.end();const{onEnd:k,onSessionEnd:U,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=Wm(w.type==="pointercancel"?this.lastMoveEventInfo:Zm(V,this.transformPagePoint),this.history);this.startEvent&&k&&k(w,z),U&&U(w,z)},!oy(t))return;this.dragSnapToOrigin=u,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=o||window;const m=ju(t),g=Zm(m,this.transformPagePoint),{point:y}=g,{timestamp:b}=Ge;this.history=[{...y,timestamp:b}];const{onSessionStart:x}=s;x&&x(t,Wm(g,this.history)),this.removeListeners=Nu(tu(this.contextWindow,"pointermove",this.handlePointerMove),tu(this.contextWindow,"pointerup",this.handlePointerUp),tu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),$s(this.updatePoint)}}function Zm(n,t){return t?{point:t(n.point)}:n}function Q1(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Wm({point:n},t){return{point:n,delta:Q1(n,aE(t)),offset:Q1(n,wM(t)),velocity:EM(t,.1)}}function wM(n){return n[0]}function aE(n){return n[n.length-1]}function EM(n,t){if(n.length<2)return{x:0,y:0};let s=n.length-1,r=null;const o=aE(n);for(;s>=0&&(r=n[s],!(o.timestamp-r.timestamp>Hs(t)));)s--;if(!r)return{x:0,y:0};const u=Zn(o.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const c={x:(o.x-r.x)/u,y:(o.y-r.y)/u};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function SM(n,{min:t,max:s},r){return t!==void 0&&n<t?n=r?de(t,n,r.min):Math.max(n,t):s!==void 0&&n>s&&(n=r?de(s,n,r.max):Math.min(n,s)),n}function X1(n,t,s){return{min:t!==void 0?n.min+t:void 0,max:s!==void 0?n.max+s-(n.max-n.min):void 0}}function AM(n,{top:t,left:s,bottom:r,right:o}){return{x:X1(n.x,s,o),y:X1(n.y,t,r)}}function $1(n,t){let s=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([s,r]=[r,s]),{min:s,max:r}}function NM(n,t){return{x:$1(n.x,t.x),y:$1(n.y,t.y)}}function CM(n,t){let s=.5;const r=dn(n),o=dn(t);return o>r?s=Eo(t.min,t.max-r,n.min):r>o&&(s=Eo(n.min,n.max-o,t.min)),Xs(0,1,s)}function RM(n,t){const s={};return t.min!==void 0&&(s.min=t.min-n.min),t.max!==void 0&&(s.max=t.max-n.min),s}const Xp=.35;function jM(n=Xp){return n===!1?n=0:n===!0&&(n=Xp),{x:Z1(n,"left","right"),y:Z1(n,"top","bottom")}}function Z1(n,t,s){return{min:W1(n,t),max:W1(n,s)}}function W1(n,t){return typeof n=="number"?n:n[t]||0}const DM=new WeakMap;class VM{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Be(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const u=x=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(ju(x).point)},c=(x,w)=>{const{drag:V,dragPropagation:k,onDragStart:U}=this.getProps();if(V&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=IV(V),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xn(z=>{let W=this.getAxisMotionValue(z).get()||0;if(Gs.test(W)){const{projection:K}=this.visualElement;if(K&&K.layout){const tt=K.layout.layoutBox[z];tt&&(W=dn(tt)*(parseFloat(W)/100))}}this.originPoint[z]=W}),U&&ne.postRender(()=>U(x,w)),Kp(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},m=(x,w)=>{this.latestPointerEvent=x,this.latestPanInfo=w;const{dragPropagation:V,dragDirectionLock:k,onDirectionLock:U,onDrag:L}=this.getProps();if(!V&&!this.openDragLock)return;const{offset:z}=w;if(k&&this.currentDirection===null){this.currentDirection=MM(z),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",w.point,z),this.updateAxis("y",w.point,z),this.visualElement.render(),L&&L(x,w)},g=(x,w)=>{this.latestPointerEvent=x,this.latestPanInfo=w,this.stop(x,w),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>Xn(x=>{var w;return this.getAnimationState(x)==="paused"&&((w=this.getAxisMotionValue(x).animation)==null?void 0:w.play())}),{dragSnapToOrigin:b}=this.getProps();this.panSession=new rE(t,{onSessionStart:u,onStart:c,onMove:m,onSessionEnd:g,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,distanceThreshold:r,contextWindow:iE(this.visualElement)})}stop(t,s){const r=t||this.latestPointerEvent,o=s||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!o||!r)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:m}=this.getProps();m&&ne.postRender(()=>m(r,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:o}=this.getProps();if(!r||!mh(t,o,this.currentDirection))return;const u=this.getAxisMotionValue(t);let c=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(c=SM(c,this.constraints[t],this.elastic[t])),u.set(c)}resolveConstraints(){var u;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,o=this.constraints;t&&co(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=AM(r.layoutBox,t):this.constraints=!1,this.elastic=jM(s),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Xn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=RM(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!co(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=I6(r,o.root,this.visualElement.getTransformPagePoint());let c=NM(o.layout.layoutBox,u);if(s){const m=s(D6(c));this.hasMutatedConstraints=!!m,m&&(c=qw(m))}return c}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:o,dragTransition:u,dragSnapToOrigin:c,onDragTransitionEnd:m}=this.getProps(),g=this.constraints||{},y=Xn(b=>{if(!mh(b,s,this.currentDirection))return;let x=g&&g[b]||{};c&&(x={min:0,max:0});const w=o?200:1e6,V=o?40:1e7,k={type:"inertia",velocity:r?t[b]:0,bounceStiffness:w,bounceDamping:V,timeConstant:750,restDelta:1,restSpeed:10,...u,...x};return this.startAxisValueAnimation(b,k)});return Promise.all(y).then(m)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return Kp(this.visualElement,t),r.start(yy(t,r,0,s,this.visualElement,!1))}stopAnimation(){Xn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Xn(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[s];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Xn(s=>{const{drag:r}=this.getProps();if(!mh(s,r,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(s);if(o&&o.layout){const{min:c,max:m}=o.layout.layoutBox[s];u.set(t[s]-de(c,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!co(s)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Xn(c=>{const m=this.getAxisMotionValue(c);if(m&&this.constraints!==!1){const g=m.get();o[c]=CM({min:g,max:g},this.constraints[c])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Xn(c=>{if(!mh(c,t,null))return;const m=this.getAxisMotionValue(c),{min:g,max:y}=this.constraints[c];m.set(de(g,y,o[c]))})}addListeners(){if(!this.visualElement.current)return;DM.set(this.visualElement,this);const t=this.visualElement.current,s=tu(t,"pointerdown",g=>{const{drag:y,dragListener:b=!0}=this.getProps();y&&b&&this.start(g)}),r=()=>{const{dragConstraints:g}=this.getProps();co(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),ne.read(r);const c=gu(window,"resize",()=>this.scalePositionWithinConstraints()),m=o.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:y})=>{this.isDragging&&y&&(Xn(b=>{const x=this.getAxisMotionValue(b);x&&(this.originPoint[b]+=g[b].translate,x.set(x.get()+g[b].translate))}),this.visualElement.render())}));return()=>{c(),s(),u(),m&&m()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:c=Xp,dragMomentum:m=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:o,dragConstraints:u,dragElastic:c,dragMomentum:m}}}function mh(n,t,s){return(t===!0||t===n)&&(s===null||s===n)}function MM(n,t=10){let s=null;return Math.abs(n.y)>t?s="y":Math.abs(n.x)>t&&(s="x"),s}class IM extends xr{constructor(t){super(t),this.removeGroupControls=En,this.removeListeners=En,this.controls=new VM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||En}update(){const{dragControls:t}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};t!==s&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const J1=n=>(t,s)=>{n&&ne.postRender(()=>n(t,s))};class kM extends xr{constructor(){super(...arguments),this.removePointerDownListener=En}onPointerDown(t){this.session=new rE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iE(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:J1(t),onStart:J1(s),onMove:r,onEnd:(u,c)=>{delete this.session,o&&ne.postRender(()=>o(u,c))}}}mount(){this.removePointerDownListener=tu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Jm=!1;class OM extends q.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:o}=this.props,{projection:u}=t;u&&(s.group&&s.group.add(u),r&&r.register&&o&&r.register(u),Jm&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),Nh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:o,isPresent:u}=this.props,{projection:c}=r;return c&&(c.isPresent=u,Jm=!0,o||t.layoutDependency!==s||s===void 0||t.isPresent!==u?c.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?c.promote():c.relegate()||ne.postRender(()=>{const m=c.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ay.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:o}=t;Jm=!0,o&&(o.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function oE(n){const[t,s]=WV(),r=q.useContext(DT);return f.jsx(OM,{...n,layoutGroup:r,switchLayoutGroup:q.useContext(zw),isPresent:t,safeToRemove:s})}function PM(n,t,s){const r=ln(n)?n:Us(n);return r.start(yy("",r,t,s)),r.animation}const LM=(n,t)=>n.depth-t.depth;class UM{constructor(){this.children=[],this.isDirty=!1}add(t){Fg(this.children,t),this.isDirty=!0}remove(t){qg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LM),this.isDirty=!1,this.children.forEach(t)}}function BM(n,t){const s=Tn.now(),r=({timestamp:o})=>{const u=o-s;u>=t&&($s(r),n(u-t))};return ne.setup(r,!0),()=>$s(r)}const lE=["TopLeft","TopRight","BottomLeft","BottomRight"],zM=lE.length,t_=n=>typeof n=="string"?parseFloat(n):n,e_=n=>typeof n=="number"||gt.test(n);function FM(n,t,s,r,o,u){o?(n.opacity=de(0,s.opacity??1,qM(r)),n.opacityExit=de(t.opacity??1,0,HM(r))):u&&(n.opacity=de(t.opacity??1,s.opacity??1,r));for(let c=0;c<zM;c++){const m=`border${lE[c]}Radius`;let g=n_(t,m),y=n_(s,m);if(g===void 0&&y===void 0)continue;g||(g=0),y||(y=0),g===0||y===0||e_(g)===e_(y)?(n[m]=Math.max(de(t_(g),t_(y),r),0),(Gs.test(y)||Gs.test(g))&&(n[m]+="%")):n[m]=y}(t.rotate||s.rotate)&&(n.rotate=de(t.rotate||0,s.rotate||0,r))}function n_(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const qM=uE(0,.5,qT),HM=uE(.5,.95,En);function uE(n,t,s){return r=>r<n?0:r>t?1:s(Eo(n,t,r))}function s_(n,t){n.min=t.min,n.max=t.max}function hs(n,t){s_(n.x,t.x),s_(n.y,t.y)}function i_(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function r_(n,t,s,r,o){return n-=t,n=Wh(n,1/s,r),o!==void 0&&(n=Wh(n,1/o,r)),n}function GM(n,t=0,s=1,r=.5,o,u=n,c=n){if(Gs.test(t)&&(t=parseFloat(t),t=de(c.min,c.max,t/100)-c.min),typeof t!="number")return;let m=de(u.min,u.max,r);n===u&&(m-=t),n.min=r_(n.min,t,s,m,o),n.max=r_(n.max,t,s,m,o)}function a_(n,t,[s,r,o],u,c){GM(n,t[s],t[r],t[o],t.scale,u,c)}const YM=["x","scaleX","originX"],KM=["y","scaleY","originY"];function o_(n,t,s,r){a_(n.x,t,YM,s?s.x:void 0,r?r.x:void 0),a_(n.y,t,KM,s?s.y:void 0,r?r.y:void 0)}function l_(n){return n.translate===0&&n.scale===1}function cE(n){return l_(n.x)&&l_(n.y)}function u_(n,t){return n.min===t.min&&n.max===t.max}function QM(n,t){return u_(n.x,t.x)&&u_(n.y,t.y)}function c_(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function hE(n,t){return c_(n.x,t.x)&&c_(n.y,t.y)}function h_(n){return dn(n.x)/dn(n.y)}function d_(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class XM{constructor(){this.members=[]}add(t){Fg(this.members,t),t.scheduleRender()}remove(t){if(qg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(o=>t===o);if(s===0)return!1;let r;for(let o=s;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $M(n,t,s){let r="";const o=n.x.translate/t.x,u=n.y.translate/t.y,c=(s==null?void 0:s.z)||0;if((o||u||c)&&(r=`translate3d(${o}px, ${u}px, ${c}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:y,rotate:b,rotateX:x,rotateY:w,skewX:V,skewY:k}=s;y&&(r=`perspective(${y}px) ${r}`),b&&(r+=`rotate(${b}deg) `),x&&(r+=`rotateX(${x}deg) `),w&&(r+=`rotateY(${w}deg) `),V&&(r+=`skewX(${V}deg) `),k&&(r+=`skewY(${k}deg) `)}const m=n.x.scale*t.x,g=n.y.scale*t.y;return(m!==1||g!==1)&&(r+=`scale(${m}, ${g})`),r||"none"}const tp=["","X","Y","Z"],ZM=1e3;let WM=0;function ep(n,t,s,r){const{latestValues:o}=t;o[n]&&(s[n]=o[n],t.setStaticValue(n,0),r&&(r[n]=0))}function dE(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const s=Zw(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:o,layoutId:u}=n.options;window.MotionCancelOptimisedAnimation(s,"transform",ne,!(o||u))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&dE(r)}function fE({attachResizeListener:n,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(c={},m=t==null?void 0:t()){this.id=WM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(e3),this.nodes.forEach(r3),this.nodes.forEach(a3),this.nodes.forEach(n3)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new UM)}addEventListener(c,m){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Gg),this.eventHandlers.get(c).add(m)}notifyListeners(c,...m){const g=this.eventHandlers.get(c);g&&g.notify(...m)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=ly(c)&&!XV(c),this.instance=c;const{layoutId:m,layout:g,visualElement:y}=this.options;if(y&&!y.current&&y.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||m)&&(this.isLayoutDirty=!0),n){let b,x=0;const w=()=>this.root.updateBlockedByResize=!1;ne.read(()=>{x=window.innerWidth}),n(c,()=>{const V=window.innerWidth;V!==x&&(x=V,this.root.updateBlockedByResize=!0,b&&b(),b=BM(w,250),Nh.hasAnimatedSinceResize&&(Nh.hasAnimatedSinceResize=!1,this.nodes.forEach(p_)))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&y&&(m||g)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x,hasRelativeLayoutChanged:w,layout:V})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||y.getDefaultTransition()||h3,{onLayoutAnimationStart:U,onLayoutAnimationComplete:L}=y.getProps(),z=!this.targetLayout||!hE(this.targetLayout,V),W=!x&&w;if(this.options.layoutRoot||this.resumeFrom||W||x&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const K={...iy(k,"layout"),onPlay:U,onComplete:L};(y.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K),this.setAnimationOrigin(b,W)}else x||p_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=V})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$s(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(o3),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&dE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let b=0;b<this.path.length;b++){const x=this.path[b];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:m,layout:g}=this.options;if(m===void 0&&!g)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(f_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(m_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(i3),this.nodes.forEach(JM),this.nodes.forEach(t3)):this.nodes.forEach(m_),this.clearAllSnapshots();const m=Tn.now();Ge.delta=Xs(0,1e3/60,m-Ge.timestamp),Ge.timestamp=m,Ge.isProcessing=!0,qm.update.process(Ge),qm.preRender.process(Ge),qm.render.process(Ge),Ge.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ay.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(s3),this.sharedNodes.forEach(l3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!dn(this.snapshot.measuredBox.x)&&!dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Be(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let m=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(m=!1),m&&this.instance){const g=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:g,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,m=this.projectionDelta&&!cE(this.projectionDelta),g=this.getTransformTemplate(),y=g?g(this.latestValues,""):void 0,b=y!==this.prevTransformTemplateValue;c&&this.instance&&(m||ta(this.latestValues)||b)&&(o(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const m=this.measurePageBox();let g=this.removeElementScroll(m);return c&&(g=this.removeTransform(g)),d3(g),{animationId:this.root.animationId,measuredBox:m,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var y;const{visualElement:c}=this.options;if(!c)return Be();const m=c.measureViewportBox();if(!(((y=this.scroll)==null?void 0:y.wasRoot)||this.path.some(f3))){const{scroll:b}=this.root;b&&(ho(m.x,b.offset.x),ho(m.y,b.offset.y))}return m}removeElementScroll(c){var g;const m=Be();if(hs(m,c),(g=this.scroll)!=null&&g.wasRoot)return m;for(let y=0;y<this.path.length;y++){const b=this.path[y],{scroll:x,options:w}=b;b!==this.root&&x&&w.layoutScroll&&(x.wasRoot&&hs(m,c),ho(m.x,x.offset.x),ho(m.y,x.offset.y))}return m}applyTransform(c,m=!1){const g=Be();hs(g,c);for(let y=0;y<this.path.length;y++){const b=this.path[y];!m&&b.options.layoutScroll&&b.scroll&&b!==b.root&&fo(g,{x:-b.scroll.offset.x,y:-b.scroll.offset.y}),ta(b.latestValues)&&fo(g,b.latestValues)}return ta(this.latestValues)&&fo(g,this.latestValues),g}removeTransform(c){const m=Be();hs(m,c);for(let g=0;g<this.path.length;g++){const y=this.path[g];if(!y.instance||!ta(y.latestValues))continue;qp(y.latestValues)&&y.updateSnapshot();const b=Be(),x=y.measurePageBox();hs(b,x),o_(m,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,b)}return ta(this.latestValues)&&o_(m,this.latestValues),m}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ge.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var V;const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==m;if(!(c||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(V=this.parent)!=null&&V.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:x}=this.options;if(!this.layout||!(b||x))return;this.resolvedRelativeTargetAt=Ge.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Be(),this.targetWithTransforms=Be()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_M(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),Gw(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||qp(this.parent.latestValues)||Hw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,m,g){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Be(),this.relativeTargetOrigin=Be(),Jh(this.relativeTargetOrigin,m,g),hs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const c=this.getLead(),m=!!this.resumingFrom||this!==c;let g=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(g=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Ge.timestamp&&(g=!1),g)return;const{layout:y,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||b))return;hs(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,w=this.treeScale.y;M6(this.layoutCorrected,this.treeScale,this.path,m),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Be());const{target:V}=c;if(!V){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(i_(this.prevProjectionDelta.x,this.projectionDelta.x),i_(this.prevProjectionDelta.y,this.projectionDelta.y)),eu(this.projectionDelta,this.layoutCorrected,V,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==w||!d_(this.projectionDelta.x,this.prevProjectionDelta.x)||!d_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",V))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var m;if((m=this.options.visualElement)==null||m.scheduleRender(),c){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mo(),this.projectionDelta=mo(),this.projectionDeltaWithTransform=mo()}setAnimationOrigin(c,m=!1){const g=this.snapshot,y=g?g.latestValues:{},b={...this.latestValues},x=mo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const w=Be(),V=g?g.source:void 0,k=this.layout?this.layout.source:void 0,U=V!==k,L=this.getStack(),z=!L||L.members.length<=1,W=!!(U&&!z&&this.options.crossfade===!0&&!this.path.some(c3));this.animationProgress=0;let K;this.mixTargetDelta=tt=>{const et=tt/1e3;g_(x.x,c.x,et),g_(x.y,c.y,et),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jh(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),u3(this.relativeTarget,this.relativeTargetOrigin,w,et),K&&QM(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=Be()),hs(K,this.relativeTarget)),U&&(this.animationValues=b,FM(b,y,this.latestValues,et,W,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=et},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var m,g,y;this.notifyListeners("animationStart"),(m=this.currentAnimation)==null||m.stop(),(y=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||y.stop(),this.pendingAnimation&&($s(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ne.update(()=>{Nh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Us(0)),this.currentAnimation=PM(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:b=>{this.mixTargetDelta(b),c.onUpdate&&c.onUpdate(b)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:m,target:g,layout:y,latestValues:b}=c;if(!(!m||!g||!y)){if(this!==c&&this.layout&&y&&mE(this.options.animationType,this.layout.layoutBox,y.layoutBox)){g=this.target||Be();const x=dn(this.layout.layoutBox.x);g.x.min=c.target.x.min,g.x.max=g.x.min+x;const w=dn(this.layout.layoutBox.y);g.y.min=c.target.y.min,g.y.max=g.y.min+w}hs(m,g),fo(m,b),eu(this.projectionDeltaWithTransform,this.layoutCorrected,m,b)}}registerSharedNode(c,m){this.sharedNodes.has(c)||this.sharedNodes.set(c,new XM),this.sharedNodes.get(c).add(m);const y=m.options.initialPromotionConfig;m.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(m):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var m;const{layoutId:c}=this.options;return c?((m=this.getStack())==null?void 0:m.lead)||this:this}getPrevLead(){var m;const{layoutId:c}=this.options;return c?(m=this.getStack())==null?void 0:m.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:m,preserveFollowOpacity:g}={}){const y=this.getStack();y&&y.promote(this,g),c&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let m=!1;const{latestValues:g}=c;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(m=!0),!m)return;const y={};g.z&&ep("z",c,y,this.animationValues);for(let b=0;b<tp.length;b++)ep(`rotate${tp[b]}`,c,y,this.animationValues),ep(`skew${tp[b]}`,c,y,this.animationValues);c.render();for(const b in y)c.setStaticValue(b,y[b]),this.animationValues&&(this.animationValues[b]=y[b]);c.scheduleRender()}applyProjectionStyles(c,m){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Ah(m==null?void 0:m.pointerEvents)||"",c.transform=g?g(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Ah(m==null?void 0:m.pointerEvents)||""),this.hasProjected&&!ta(this.latestValues)&&(c.transform=g?g({},""):"none",this.hasProjected=!1);return}c.visibility="";const b=y.animationValues||y.latestValues;this.applyTransformsToTarget();let x=$M(this.projectionDeltaWithTransform,this.treeScale,b);g&&(x=g(b,x)),c.transform=x;const{x:w,y:V}=this.projectionDelta;c.transformOrigin=`${w.origin*100}% ${V.origin*100}% 0`,y.animationValues?c.opacity=y===this?b.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:c.opacity=y===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const k in Fp){if(b[k]===void 0)continue;const{correct:U,applyTo:L,isCSSVariable:z}=Fp[k],W=x==="none"?b[k]:U(b[k],y);if(L){const K=L.length;for(let tt=0;tt<K;tt++)c[L[tt]]=W}else z?this.options.visualElement.renderState.vars[k]=W:c[k]=W}this.options.layoutId&&(c.pointerEvents=y===this?Ah(m==null?void 0:m.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var m;return(m=c.currentAnimation)==null?void 0:m.stop()}),this.root.nodes.forEach(f_),this.root.sharedNodes.clear()}}}function JM(n){n.updateLayout()}function t3(n){var s;const t=((s=n.resumeFrom)==null?void 0:s.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:u}=n.options,c=t.source!==n.layout.source;u==="size"?Xn(x=>{const w=c?t.measuredBox[x]:t.layoutBox[x],V=dn(w);w.min=r[x].min,w.max=w.min+V}):mE(u,t.layoutBox,r)&&Xn(x=>{const w=c?t.measuredBox[x]:t.layoutBox[x],V=dn(r[x]);w.max=w.min+V,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[x].max=n.relativeTarget[x].min+V)});const m=mo();eu(m,r,t.layoutBox);const g=mo();c?eu(g,n.applyTransform(o,!0),t.measuredBox):eu(g,r,t.layoutBox);const y=!cE(m);let b=!1;if(!n.resumeFrom){const x=n.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:w,layout:V}=x;if(w&&V){const k=Be();Jh(k,t.layoutBox,w.layoutBox);const U=Be();Jh(U,r,V.layoutBox),hE(k,U)||(b=!0),x.options.layoutRoot&&(n.relativeTarget=U,n.relativeTargetOrigin=k,n.relativeParent=x)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:g,layoutDelta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:b})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function e3(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function n3(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function s3(n){n.clearSnapshot()}function f_(n){n.clearMeasurements()}function m_(n){n.isLayoutDirty=!1}function i3(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function p_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function r3(n){n.resolveTargetDelta()}function a3(n){n.calcProjection()}function o3(n){n.resetSkewAndRotation()}function l3(n){n.removeLeadSnapshot()}function g_(n,t,s){n.translate=de(t.translate,0,s),n.scale=de(t.scale,1,s),n.origin=t.origin,n.originPoint=t.originPoint}function y_(n,t,s,r){n.min=de(t.min,s.min,r),n.max=de(t.max,s.max,r)}function u3(n,t,s,r){y_(n.x,t.x,s.x,r),y_(n.y,t.y,s.y,r)}function c3(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const h3={duration:.45,ease:[.4,0,.1,1]},v_=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),b_=v_("applewebkit/")&&!v_("chrome/")?Math.round:En;function x_(n){n.min=b_(n.min),n.max=b_(n.max)}function d3(n){x_(n.x),x_(n.y)}function mE(n,t,s){return n==="position"||n==="preserve-aspect"&&!xM(h_(t),h_(s),.2)}function f3(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const m3=fE({attachResizeListener:(n,t)=>gu(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),np={current:void 0},pE=fE({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!np.current){const n=new m3({});n.mount(window),n.setOptions({layoutScroll:!0}),np.current=n}return np.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),p3={pan:{Feature:kM},drag:{Feature:IM,ProjectionNode:pE,MeasureLayout:oE}};function __(n,t,s){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",s==="Start");const o="onHover"+s,u=r[o];u&&ne.postRender(()=>u(t,ju(t)))}class g3 extends xr{mount(){const{current:t}=this.node;t&&(this.unmount=kV(t,(s,r)=>(__(this.node,r,"Start"),o=>__(this.node,o,"End"))))}unmount(){}}class y3 extends xr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nu(gu(this.node.current,"focus",()=>this.onFocus()),gu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function T_(n,t,s){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",s==="Start");const o="onTap"+(s==="End"?"":s),u=r[o];u&&ne.postRender(()=>u(t,ju(t)))}class v3 extends xr{mount(){const{current:t}=this.node;t&&(this.unmount=UV(t,(s,r)=>(T_(this.node,r,"Start"),(o,{success:u})=>T_(this.node,o,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $p=new WeakMap,sp=new WeakMap,b3=n=>{const t=$p.get(n.target);t&&t(n)},x3=n=>{n.forEach(b3)};function _3({root:n,...t}){const s=n||document;sp.has(s)||sp.set(s,{});const r=sp.get(s),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(x3,{root:n,...t})),r[o]}function T3(n,t,s){const r=_3(t);return $p.set(n,s),r.observe(n),()=>{$p.delete(n),r.unobserve(n)}}const w3={some:0,all:1};class E3 extends xr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:o="some",once:u}=t,c={root:s?s.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:w3[o]},m=g=>{const{isIntersecting:y}=g;if(this.isInView===y||(this.isInView=y,u&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:b,onViewportLeave:x}=this.node.getProps(),w=y?b:x;w&&w(g)};return T3(this.node.current,c,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(S3(t,s))&&this.startObserver()}unmount(){}}function S3({viewport:n={}},{viewport:t={}}={}){return s=>n[s]!==t[s]}const A3={inView:{Feature:E3},tap:{Feature:v3},focus:{Feature:y3},hover:{Feature:g3}},N3={layout:{ProjectionNode:pE,MeasureLayout:oE}},C3={...mM,...A3,...p3,...N3},R3=j6(C3,q6),j3=50,w_=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),D3=()=>({time:0,x:w_(),y:w_()}),V3={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function E_(n,t,s,r){const o=s[t],{length:u,position:c}=V3[t],m=o.current,g=s.time;o.current=n[`scroll${c}`],o.scrollLength=n[`scroll${u}`]-n[`client${u}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Eo(0,o.scrollLength,o.current);const y=r-g;o.velocity=y>j3?0:Yg(o.current-m,y)}function M3(n,t,s){E_(n,"x",t,s),E_(n,"y",t,s),t.time=s}function I3(n,t){const s={x:0,y:0};let r=n;for(;r&&r!==t;)if(ww(r))s.x+=r.offsetLeft,s.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const o=r.getBoundingClientRect();r=r.parentElement;const u=r.getBoundingClientRect();s.x+=o.left-u.left,s.y+=o.top-u.top}else if(r instanceof SVGGraphicsElement){const{x:o,y:u}=r.getBBox();s.x+=o,s.y+=u;let c=null,m=r.parentNode;for(;!c;)m.tagName==="svg"&&(c=m),m=r.parentNode;r=c}else break;return s}const Zp={start:0,center:.5,end:1};function S_(n,t,s=0){let r=0;if(n in Zp&&(n=Zp[n]),typeof n=="string"){const o=parseFloat(n);n.endsWith("px")?r=o:n.endsWith("%")?n=o/100:n.endsWith("vw")?r=o/100*document.documentElement.clientWidth:n.endsWith("vh")?r=o/100*document.documentElement.clientHeight:n=o}return typeof n=="number"&&(r=t*n),s+r}const k3=[0,0];function O3(n,t,s,r){let o=Array.isArray(n)?n:k3,u=0,c=0;return typeof n=="number"?o=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?o=n.split(" "):o=[n,Zp[n]?n:"0"]),u=S_(o[0],s,r),c=S_(o[1],t),u-c}const P3={All:[[0,0],[1,1]]},L3={x:0,y:0};function U3(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function B3(n,t,s){const{offset:r=P3.All}=s,{target:o=n,axis:u="y"}=s,c=u==="y"?"height":"width",m=o!==n?I3(o,n):L3,g=o===n?{width:n.scrollWidth,height:n.scrollHeight}:U3(o),y={width:n.clientWidth,height:n.clientHeight};t[u].offset.length=0;let b=!t[u].interpolate;const x=r.length;for(let w=0;w<x;w++){const V=O3(r[w],y[c],g[c],m[u]);!b&&V!==t[u].interpolatorOffsets[w]&&(b=!0),t[u].offset[w]=V}b&&(t[u].interpolate=rw(t[u].offset,aw(r),{clamp:!1}),t[u].interpolatorOffsets=[...t[u].offset]),t[u].progress=Xs(0,1,t[u].interpolate(t[u].current))}function z3(n,t=n,s){if(s.x.targetOffset=0,s.y.targetOffset=0,t!==n){let r=t;for(;r&&r!==n;)s.x.targetOffset+=r.offsetLeft,s.y.targetOffset+=r.offsetTop,r=r.offsetParent}s.x.targetLength=t===n?t.scrollWidth:t.clientWidth,s.y.targetLength=t===n?t.scrollHeight:t.clientHeight,s.x.containerLength=n.clientWidth,s.y.containerLength=n.clientHeight}function F3(n,t,s,r={}){return{measure:o=>{z3(n,r.target,s),M3(n,s,o),(r.offset||r.target)&&B3(n,s,r)},notify:()=>t(s)}}const Bl=new WeakMap,A_=new WeakMap,ip=new WeakMap,N_=n=>n===document.scrollingElement?window:n;function gE(n,{container:t=document.scrollingElement,...s}={}){if(!t)return En;let r=ip.get(t);r||(r=new Set,ip.set(t,r));const o=D3(),u=F3(t,n,o,s);if(r.add(u),!Bl.has(t)){const m=()=>{for(const x of r)x.measure(Ge.timestamp);ne.preUpdate(g)},g=()=>{for(const x of r)x.notify()},y=()=>ne.read(m);Bl.set(t,y);const b=N_(t);window.addEventListener("resize",y,{passive:!0}),t!==document.documentElement&&A_.set(t,QV(t,y)),b.addEventListener("scroll",y,{passive:!0}),y()}const c=Bl.get(t);return ne.read(c,!1,!0),()=>{var y;$s(c);const m=ip.get(t);if(!m||(m.delete(u),m.size))return;const g=Bl.get(t);Bl.delete(t),g&&(N_(t).removeEventListener("scroll",g),(y=A_.get(t))==null||y(),window.removeEventListener("resize",g))}}const C_=new Map;function q3(n){const t={value:0},s=gE(r=>{t.value=r[n.axis].progress*100},n);return{currentTime:t,cancel:s}}function yE({source:n,container:t,...s}){const{axis:r}=s;n&&(t=n);const o=C_.get(t)??new Map;C_.set(t,o);const u=s.target??"self",c=o.get(u)??{},m=r+(s.offset??[]).join(",");return c[m]||(c[m]=!s.target&&cw()?new ScrollTimeline({source:t,axis:r}):q3({container:t,...s})),c[m]}function H3(n,t){const s=yE(t);return n.attachTimeline({timeline:t.target?void 0:s,observe:r=>(r.pause(),Cw(o=>{r.time=r.iterationDuration*o},s))})}function G3(n){return n.length===2}function Y3(n,t){return G3(n)?gE(s=>{n(s[t.axis].progress,s)},t):Cw(n,yE(t))}function K3(n,{axis:t="y",container:s=document.scrollingElement,...r}={}){if(!s)return En;const o={axis:t,container:s,...r};return typeof n=="function"?Y3(n,o):H3(n,o)}const Q3=()=>({scrollX:Us(0),scrollY:Us(0),scrollXProgress:Us(0),scrollYProgress:Us(0)}),ph=n=>n?!n.current:!1;function X3({container:n,target:t,...s}={}){const r=VT(Q3),o=q.useRef(null),u=q.useRef(!1),c=q.useCallback(()=>(o.current=K3((m,{x:g,y})=>{r.scrollX.set(g.current),r.scrollXProgress.set(g.progress),r.scrollY.set(y.current),r.scrollYProgress.set(y.progress)},{...s,container:(n==null?void 0:n.current)||void 0,target:(t==null?void 0:t.current)||void 0}),()=>{var m;(m=o.current)==null||m.call(o)}),[n,t,JSON.stringify(s.offset)]);return MT(()=>{if(u.current=!1,ph(n)||ph(t)){u.current=!0;return}else return c()},[c]),q.useEffect(()=>{if(u.current)return du(!ph(n)),du(!ph(t)),c()},[c]),r}const $3=()=>{const{scrollYProgress:n}=X3();return f.jsx(R3.div,{style:{scaleX:n,position:"fixed",top:0,left:0,right:0,height:4,originX:0,background:"linear-gradient(90deg, #f49221, #ff6b35)",zIndex:9999}})},Z3=({trip:n,mode:t,onClose:s,onUpdate:r})=>{const[o,u]=q.useState(""),[c,m]=q.useState(""),[g,y]=q.useState(!1),b=async w=>{w.preventDefault();const V=o.trim();if(!V)return alert("Please enter a member name.");if(n.participants.includes(V))return alert("This member already exists!");y(!0);try{const k=[...n.participants,V],U={...n.memberAvatars};c&&(U[V]=c),await h1(n.id,k,U),u(""),m(""),r(),alert(`${V} has been added successfully!`)}catch(k){console.error("Error adding member:",k),alert("Failed to add member. Please try again.")}finally{y(!1)}},x=async w=>{if(confirm(`Are you sure you want to remove ${w}?`)){y(!0);try{const V=n.participants.filter(U=>U!==w),k={...n.memberAvatars};delete k[w],await h1(n.id,V,k),r(),alert(`${w} has been removed.`)}catch(V){console.error("Error removing member:",V),alert("Failed to remove member. Please try again.")}finally{y(!1)}}};return f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-3xl p-10 border-4 border-[#f49221] max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex justify-between items-center mb-10",children:[f.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:" Manage Members"}),f.jsx("button",{onClick:s,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:f.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Current Members"}),f.jsx("div",{className:"space-y-3",children:n.participants.map((w,V)=>{var L;const k=(L=n.memberAvatars)==null?void 0:L[w],U=en.find(z=>z.id===k);return f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-2xl p-4 border-2 border-gray-200",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[U!=null&&U.image?f.jsx("img",{src:U.image,alt:w,className:"w-10 h-10 rounded-full object-cover border-2 border-[#f49221]"}):f.jsx("div",{className:"w-10 h-10 rounded-full bg-[#f49221]/20 flex items-center justify-center font-bold text-[#f49221]",children:w[0]}),f.jsx("span",{className:"font-bold text-black text-lg",children:w})]}),f.jsx("button",{onClick:()=>x(w),disabled:g||n.participants.length<=1,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl font-bold text-xs uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:n.participants.length<=1?"Cannot remove the last member":"Remove member",children:"Remove"})]},V)})})]}),f.jsxs("div",{className:"border-t-2 border-gray-200 pt-8",children:[f.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Add New Member"}),f.jsxs("form",{onSubmit:b,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Member Name"}),f.jsx("input",{type:"text",placeholder:"Enter name",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:o,onChange:w=>u(w.target.value),disabled:g})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Avatar (Optional)"}),f.jsx("div",{className:"grid grid-cols-6 gap-3",children:en.map(w=>f.jsx("button",{type:"button",onClick:()=>m(w.id===c?"":w.id),className:`p-2 rounded-xl border-2 transition-all ${c===w.id?"border-[#f49221] bg-[#f49221]/10 scale-110":"border-gray-200 hover:border-[#f49221]/50"}`,disabled:g,children:f.jsx("img",{src:w.image,alt:`Avatar ${w.id}`,className:"w-12 h-12 rounded-full object-cover"})},w.id))})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{type:"submit",disabled:g||!o.trim(),className:"flex-1 bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Adding...":"Add Member"}),f.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all",children:"Close"})]})]})]})]})})},W3=()=>{var ut;const[n,t]=q.useState(localStorage.getItem("trip_user_name")),[s,r]=q.useState(null),[o,u]=q.useState(null),[c,m]=q.useState([]),[g,y]=q.useState([]),[b,x]=q.useState([]),[w,V]=q.useState(!1),[k,U]=q.useState(!1),[L,z]=q.useState(!1),[W,K]=q.useState(!1),[tt,et]=q.useState(null),[J,j]=q.useState(!1),[C,A]=q.useState(null),[N,M]=q.useState("expenses"),[E,D]=q.useState(localStorage.getItem("board_mode")||null),st=q.useMemo(()=>{if(!o)return[];const B=Ug(c,g);return o.participants.map(X=>{let ct=0,Tt=0;c.forEach(vt=>{vt.paidBy===X&&(ct+=vt.amount),vt.splitBetween.includes(X)&&(vt.splitType==="custom"&&vt.customSplits&&vt.customSplits[X]?Tt+=vt.customSplits[X]:Tt+=vt.perPersonAmount)});const Et=B.filter(vt=>vt.from===X),O=B.filter(vt=>vt.to===X),rt=Et.reduce((vt,At)=>vt+At.amount,0),dt=O.reduce((vt,At)=>vt+At.amount,0),mt=rt-dt;return{name:X,paid:ct,owed:Tt,net:mt}})},[o,c,g]);return q.useEffect(()=>{const B=localStorage.getItem("current_trip_id");B&&r(B)},[]),q.useEffect(()=>{E==="ps"&&M("products")},[E]),q.useEffect(()=>{if(!s){u(null),m([]),j(!1);return}j(!0),et(null),localStorage.setItem("current_trip_id",s);const B=setTimeout(()=>{j(!1),et("Connection timeout. Please check your internet connection and try again."),r(null),localStorage.removeItem("current_trip_id")},5e3),X=E==="ps"?Aj(s,O=>{clearTimeout(B),j(!1),O?(u(O),et(null)):(et("PS board not found. Verify the PS ID or check if it was deleted."),r(null),localStorage.removeItem("current_trip_id"))}):Nj(s,O=>{clearTimeout(B),j(!1),O?(u(O),et(null)):(et("Trip not found. Verify the Trip ID or check if it was deleted."),r(null),localStorage.removeItem("current_trip_id"))}),ct=E==="trip"?Cj(s,O=>{m(O)}):()=>{},Tt=E==="trip"?Mj(s,O=>{y(O)}):()=>{},Et=E==="ps"?kj(s,O=>{x(O)}):()=>{};return()=>{clearTimeout(B),X(),ct(),Tt(),Et()}},[s,E]),_j()?n?!s||tt?f.jsxs("div",{className:"min-h-screen bg-white pt-10 px-4",children:[tt&&f.jsxs("div",{className:"max-w-md mx-auto mb-6 bg-red-50 border-2 border-red-200 text-red-700 px-6 py-4 rounded-2xl text-sm font-bold shadow-sm flex items-center gap-3",children:[f.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),tt]}),!E&&f.jsx(zj,{onSelect:B=>{D(B),localStorage.setItem("board_mode",B)}}),E==="trip"&&f.jsx(Bj,{onTripSelected:B=>{r(B),localStorage.setItem("board_mode","trip")},onBack:()=>{D(null),localStorage.removeItem("board_mode")}}),E==="ps"&&f.jsx(Fj,{onPsSelected:B=>{r(B),localStorage.setItem("board_mode","ps")},onBack:()=>{D(null),localStorage.removeItem("board_mode")}})]}):J?f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-[#f49221] border-t-transparent mb-4 shadow-lg shadow-[#f49221]/20"}),f.jsx("p",{className:"text-black font-bold uppercase tracking-widest text-[10px] mb-6",children:"Connecting to Firebase..."}),f.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:"Clear & Restart"})]}):!o&&s?f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-[#f49221] border-t-transparent mb-4 shadow-lg shadow-[#f49221]/20"}),f.jsx("p",{className:"text-black font-bold uppercase tracking-widest text-[10px] mb-6",children:"Loading trip..."})]}):f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-[#1a0a00] to-black pb-20 relative overflow-hidden",children:[f.jsx($3,{}),f.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[f.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[#f49221] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),f.jsx("div",{className:"absolute top-1/3 right-1/4 w-96 h-96 bg-[#e58515] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),f.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-96 h-96 bg-[#f49221] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),f.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-gradient-to-r from-[#f49221]/80 to-[#e58515]/80 border-b border-white/10 shadow-2xl shadow-[#f49221]/20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:"/manas/pics/manas.png",alt:"Manas Logo",className:"w-10 h-10 rounded-xl shadow-lg hover:scale-110 transition-transform object-cover"}),f.jsx("h1",{className:"text-xl font-bold text-white tracking-tight",children:"Manas"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("button",{onClick:()=>{r(null),localStorage.removeItem("current_trip_id"),D(null),localStorage.removeItem("board_mode")},className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-md text-white rounded-lg text-sm font-medium transition-all border border-white/30 hover:border-white/50 flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Boards"]}),f.jsx("div",{className:"w-11 h-11 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center text-white font-bold border-2 border-white/40 shadow-lg hover:scale-110 transition-transform cursor-pointer",children:(ut=n==null?void 0:n[0])==null?void 0:ut.toUpperCase()})]})]})}),f.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8 relative z-10",children:[f.jsx("div",{className:"mb-8 backdrop-blur-sm bg-white/5 rounded-3xl p-6 border border-white/10",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-white via-[#f49221] to-white bg-clip-text text-transparent mb-3",children:"Dashboard"}),f.jsx("p",{className:"text-gray-300 text-sm",children:"An overview of your group's expenses, products & balances."}),f.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(s),K(!0),setTimeout(()=>K(!1),2e3)},className:"mt-3 text-xs text-gray-400 hover:text-[#f49221] transition-colors backdrop-blur-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10 hover:border-[#f49221]/50",children:["Trip: ",o.name,"  ID: ",s.substring(0,12),"... ",W?" Copied":" Copy"]})]}),f.jsxs("button",{onClick:()=>z(!0),className:"px-6 py-3 bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white rounded-2xl font-bold text-sm uppercase tracking-wider transition-all flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Manage Members"]})]})}),f.jsxs("div",{className:"mb-8 flex gap-4 backdrop-blur-sm bg-white/5 rounded-2xl p-2 border border-white/10 w-fit",children:[E==="trip"&&f.jsx("button",{onClick:()=>M("expenses"),className:`px-6 py-3 rounded-xl font-bold text-sm transition-all ${N==="expenses"?"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white shadow-lg shadow-[#f49221]/50":"text-gray-400 hover:text-white"}`,children:" Expenses"}),E==="ps"&&f.jsx("button",{onClick:()=>M("products"),className:`px-6 py-3 rounded-xl font-bold text-sm transition-all ${N==="products"?"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white shadow-lg shadow-[#f49221]/50":"text-gray-400 hover:text-white"}`,children:" Products (PS)"})]}),E!=="ps"&&f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[f.jsx("span",{className:"w-1 h-8 bg-gradient-to-b from-[#f49221] to-[#e58515] rounded-full"}),"Balances"]}),f.jsxs("button",{onClick:()=>V(!0),className:"bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white px-6 py-3 rounded-xl font-medium text-sm flex items-center gap-2 transition-all shadow-lg shadow-[#f49221]/50 hover:shadow-xl hover:shadow-[#f49221]/60 hover:scale-105",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Expense"]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:st.map(B=>{var X;return f.jsxs("div",{className:"group relative backdrop-blur-xl bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-2xl p-6 hover:border-[#f49221]/50 transition-all hover:shadow-2xl hover:shadow-[#f49221]/30 hover:scale-105 duration-300 cursor-pointer",onClick:()=>A(B.name),children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#f49221]/10 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[o.memberAvatars&&o.memberAvatars[B.name]?f.jsx("img",{src:((X=en.find(ct=>ct.id===o.memberAvatars[B.name]))==null?void 0:X.image)||"",alt:B.name,className:"w-10 h-10 rounded-full object-cover border-2 border-[#f49221]/50"}):f.jsx("div",{className:"w-10 h-10 bg-[#f49221]/20 rounded-full flex items-center justify-center text-[#f49221] font-bold border-2 border-[#f49221]/50",children:B.name[0]}),f.jsx("h4",{className:"text-white font-bold text-lg",children:B.name})]}),f.jsx("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full backdrop-blur-md ${B.net>.01?"bg-red-500/30 text-red-200 border border-red-400/30":B.net<-.01?"bg-[#f49221]/30 text-[#f49221] border border-[#f49221]/30":"bg-gray-500/30 text-gray-300 border border-gray-400/30"}`,children:B.net>.01?"Owes":B.net<-.01?"Gets Back":"Settled"})]}),f.jsxs("div",{className:"text-4xl font-black bg-gradient-to-r from-[#f49221] via-[#ff9d3d] to-[#e58515] bg-clip-text text-transparent mb-3 drop-shadow-lg",children:[f.jsx(oe,{className:"mr-2"}),Math.abs(B.net).toFixed(2)]}),f.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[f.jsx("span",{className:"w-2 h-2 bg-[#f49221] rounded-full animate-pulse"}),"Paid: ",f.jsxs("span",{className:"text-[#f49221] font-bold",children:[f.jsx(oe,{className:"mr-1"}),B.paid.toFixed(2)]})]})]})]},B.name)})})]}),E!=="ps"&&f.jsx(Xj,{expenses:c,tripId:o.id,trackedSettlements:g,participants:o.participants,trip:o}),N==="expenses"&&E!=="ps"?f.jsxs("div",{className:"mt-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[f.jsx("span",{className:"w-1 h-8 bg-gradient-to-b from-[#f49221] to-[#e58515] rounded-full"}),"Recent Expenses"]}),f.jsxs("span",{className:"backdrop-blur-md bg-white/10 border border-white/20 text-gray-300 text-sm px-4 py-2 rounded-full font-medium",children:[c.length," transaction",c.length!==1?"s":""]})]}),c.length===0?f.jsxs("div",{className:"backdrop-blur-xl bg-white/5 border-2 border-dashed border-[#f49221]/30 rounded-3xl p-16 text-center",children:[f.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#f49221]/20 to-[#e58515]/20 rounded-full flex items-center justify-center mx-auto mb-6 backdrop-blur-md border border-[#f49221]/30",children:f.jsx("svg",{className:"w-10 h-10 text-[#f49221]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("p",{className:"text-gray-300 text-xl font-semibold mb-2",children:"No expenses yet"}),f.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"Get started by adding your first expense."}),f.jsxs("button",{onClick:()=>V(!0),className:"bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white px-8 py-3 rounded-xl font-semibold inline-flex items-center gap-2 transition-all shadow-xl shadow-[#f49221]/50 hover:shadow-2xl hover:shadow-[#f49221]/60 hover:scale-105",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Expense"]})]}):f.jsx(Gj,{expenses:c,trip:o,participants:o.participants})]}):E==="ps"&&N==="products"?f.jsxs("div",{className:"mt-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[f.jsx("span",{className:"w-1 h-8 bg-gradient-to-b from-[#f49221] to-[#e58515] rounded-full"}),"Product Tracking (PS)"]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs("span",{className:"backdrop-blur-md bg-white/10 border border-white/20 text-gray-300 text-sm px-4 py-2 rounded-full font-medium",children:[b.length," product",b.length!==1?"s":""]}),f.jsxs("button",{onClick:()=>U(!0),className:"bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white px-6 py-3 rounded-xl font-medium text-sm flex items-center gap-2 transition-all shadow-lg shadow-[#f49221]/50 hover:shadow-xl hover:shadow-[#f49221]/60 hover:scale-105",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Product"]})]})]}),f.jsx(Qj,{products:b,trip:o})]}):null]}),E==="trip"&&f.jsx("button",{onClick:()=>V(!0),className:"fixed bottom-8 right-8 w-16 h-16 bg-[#f49221] text-white rounded-2xl shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-40 shadow-[#f49221]/40 border-4 border-white",children:f.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),E==="ps"&&f.jsx("button",{onClick:()=>U(!0),className:"fixed bottom-8 right-8 w-16 h-16 bg-[#f49221] text-white rounded-2xl shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-40 shadow-[#f49221]/40 border-4 border-white",children:f.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),w&&E!=="ps"&&f.jsx(qj,{tripId:o.id,participants:o.participants,trip:o,onClose:()=>V(!1)}),k&&E==="ps"&&f.jsx(Yj,{tripId:o.id,participants:o.participants,trip:o,onClose:()=>U(!1)}),C&&o&&f.jsx($j,{person:C,balances:st,expenses:c,settlements:g,trip:o,onClose:()=>A(null)}),L&&o&&E&&f.jsx(Z3,{trip:o,mode:E,onClose:()=>z(!1),onUpdate:()=>{const B=s;r(null),setTimeout(()=>r(B),100)}})]}):f.jsx(Uj,{onJoin:t}):f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white p-6 text-center",children:f.jsxs("div",{className:"max-w-md bg-white p-10 rounded-[2rem] shadow-2xl border-2 border-[#f49221]",children:[f.jsx("div",{className:"w-20 h-20 bg-[#f49221] text-white rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-xl",children:f.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),f.jsx("h1",{className:"text-2xl font-bold text-black mb-4 font-pt",children:"Configuration Required"}),f.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"The application needs valid Firebase credentials to function. Check your setup."})]})})},vE=document.getElementById("root");if(!vE)throw new Error("Could not find root element to mount to");const J3=rA.createRoot(vE);J3.render(f.jsx(Ch.StrictMode,{children:f.jsx(W3,{})}));
